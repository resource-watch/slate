
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Reference - Resource Watch API</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-f112f4df.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-4d023e20.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-510caf58.js"></script>

  </head>

  <body class="reference rw" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-a42ba9eb.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
      <ul class="toc-list-h1">
        <li>
          <a href="index.html" class="toc-h1 toc-link" data-title="Home">Home</a>
        </li>
        <li>
          <a href="quickstart.html" class="toc-h1 toc-link" data-title="Quickstart">Quickstart</a>
        </li>
        <li>
          <a href="concepts.html" class="toc-h1 toc-link" data-title="Concepts">Concepts</a>
        </li>
        <li>
          <a href="reference.html" class="toc-h1 toc-link" data-title="Reference">Reference</a>
        </li>
        <li>
          <a href="tutorials.html" class="toc-h1 toc-link" data-title="Tutorials">Tutorials</a>
        </li>
      </ul>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#resource-watch-api-reference" class="toc-h1 toc-link" data-title="Resource Watch API Reference">Resource Watch API Reference</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#dataset" class="toc-h1 toc-link" data-title="Dataset">Dataset</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-dataset" class="toc-h2 toc-link" data-title="What is a dataset?">What is a dataset?</a>
                  </li>
                  <li>
                    <a href="#getting-all-datasets" class="toc-h2 toc-link" data-title="Getting all datasets">Getting all datasets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#search" class="toc-h3 toc-link" data-title="Search">Search</a>
                          </li>
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#basics-of-sorting" class="toc-h4 toc-link" data-title="Basics of sorting">Basics of sorting</a>
                                  </li>
                                  <li>
                                    <a href="#special-sorting-criteria" class="toc-h4 toc-link" data-title="Special sorting criteria">Special sorting criteria</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#include-entities-associated-with-the-datasets" class="toc-h3 toc-link" data-title="Include entities associated with the datasets">Include entities associated with the datasets</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-a-dataset-by-id-or-slug" class="toc-h2 toc-link" data-title="Getting a dataset by id or slug">Getting a dataset by id or slug</a>
                  </li>
                  <li>
                    <a href="#getting-multiple-datasets-by-ids" class="toc-h2 toc-link" data-title="Getting multiple datasets by ids">Getting multiple datasets by ids</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-getting-multiple-datasets-by-ids" class="toc-h3 toc-link" data-title="Errors for getting multiple datasets by ids">Errors for getting multiple datasets by ids</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-a-dataset" class="toc-h2 toc-link" data-title="Creating a dataset">Creating a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-creating-a-dataset" class="toc-h3 toc-link" data-title="Errors for creating a dataset">Errors for creating a dataset</a>
                          </li>
                          <li>
                            <a href="#carto-datasets" class="toc-h3 toc-link" data-title="Carto datasets">Carto datasets</a>
                          </li>
                          <li>
                            <a href="#arcgis-feature-layer" class="toc-h3 toc-link" data-title="ArcGIS feature layer">ArcGIS feature layer</a>
                          </li>
                          <li>
                            <a href="#google-earth-engine" class="toc-h3 toc-link" data-title="Google Earth Engine">Google Earth Engine</a>
                          </li>
                          <li>
                            <a href="#wms" class="toc-h3 toc-link" data-title="WMS">WMS</a>
                          </li>
                          <li>
                            <a href="#document-based-datasets-json-csv-tsv-or-xml" class="toc-h3 toc-link" data-title="Document based datasets: JSON, CSV, TSV or XML">Document based datasets: JSON, CSV, TSV or XML</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#using-the-legend-fields-to-define-field-types" class="toc-h4 toc-link" data-title="Using the legend fields to define field types">Using the legend fields to define field types</a>
                                  </li>
                                  <li>
                                    <a href="#uploading-a-dataset-file" class="toc-h4 toc-link" data-title="Uploading a dataset file">Uploading a dataset file</a>
                                  </li>
                                  <li>
                                    <a href="#errors-for-upload-a-dataset-file" class="toc-h4 toc-link" data-title="Errors for upload a dataset file">Errors for upload a dataset file</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-a-dataset" class="toc-h2 toc-link" data-title="Updating a dataset">Updating a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#updating-the-fields-of-a-dataset" class="toc-h3 toc-link" data-title="Updating the fields of a dataset">Updating the fields of a dataset</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-updating-the-fields-of-a-dataset" class="toc-h4 toc-link" data-title="Errors for updating the fields of a dataset">Errors for updating the fields of a dataset</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#concatenate-and-append-data-to-a-document-based-dataset" class="toc-h3 toc-link" data-title="Concatenate and append data to a document based dataset">Concatenate and append data to a document based dataset</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-concatenating-and-appending-data-to-a-document-based-dataset" class="toc-h4 toc-link" data-title="Errors for concatenating and appending data to a document based dataset">Errors for concatenating and appending data to a document based dataset</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#overwrite-data-for-a-document-based-dataset" class="toc-h3 toc-link" data-title="Overwrite data for a document based dataset">Overwrite data for a document based dataset</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-overwriting-data-for-a-document-based-dataset" class="toc-h4 toc-link" data-title="Errors for overwriting data for a document based dataset">Errors for overwriting data for a document based dataset</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#cloning-a-dataset" class="toc-h2 toc-link" data-title="Cloning a dataset">Cloning a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-cloning-a-dataset" class="toc-h3 toc-link" data-title="Errors for cloning a dataset">Errors for cloning a dataset</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-a-dataset" class="toc-h2 toc-link" data-title="Deleting a dataset">Deleting a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-deleting-a-dataset" class="toc-h3 toc-link" data-title="Errors for deleting a dataset">Errors for deleting a dataset</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#dataset-automatic-synchronization" class="toc-h2 toc-link" data-title="Dataset automatic synchronization">Dataset automatic synchronization</a>
                  </li>
                  <li>
                    <a href="#flush-dataset-cache" class="toc-h2 toc-link" data-title="Flush dataset cache">Flush dataset cache</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-flushing-a-dataset-39-s-cache" class="toc-h3 toc-link" data-title="Errors for flushing a dataset's cache">Errors for flushing a dataset's cache</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#recover" class="toc-h2 toc-link" data-title="Recover">Recover</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-recovering-a-dataset" class="toc-h3 toc-link" data-title="Errors for recovering a dataset">Errors for recovering a dataset</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#dataset-reference" class="toc-h2 toc-link" data-title="Dataset reference">Dataset reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#fields" class="toc-h1 toc-link" data-title="Fields">Fields</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-are-fields" class="toc-h2 toc-link" data-title="What are fields?">What are fields?</a>
                  </li>
                  <li>
                    <a href="#how-to-get-the-dataset-fields" class="toc-h2 toc-link" data-title="How to get the dataset fields">How to get the dataset fields</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#carto" class="toc-h3 toc-link" data-title="Carto">Carto</a>
                          </li>
                          <li>
                            <a href="#arcgis-feature-layer" class="toc-h3 toc-link" data-title="ArcGIS feature layer">ArcGIS feature layer</a>
                          </li>
                          <li>
                            <a href="#google-earth-engine" class="toc-h3 toc-link" data-title="Google Earth Engine">Google Earth Engine</a>
                          </li>
                          <li>
                            <a href="#nex-gddp" class="toc-h3 toc-link" data-title="NEX-GDDP">NEX-GDDP</a>
                          </li>
                          <li>
                            <a href="#bigquery" class="toc-h3 toc-link" data-title="BigQuery">BigQuery</a>
                          </li>
                          <li>
                            <a href="#loca" class="toc-h3 toc-link" data-title="Loca">Loca</a>
                          </li>
                          <li>
                            <a href="#document-based-dataset-types-csv-tsv-json-and-xml" class="toc-h3 toc-link" data-title="Document-based dataset types (csv, tsv, json and xml)">Document-based dataset types (csv, tsv, json and xml)</a>
                          </li>
                          <li>
                            <a href="#dataset-types-not-supported-by-the-fields-endpoint" class="toc-h3 toc-link" data-title="Dataset types not supported by the fields endpoint">Dataset types not supported by the fields endpoint</a>
                          </li>
                          <li>
                            <a href="#errors-for-getting-a-dataset-fields" class="toc-h3 toc-link" data-title="Errors for getting a dataset fields">Errors for getting a dataset fields</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#query" class="toc-h1 toc-link" data-title="Query">Query</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#querying-datasets" class="toc-h2 toc-link" data-title="Querying datasets">Querying datasets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#query-response-body" class="toc-h3 toc-link" data-title="Query response body">Query response body</a>
                          </li>
                          <li>
                            <a href="#query-endpoint-parameters" class="toc-h3 toc-link" data-title="Query endpoint parameters">Query endpoint parameters</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#filter-query-results-by-geostore" class="toc-h4 toc-link" data-title="Filter query results by geostore">Filter query results by geostore</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#alternative-ways-for-querying-datasets" class="toc-h3 toc-link" data-title="Alternative ways for querying datasets">Alternative ways for querying datasets</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#using-the-dataset-slug-instead-of-the-id" class="toc-h4 toc-link" data-title="Using the dataset slug instead of the id">Using the dataset slug instead of the id</a>
                                  </li>
                                  <li>
                                    <a href="#post-requests" class="toc-h4 toc-link" data-title="POST requests">POST requests</a>
                                  </li>
                                  <li>
                                    <a href="#dataset-id-as-the-from-clause" class="toc-h4 toc-link" data-title="Dataset id as the FROM clause">Dataset id as the FROM clause</a>
                                  </li>
                                  <li>
                                    <a href="#redundant-from-clause-document-based-datasets-only" class="toc-h4 toc-link" data-title="Redundant FROM clause (document based datasets only)">Redundant FROM clause (document based datasets only)</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#downloading-data-from-a-dataset" class="toc-h2 toc-link" data-title="Downloading data from a dataset">Downloading data from a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#download-response-body" class="toc-h3 toc-link" data-title="Download response body">Download response body</a>
                          </li>
                          <li>
                            <a href="#download-execution-errors" class="toc-h3 toc-link" data-title="Download execution errors">Download execution errors</a>
                          </li>
                          <li>
                            <a href="#download-endpoint-parameters" class="toc-h3 toc-link" data-title="Download endpoint parameters">Download endpoint parameters</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#filter-download-results-by-geostore" class="toc-h4 toc-link" data-title="Filter download results by geostore">Filter download results by geostore</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#alternative-ways-for-downloading-query-execution-results" class="toc-h3 toc-link" data-title="Alternative ways for downloading query execution results">Alternative ways for downloading query execution results</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#using-the-dataset-slug-instead-of-the-id-2" class="toc-h4 toc-link" data-title="Using the dataset slug instead of the id">Using the dataset slug instead of the id</a>
                                  </li>
                                  <li>
                                    <a href="#post-requests-2" class="toc-h4 toc-link" data-title="POST requests">POST requests</a>
                                  </li>
                                  <li>
                                    <a href="#dataset-id-as-the-from-clause-2" class="toc-h4 toc-link" data-title="Dataset id as the FROM clause">Dataset id as the FROM clause</a>
                                  </li>
                                  <li>
                                    <a href="#redundant-from-clause-document-based-datasets-only-2" class="toc-h4 toc-link" data-title="Redundant FROM clause (document-based datasets only)">Redundant FROM clause (document-based datasets only)</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-data-from-a-dataset" class="toc-h2 toc-link" data-title="Deleting data from a dataset">Deleting data from a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#delete-query-execution-errors" class="toc-h3 toc-link" data-title="Delete query execution errors">Delete query execution errors</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#supported-sql-syntax-reference" class="toc-h2 toc-link" data-title="Supported SQL syntax reference">Supported SQL syntax reference</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#cartodb-datasets" class="toc-h3 toc-link" data-title="CartoDB datasets">CartoDB datasets</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#cartodb-geo-spatial-query-support" class="toc-h4 toc-link" data-title="CartoDB geo-spatial query support">CartoDB geo-spatial query support</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#arcgis-feature-service-datasets" class="toc-h3 toc-link" data-title="ArcGIS Feature Service datasets">ArcGIS Feature Service datasets</a>
                          </li>
                          <li>
                            <a href="#gee-datasets" class="toc-h3 toc-link" data-title="GEE datasets">GEE datasets</a>
                          </li>
                          <li>
                            <a href="#document-based-datasets" class="toc-h3 toc-link" data-title="Document-based datasets">Document-based datasets</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#troubleshooting-sql-queries-for-document-based-datasets" class="toc-h4 toc-link" data-title="Troubleshooting SQL queries for document-based datasets">Troubleshooting SQL queries for document-based datasets</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#rasdaman-datasets" class="toc-h3 toc-link" data-title="Rasdaman datasets">Rasdaman datasets</a>
                          </li>
                          <li>
                            <a href="#nex-gddp-and-loca-datasets" class="toc-h3 toc-link" data-title="NEX-GDDP and Loca datasets">NEX-GDDP and Loca datasets</a>
                          </li>
                          <li>
                            <a href="#wms-datasets" class="toc-h3 toc-link" data-title="WMS datasets">WMS datasets</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#layer" class="toc-h1 toc-link" data-title="Layer">Layer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-layer" class="toc-h2 toc-link" data-title="What is a layer?">What is a layer?</a>
                  </li>
                  <li>
                    <a href="#getting-all-layers" class="toc-h2 toc-link" data-title="Getting all layers">Getting all layers</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#getting-all-layers-for-a-dataset" class="toc-h3 toc-link" data-title="Getting all layers for a dataset">Getting all layers for a dataset</a>
                          </li>
                          <li>
                            <a href="#getting-all-layers-for-multiple-datasets" class="toc-h3 toc-link" data-title="Getting all layers for multiple datasets">Getting all layers for multiple datasets</a>
                          </li>
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                          <li>
                            <a href="#include-entities-associated-with-the-layers" class="toc-h3 toc-link" data-title="Include entities associated with the layers">Include entities associated with the layers</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#vocabulary" class="toc-h4 toc-link" data-title="Vocabulary">Vocabulary</a>
                                  </li>
                                  <li>
                                    <a href="#user" class="toc-h4 toc-link" data-title="User">User</a>
                                  </li>
                                  <li>
                                    <a href="#requesting-multiple-additional-entities" class="toc-h4 toc-link" data-title="Requesting multiple additional entities">Requesting multiple additional entities</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-a-layer-by-id-or-slug" class="toc-h2 toc-link" data-title="Getting a layer by id or slug">Getting a layer by id or slug</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#include-entities-associated-with-the-layer" class="toc-h3 toc-link" data-title="Include entities associated with the layer">Include entities associated with the layer</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-a-layer" class="toc-h2 toc-link" data-title="Creating a layer">Creating a layer</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-creating-a-layer" class="toc-h3 toc-link" data-title="Errors for creating a layer">Errors for creating a layer</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-a-layer" class="toc-h2 toc-link" data-title="Updating a layer">Updating a layer</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-updating-a-layer" class="toc-h3 toc-link" data-title="Errors for updating a layer">Errors for updating a layer</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-a-layer" class="toc-h2 toc-link" data-title="Deleting a layer">Deleting a layer</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-deleting-a-layer" class="toc-h3 toc-link" data-title="Errors for deleting a layer">Errors for deleting a layer</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#layer-reference" class="toc-h2 toc-link" data-title="Layer reference">Layer reference</a>
                  </li>
                  <li>
                    <a href="#contextual-layers" class="toc-h2 toc-link" data-title="Contextual layers">Contextual layers</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#what-is-a-contextual-layer" class="toc-h3 toc-link" data-title="What is a contextual layer">What is a contextual layer</a>
                          </li>
                          <li>
                            <a href="#getting-contextual-layers" class="toc-h3 toc-link" data-title="Getting contextual layers">Getting contextual layers</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#filters-2" class="toc-h4 toc-link" data-title="Filters">Filters</a>
                                  </li>
                                  <li>
                                    <a href="#sorting-2" class="toc-h4 toc-link" data-title="Sorting">Sorting</a>
                                  </li>
                                  <li>
                                    <a href="#errors-for-getting-contextual-layers" class="toc-h4 toc-link" data-title="Errors for getting contextual layers">Errors for getting contextual layers</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#creating-a-contextual-layer-for-a-user" class="toc-h3 toc-link" data-title="Creating a contextual layer for a user">Creating a contextual layer for a user</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-creating-a-contextual-layer-for-a-user" class="toc-h4 toc-link" data-title="Errors for creating a contextual layer for a user">Errors for creating a contextual layer for a user</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#creating-a-contextual-layer-for-a-team" class="toc-h3 toc-link" data-title="Creating a contextual layer for a team">Creating a contextual layer for a team</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-creating-a-contextual-layer-for-a-team" class="toc-h4 toc-link" data-title="Errors for creating a contextual layer for a team">Errors for creating a contextual layer for a team</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#updating-a-contextual-layer" class="toc-h3 toc-link" data-title="Updating a contextual layer">Updating a contextual layer</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-updating-a-layer-2" class="toc-h4 toc-link" data-title="Errors for updating a layer">Errors for updating a layer</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#deleting-a-contextual-layer" class="toc-h3 toc-link" data-title="Deleting a contextual layer">Deleting a contextual layer</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-deleting-a-layer-2" class="toc-h4 toc-link" data-title="Errors for deleting a layer">Errors for deleting a layer</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#getting-loss-layer-tiles" class="toc-h3 toc-link" data-title="Getting loss layer tiles">Getting loss layer tiles</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-loss-layer-tiles" class="toc-h4 toc-link" data-title="Errors for getting loss layer tiles">Errors for getting loss layer tiles</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#contextual-layer-reference" class="toc-h3 toc-link" data-title="Contextual layer reference">Contextual layer reference</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#widget" class="toc-h1 toc-link" data-title="Widget">Widget</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-widget" class="toc-h2 toc-link" data-title="What is a widget?">What is a widget?</a>
                  </li>
                  <li>
                    <a href="#getting-all-widgets" class="toc-h2 toc-link" data-title="Getting all widgets">Getting all widgets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#getting-all-widgets-for-a-dataset" class="toc-h3 toc-link" data-title="Getting all widgets for a dataset">Getting all widgets for a dataset</a>
                          </li>
                          <li>
                            <a href="#getting-all-widgets-for-multiple-datasets" class="toc-h3 toc-link" data-title="Getting all widgets for multiple datasets">Getting all widgets for multiple datasets</a>
                          </li>
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                          <li>
                            <a href="#include-entities-associated-with-the-widgets" class="toc-h3 toc-link" data-title="Include entities associated with the widgets">Include entities associated with the widgets</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#vocabulary" class="toc-h4 toc-link" data-title="Vocabulary">Vocabulary</a>
                                  </li>
                                  <li>
                                    <a href="#user" class="toc-h4 toc-link" data-title="User">User</a>
                                  </li>
                                  <li>
                                    <a href="#metadata" class="toc-h4 toc-link" data-title="Metadata">Metadata</a>
                                  </li>
                                  <li>
                                    <a href="#requesting-multiple-additional-entities" class="toc-h4 toc-link" data-title="Requesting multiple additional entities">Requesting multiple additional entities</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-a-widget-by-id" class="toc-h2 toc-link" data-title="Getting a widget by id">Getting a widget by id</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#overwrite-the-query-url-of-a-widget-response" class="toc-h3 toc-link" data-title="Overwrite the query url of a widget response">Overwrite the query url of a widget response</a>
                          </li>
                          <li>
                            <a href="#customize-the-query-url-of-a-widget-response" class="toc-h3 toc-link" data-title="Customize the query url of a widget response">Customize the query url of a widget response</a>
                          </li>
                          <li>
                            <a href="#include-entities-associated-with-the-widget" class="toc-h3 toc-link" data-title="Include entities associated with the widget">Include entities associated with the widget</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-a-widget" class="toc-h2 toc-link" data-title="Creating a widget">Creating a widget</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#widget-thumbnails" class="toc-h3 toc-link" data-title="Widget thumbnails">Widget thumbnails</a>
                          </li>
                          <li>
                            <a href="#errors-for-creating-a-widget" class="toc-h3 toc-link" data-title="Errors for creating a widget">Errors for creating a widget</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-a-widget" class="toc-h2 toc-link" data-title="Updating a widget">Updating a widget</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#widget-thumbnails-2" class="toc-h3 toc-link" data-title="Widget thumbnails">Widget thumbnails</a>
                          </li>
                          <li>
                            <a href="#errors-for-updating-a-widget" class="toc-h3 toc-link" data-title="Errors for updating a widget">Errors for updating a widget</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#cloning-a-widget" class="toc-h2 toc-link" data-title="Cloning a widget">Cloning a widget</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#widget-thumbnails-3" class="toc-h3 toc-link" data-title="Widget thumbnails">Widget thumbnails</a>
                          </li>
                          <li>
                            <a href="#errors-for-cloning-a-widget" class="toc-h3 toc-link" data-title="Errors for cloning a widget">Errors for cloning a widget</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-a-widget" class="toc-h2 toc-link" data-title="Deleting a widget">Deleting a widget</a>
                  </li>
                  <li>
                    <a href="#widget-reference" class="toc-h2 toc-link" data-title="Widget reference">Widget reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#collections" class="toc-h1 toc-link" data-title="Collections">Collections</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-collection" class="toc-h2 toc-link" data-title="What is a collection?">What is a collection?</a>
                  </li>
                  <li>
                    <a href="#creating-a-collection" class="toc-h2 toc-link" data-title="Creating a collection">Creating a collection</a>
                  </li>
                  <li>
                    <a href="#updating-a-collection" class="toc-h2 toc-link" data-title="Updating a collection">Updating a collection</a>
                  </li>
                  <li>
                    <a href="#adding-a-resource-to-an-existing-collection" class="toc-h2 toc-link" data-title="Adding a resource to an existing collection">Adding a resource to an existing collection</a>
                  </li>
                  <li>
                    <a href="#getting-collections-for-the-request-user" class="toc-h2 toc-link" data-title="Getting collections for the request user">Getting collections for the request user</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#get-a-collection-by-id" class="toc-h2 toc-link" data-title="Get a collection by id">Get a collection by id</a>
                  </li>
                  <li>
                    <a href="#delete-a-collection" class="toc-h2 toc-link" data-title="Delete a collection">Delete a collection</a>
                  </li>
                  <li>
                    <a href="#delete-a-collection-resource" class="toc-h2 toc-link" data-title="Delete a collection resource">Delete a collection resource</a>
                  </li>
                  <li>
                    <a href="#finding-collections-by-ids" class="toc-h2 toc-link" data-title="Finding collections by ids">Finding collections by ids</a>
                  </li>
                  <li>
                    <a href="#collection-reference" class="toc-h2 toc-link" data-title="Collection reference">Collection reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#jiminy" class="toc-h1 toc-link" data-title="Jiminy">Jiminy</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#jiminy-response-body" class="toc-h2 toc-link" data-title="Jiminy response body">Jiminy response body</a>
                  </li>
                  <li>
                    <a href="#jiminy-execution-errors" class="toc-h2 toc-link" data-title="Jiminy execution errors">Jiminy execution errors</a>
                  </li>
                  <li>
                    <a href="#jiminy-endpoint-parameters" class="toc-h2 toc-link" data-title="Jiminy endpoint parameters">Jiminy endpoint parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#forms" class="toc-h1 toc-link" data-title="Forms">Forms</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#requesting-a-webinar" class="toc-h2 toc-link" data-title="Requesting a webinar">Requesting a webinar</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#metadata" class="toc-h1 toc-link" data-title="Metadata">Metadata</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-metadata" class="toc-h2 toc-link" data-title="What is metadata?">What is metadata?</a>
                  </li>
                  <li>
                    <a href="#metadata-objects" class="toc-h2 toc-link" data-title="Metadata objects">Metadata objects</a>
                  </li>
                  <li>
                    <a href="#metadata-endpoints-overview" class="toc-h2 toc-link" data-title="Metadata endpoints overview">Metadata endpoints overview</a>
                  </li>
                  <li>
                    <a href="#getting-metadata" class="toc-h2 toc-link" data-title="Getting metadata">Getting metadata</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#getting-all-metadata" class="toc-h3 toc-link" data-title="Getting all metadata">Getting all metadata</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#application-and-language-filters" class="toc-h4 toc-link" data-title="Application and language filters">Application and language filters</a>
                                  </li>
                                  <li>
                                    <a href="#type-filter" class="toc-h4 toc-link" data-title="Type filter">Type filter</a>
                                  </li>
                                  <li>
                                    <a href="#limit" class="toc-h4 toc-link" data-title="Limit">Limit</a>
                                  </li>
                                  <li>
                                    <a href="#sorting" class="toc-h4 toc-link" data-title="Sorting">Sorting</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#getting-metadata-for-a-dataset-layer-or-widget" class="toc-h3 toc-link" data-title="Getting metadata for a dataset, layer or widget">Getting metadata for a dataset, layer or widget</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#application-and-language-filters-2" class="toc-h4 toc-link" data-title="Application and language filters">Application and language filters</a>
                                  </li>
                                  <li>
                                    <a href="#limit-2" class="toc-h4 toc-link" data-title="Limit">Limit</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#getting-metadata-for-multiple-datasets-layers-or-widgets" class="toc-h3 toc-link" data-title="Getting metadata for multiple datasets, layers or widgets">Getting metadata for multiple datasets, layers or widgets</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#application-and-language-filters-3" class="toc-h4 toc-link" data-title="Application and language filters">Application and language filters</a>
                                  </li>
                                  <li>
                                    <a href="#errors-for-getting-metadata-for-multiple-datasets-layers-or-widgets" class="toc-h4 toc-link" data-title="Errors for getting metadata for multiple datasets, layers or widgets">Errors for getting metadata for multiple datasets, layers or widgets</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-metadata" class="toc-h2 toc-link" data-title="Creating metadata">Creating metadata</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-creating-metadata" class="toc-h3 toc-link" data-title="Errors for creating metadata">Errors for creating metadata</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-metadata" class="toc-h2 toc-link" data-title="Updating metadata">Updating metadata</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-updating-metadata" class="toc-h3 toc-link" data-title="Errors for updating metadata">Errors for updating metadata</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#cloning-dataset-metadata" class="toc-h2 toc-link" data-title="Cloning dataset metadata">Cloning dataset metadata</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-cloning-metadata" class="toc-h3 toc-link" data-title="Errors for cloning metadata">Errors for cloning metadata</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-metadata" class="toc-h2 toc-link" data-title="Deleting metadata">Deleting metadata</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-deleting-metadata" class="toc-h3 toc-link" data-title="Errors for deleting metadata">Errors for deleting metadata</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#metadata-reference" class="toc-h2 toc-link" data-title="Metadata reference">Metadata reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#vocabularies-and-tags" class="toc-h1 toc-link" data-title="Vocabularies and tags">Vocabularies and tags</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-are-vocabularies-and-tags" class="toc-h2 toc-link" data-title="What are vocabularies and tags?">What are vocabularies and tags?</a>
                  </li>
                  <li>
                    <a href="#what-are-resources" class="toc-h2 toc-link" data-title="What are resources?">What are resources?</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#a-note-on-resources" class="toc-h3 toc-link" data-title="A note on resources">A note on resources</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#the-special-knowledge_graph-vocabulary" class="toc-h2 toc-link" data-title="The special knowledge_graph vocabulary">The special <code>knowledge_graph</code> vocabulary</a>
                  </li>
                  <li>
                    <a href="#associations-between-vocabularies-tags-and-resources" class="toc-h2 toc-link" data-title="Associations between vocabularies, tags and resources">Associations between vocabularies, tags and resources</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#vocabularies-and-resources" class="toc-h3 toc-link" data-title="Vocabularies and resources">Vocabularies and resources</a>
                          </li>
                          <li>
                            <a href="#vocabularies-and-tags-2" class="toc-h3 toc-link" data-title="Vocabularies and tags">Vocabularies and tags</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#endpoint-overview" class="toc-h2 toc-link" data-title="Endpoint overview">Endpoint overview</a>
                  </li>
                  <li>
                    <a href="#getting-vocabulary-tags-for-a-resource" class="toc-h2 toc-link" data-title="Getting vocabulary/tags for a resource">Getting vocabulary/tags for a resource</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#getting-all-vocabularies-and-tags-for-a-resource" class="toc-h3 toc-link" data-title="Getting all vocabularies and tags for a resource">Getting all vocabularies and tags for a resource</a>
                          </li>
                          <li>
                            <a href="#getting-a-single-vocabulary-and-its-tags-for-a-resource" class="toc-h3 toc-link" data-title="Getting a single vocabulary and its tags for a resource">Getting a single vocabulary and its tags for a resource</a>
                          </li>
                          <li>
                            <a href="#getting-vocabularies-and-tags-for-multiple-resources" class="toc-h3 toc-link" data-title="Getting vocabularies and tags for multiple resources">Getting vocabularies and tags for multiple resources</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-vocabularies-and-tags-for-multiple-resources" class="toc-h4 toc-link" data-title="Errors for getting vocabularies and tags for multiple resources">Errors for getting vocabularies and tags for multiple resources</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-vocabularies-tags-for-a-resource" class="toc-h2 toc-link" data-title="Creating vocabularies/tags for a resource">Creating vocabularies/tags for a resource</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#creating-a-single-vocabulary-tags-for-a-resource" class="toc-h3 toc-link" data-title="Creating a single vocabulary/tags for a resource">Creating a single vocabulary/tags for a resource</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-creating-a-single-vocabulary-tags-for-a-resource" class="toc-h4 toc-link" data-title="Errors for creating a single vocabulary/tags for a resource">Errors for creating a single vocabulary/tags for a resource</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#creating-multiple-vocabularies-tags-for-a-resource" class="toc-h3 toc-link" data-title="Creating multiple vocabularies/tags for a resource">Creating multiple vocabularies/tags for a resource</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-creating-a-single-vocabulary-tags-for-a-resource-2" class="toc-h4 toc-link" data-title="Errors for creating a single vocabulary/tags for a resource">Errors for creating a single vocabulary/tags for a resource</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-vocabularies-tags" class="toc-h2 toc-link" data-title="Updating vocabularies/tags">Updating vocabularies/tags</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#updating-a-single-vocabulary-tags-for-a-resource" class="toc-h3 toc-link" data-title="Updating a single vocabulary/tags for a resource">Updating a single vocabulary/tags for a resource</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-updating-a-single-vocabulary-tags-for-a-resource" class="toc-h4 toc-link" data-title="Errors for updating a single vocabulary/tags for a resource">Errors for updating a single vocabulary/tags for a resource</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#updating-multiple-vocabularies-tags-for-a-dataset" class="toc-h3 toc-link" data-title="Updating multiple vocabularies/tags for a dataset">Updating multiple vocabularies/tags for a dataset</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-updating-multiple-vocabularies-tags-for-a-dataset" class="toc-h4 toc-link" data-title="Errors for updating multiple vocabularies/tags for a dataset">Errors for updating multiple vocabularies/tags for a dataset</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#concatenating-tags-to-a-dataset-vocabulary" class="toc-h3 toc-link" data-title="Concatenating tags to a dataset vocabulary">Concatenating tags to a dataset vocabulary</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-concatenating-tags-to-a-dataset-vocabulary" class="toc-h4 toc-link" data-title="Errors for concatenating tags to a dataset vocabulary">Errors for concatenating tags to a dataset vocabulary</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#cloning-vocabularies-tags-for-a-dataset" class="toc-h2 toc-link" data-title="Cloning vocabularies/tags for a dataset">Cloning vocabularies/tags for a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-cloning-vocabularies-tags-for-a-dataset" class="toc-h3 toc-link" data-title="Errors for cloning vocabularies/tags for a dataset">Errors for cloning vocabularies/tags for a dataset</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-vocabularies-tags-for-a-resource" class="toc-h2 toc-link" data-title="Deleting vocabularies/tags for a resource">Deleting vocabularies/tags for a resource</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#deleting-a-single-vocabulary-tags-for-a-resource" class="toc-h3 toc-link" data-title="Deleting a single vocabulary/tags for a resource">Deleting a single vocabulary/tags for a resource</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-deleting-a-single-vocabulary-tags-for-a-resource" class="toc-h4 toc-link" data-title="Errors for deleting a single vocabulary/tags for a resource">Errors for deleting a single vocabulary/tags for a resource</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#deleting-all-vocabulary-tags-for-a-resource" class="toc-h3 toc-link" data-title="Deleting all vocabulary/tags for a resource">Deleting all vocabulary/tags for a resource</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-deleting-all-vocabularies-tags-for-a-resource" class="toc-h4 toc-link" data-title="Errors for deleting all vocabularies/tags for a resource">Errors for deleting all vocabularies/tags for a resource</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-vocabularies-and-tags-across-resources" class="toc-h2 toc-link" data-title="Getting vocabularies and tags across resources">Getting vocabularies and tags across resources</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#getting-all-vocabularies" class="toc-h3 toc-link" data-title="Getting all vocabularies">Getting all vocabularies</a>
                          </li>
                          <li>
                            <a href="#getting-a-single-vocabulary" class="toc-h3 toc-link" data-title="Getting a single vocabulary">Getting a single vocabulary</a>
                          </li>
                          <li>
                            <a href="#getting-tags-for-single-vocabulary" class="toc-h3 toc-link" data-title="Getting tags for single vocabulary">Getting tags for single vocabulary</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-resources-by-vocabulary-and-tag" class="toc-h2 toc-link" data-title="Getting resources by vocabulary and tag">Getting resources by vocabulary and tag</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-getting-resources-by-vocabulary-and-tag" class="toc-h3 toc-link" data-title="Errors for getting resources by vocabulary and tag">Errors for getting resources by vocabulary and tag</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#geostore" class="toc-h1 toc-link" data-title="Geostore">Geostore</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-geostore" class="toc-h2 toc-link" data-title="What is Geostore">What is Geostore</a>
                  </li>
                  <li>
                    <a href="#what-are-geostore-objects" class="toc-h2 toc-link" data-title="What are Geostore objects">What are Geostore objects</a>
                  </li>
                  <li>
                    <a href="#overview-of-available-endpoints" class="toc-h2 toc-link" data-title="Overview of available endpoints">Overview of available endpoints</a>
                  </li>
                  <li>
                    <a href="#create-a-geostore-object" class="toc-h2 toc-link" data-title="Create a geostore object">Create a geostore object</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#create-using-a-geojson" class="toc-h3 toc-link" data-title="Create using a GeoJSON">Create using a GeoJSON</a>
                          </li>
                          <li>
                            <a href="#create-using-a-provider-definition" class="toc-h3 toc-link" data-title="Create using a provider definition">Create using a provider definition</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-geostore-objects" class="toc-h2 toc-link" data-title="Getting geostore objects">Getting geostore objects</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#get-a-geostore-object-by-geostore-id" class="toc-h3 toc-link" data-title="Get a geostore object by Geostore id">Get a geostore object by Geostore id</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-geostore-objects-by-id" class="toc-h4 toc-link" data-title="Errors for getting geostore objects by id">Errors for getting geostore objects by id</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-geostore-by-geostore-id-and-view-at-geojson-io" class="toc-h3 toc-link" data-title="Get geostore by Geostore id and view at GeoJSON.io">Get geostore by Geostore id and view at GeoJSON.io</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-viewing-geostore-objects-by-id" class="toc-h4 toc-link" data-title="Errors for viewing geostore objects by id">Errors for viewing geostore objects by id</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-geostore-objects-by-geostore-ids" class="toc-h3 toc-link" data-title="Get geostore objects by Geostore ids">Get geostore objects by Geostore ids</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-multiple-geostore-objects-by-id" class="toc-h4 toc-link" data-title="Errors for getting multiple geostore objects by id">Errors for getting multiple geostore objects by id</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-all-geostore-ids-names-and-country-codes" class="toc-h3 toc-link" data-title="Get all Geostore ids, names and country codes">Get all Geostore ids, names and country codes</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-predefined-geostores-for-commonly-used-geometries" class="toc-h2 toc-link" data-title="Getting predefined geostores for commonly used geometries">Getting predefined geostores for commonly used geometries</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#get-geostore-by-country-code" class="toc-h3 toc-link" data-title="Get geostore by country code">Get geostore by country code</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-geostore-objects-by-country-code" class="toc-h4 toc-link" data-title="Errors for getting geostore objects by country code">Errors for getting geostore objects by country code</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-geostore-by-country-code-and-gadm-admin-1-id" class="toc-h3 toc-link" data-title="Get geostore by country code and GADM admin 1 id">Get geostore by country code and GADM admin 1 id</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-geostore-objects-by-country-code-and-gadm-admin-1-id" class="toc-h4 toc-link" data-title="Errors for getting geostore objects by country code and GADM admin 1 id">Errors for getting geostore objects by country code and GADM admin 1 id</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-geostore-by-country-code-gadm-admin-1-and-admin-2-ids" class="toc-h3 toc-link" data-title="Get geostore by country code, GADM admin 1 and admin 2 ids">Get geostore by country code, GADM admin 1 and admin 2 ids</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-geostore-objects-by-country-code-gadm-admin-1-id-and-admin-2-id" class="toc-h4 toc-link" data-title="Errors for getting geostore objects by country code, GADM admin 1 id and admin 2 id">Errors for getting geostore objects by country code, GADM admin 1 id and admin 2 id</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-geostore-by-world-database-on-protected-areas-id" class="toc-h3 toc-link" data-title="Get geostore by World Database on Protected Areas id">Get geostore by World Database on Protected Areas id</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-geostore-objects-by-wdpa-id" class="toc-h4 toc-link" data-title="Errors for getting geostore objects by WDPA id">Errors for getting geostore objects by WDPA id</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-geostore-by-land-use-type-keyword-and-id" class="toc-h3 toc-link" data-title="Get geostore by Land Use Type keyword and id">Get geostore by Land Use Type keyword and id</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#errors-for-getting-geostore-objects-by-land-use-type" class="toc-h4 toc-link" data-title="Errors for getting geostore objects by land use type">Errors for getting geostore objects by land use type</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#calculate-the-area-of-a-geostore-object" class="toc-h2 toc-link" data-title="Calculate the area of a geostore object">Calculate the area of a geostore object</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-calculating-the-area-of-a-geostore-object" class="toc-h3 toc-link" data-title="Errors for calculating the area of a geostore object">Errors for calculating the area of a geostore object</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#subscriptions" class="toc-h1 toc-link" data-title="Subscriptions">Subscriptions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-subscription" class="toc-h2 toc-link" data-title="What is a subscription?">What is a subscription?</a>
                  </li>
                  <li>
                    <a href="#subscription-lifecycle" class="toc-h2 toc-link" data-title="Subscription lifecycle">Subscription lifecycle</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#subscribable-datasets" class="toc-h3 toc-link" data-title="Subscribable datasets">Subscribable datasets</a>
                          </li>
                          <li>
                            <a href="#creating-and-confirming-the-subscription" class="toc-h3 toc-link" data-title="Creating and confirming the subscription">Creating and confirming the subscription</a>
                          </li>
                          <li>
                            <a href="#how-are-subscription-notifications-sent" class="toc-h3 toc-link" data-title="How are subscription notifications sent?">How are subscription notifications sent?</a>
                          </li>
                          <li>
                            <a href="#summary-of-the-subscription-lifecycle" class="toc-h3 toc-link" data-title="Summary of the subscription lifecycle">Summary of the subscription lifecycle</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-subscriptions-owned-by-the-request-user" class="toc-h2 toc-link" data-title="Getting subscriptions owned by the request user">Getting subscriptions owned by the request user</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-getting-subscriptions" class="toc-h3 toc-link" data-title="Errors for getting subscriptions">Errors for getting subscriptions</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-a-subscription-by-id" class="toc-h2 toc-link" data-title="Getting a subscription by id">Getting a subscription by id</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-getting-subscriptions-by-id" class="toc-h3 toc-link" data-title="Errors for getting subscriptions by id">Errors for getting subscriptions by id</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-a-subscription" class="toc-h2 toc-link" data-title="Creating a subscription">Creating a subscription</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-creating-subscriptions" class="toc-h3 toc-link" data-title="Errors for creating subscriptions">Errors for creating subscriptions</a>
                          </li>
                          <li>
                            <a href="#defining-the-datasets" class="toc-h3 toc-link" data-title="Defining the datasets">Defining the datasets</a>
                          </li>
                          <li>
                            <a href="#customizing-the-geographic-area-for-the-subscription" class="toc-h3 toc-link" data-title="Customizing the geographic area for the subscription">Customizing the geographic area for the subscription</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#subscribing-to-an-area-of-interest" class="toc-h4 toc-link" data-title="Subscribing to an area of interest">Subscribing to an area of interest</a>
                                  </li>
                                  <li>
                                    <a href="#subscribing-to-a-country-country-region-or-subregion" class="toc-h4 toc-link" data-title="Subscribing to a country, country region or subregion">Subscribing to a country, country region or subregion</a>
                                  </li>
                                  <li>
                                    <a href="#subscribing-to-a-protected-area-from-world-database-on-protected-areas" class="toc-h4 toc-link" data-title="Subscribing to a protected area from World Database on Protected Areas">Subscribing to a protected area from World Database on Protected Areas</a>
                                  </li>
                                  <li>
                                    <a href="#subscribing-to-a-rw-api-geostore" class="toc-h4 toc-link" data-title="Subscribing to a RW API geostore">Subscribing to a RW API geostore</a>
                                  </li>
                                  <li>
                                    <a href="#subscribing-to-a-gfw-data-api-geostore" class="toc-h4 toc-link" data-title="Subscribing to a GFW Data API geostore">Subscribing to a GFW Data API geostore</a>
                                  </li>
                                  <li>
                                    <a href="#subscribing-to-land-use-areas" class="toc-h4 toc-link" data-title="Subscribing to land use areas">Subscribing to land use areas</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-a-subscription" class="toc-h2 toc-link" data-title="Updating a subscription">Updating a subscription</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-updating-subscriptions" class="toc-h3 toc-link" data-title="Errors for updating subscriptions">Errors for updating subscriptions</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-subscriptions" class="toc-h2 toc-link" data-title="Deleting subscriptions">Deleting subscriptions</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-deleting-subscriptions" class="toc-h3 toc-link" data-title="Errors for deleting subscriptions">Errors for deleting subscriptions</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#confirming-a-subscription" class="toc-h2 toc-link" data-title="Confirming a subscription">Confirming a subscription</a>
                  </li>
                  <li>
                    <a href="#resending-the-subscription-confirmation-email" class="toc-h2 toc-link" data-title="Resending the subscription confirmation email">Resending the subscription confirmation email</a>
                  </li>
                  <li>
                    <a href="#unsubscribing" class="toc-h2 toc-link" data-title="Unsubscribing">Unsubscribing</a>
                  </li>
                  <li>
                    <a href="#subscription-statistics" class="toc-h2 toc-link" data-title="Subscription statistics">Subscription statistics</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#general-subscription-statistics" class="toc-h3 toc-link" data-title="General subscription statistics">General subscription statistics</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#filters-2" class="toc-h4 toc-link" data-title="Filters">Filters</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#grouped-subscription-statistics" class="toc-h3 toc-link" data-title="Grouped subscription statistics">Grouped subscription statistics</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#filters-3" class="toc-h4 toc-link" data-title="Filters">Filters</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#subscription-reference" class="toc-h2 toc-link" data-title="Subscription reference">Subscription reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#favorites" class="toc-h1 toc-link" data-title="Favorites">Favorites</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-favorite" class="toc-h2 toc-link" data-title="Create Favorite">Create Favorite</a>
                  </li>
                  <li>
                    <a href="#get-favorites" class="toc-h2 toc-link" data-title="Get favorites">Get favorites</a>
                  </li>
                  <li>
                    <a href="#get-favorite-by-id" class="toc-h2 toc-link" data-title="Get favorite by id">Get favorite by id</a>
                  </li>
                  <li>
                    <a href="#delete-favorite" class="toc-h2 toc-link" data-title="Delete favorite">Delete favorite</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#graph" class="toc-h1 toc-link" data-title="Graph">Graph</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-resource" class="toc-h2 toc-link" data-title="What is a resource">What is a resource</a>
                  </li>
                  <li>
                    <a href="#what-is-a-concept" class="toc-h2 toc-link" data-title="What is a concept">What is a concept</a>
                  </li>
                  <li>
                    <a href="#bird-39-s-eye-view-of-the-graph-service" class="toc-h2 toc-link" data-title="Bird's-eye view of the graph service">Bird's-eye view of the graph service</a>
                  </li>
                  <li>
                    <a href="#list-concepts" class="toc-h2 toc-link" data-title="List concepts">List concepts</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#list-concepts-for-a-dataset" class="toc-h2 toc-link" data-title="List concepts for a dataset">List concepts for a dataset</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-2" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#list-concepts-for-multiple-datasets" class="toc-h2 toc-link" data-title="List concepts for multiple datasets">List concepts for multiple datasets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-3" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-listing-concepts-for-multiple-datasets" class="toc-h3 toc-link" data-title="Errors for listing concepts for multiple datasets">Errors for listing concepts for multiple datasets</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#infer-concepts-from-other-concepts" class="toc-h2 toc-link" data-title="Infer concepts from other concepts">Infer concepts from other concepts</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-4" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-listing-concepts-for-multiple-datasets-2" class="toc-h3 toc-link" data-title="Errors for listing concepts for multiple datasets">Errors for listing concepts for multiple datasets</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#query-similar-datasets" class="toc-h2 toc-link" data-title="Query similar datasets">Query similar datasets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-5" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-querying-similar-datasets" class="toc-h3 toc-link" data-title="Errors for querying similar datasets">Errors for querying similar datasets</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#query-similar-datasets-including-descendants" class="toc-h2 toc-link" data-title="Query similar datasets including descendants">Query similar datasets including descendants</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-6" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-querying-similar-datasets-2" class="toc-h3 toc-link" data-title="Errors for querying similar datasets">Errors for querying similar datasets</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#search-datasets-by-concepts" class="toc-h2 toc-link" data-title="Search datasets by concepts">Search datasets by concepts</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-7" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-searching-datasets-by-concepts" class="toc-h3 toc-link" data-title="Errors for searching datasets by concepts">Errors for searching datasets by concepts</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#search-datasets-by-concepts-and-their-synonyms" class="toc-h2 toc-link" data-title="Search datasets by concepts and their synonyms">Search datasets by concepts and their synonyms</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-8" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-searching-datasets-by-concepts-and-their-synonyms" class="toc-h3 toc-link" data-title="Errors for searching datasets by concepts and their synonyms">Errors for searching datasets by concepts and their synonyms</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#most-liked-datasets" class="toc-h2 toc-link" data-title="Most liked datasets">Most liked datasets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-9" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#most-viewed-datasets" class="toc-h2 toc-link" data-title="Most viewed datasets">Most viewed datasets</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-10" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#most-viewed-datasets-by-user" class="toc-h2 toc-link" data-title="Most viewed datasets by user">Most viewed datasets by user</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters-11" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-getting-most-viewed-datasets-by-user" class="toc-h3 toc-link" data-title="Errors for getting most viewed datasets by user">Errors for getting most viewed datasets by user</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#increment-dataset-view-count" class="toc-h2 toc-link" data-title="Increment dataset view count">Increment dataset view count</a>
                  </li>
                  <li>
                    <a href="#creating-resources" class="toc-h2 toc-link" data-title="Creating resources">Creating resources</a>
                  </li>
                  <li>
                    <a href="#deleting-resources" class="toc-h2 toc-link" data-title="Deleting resources">Deleting resources</a>
                  </li>
                  <li>
                    <a href="#relationships-between-graph-nodes-and-concepts" class="toc-h2 toc-link" data-title="Relationships between graph nodes and concepts">Relationships between graph nodes and concepts</a>
                  </li>
                  <li>
                    <a href="#favorite-relationships-between-graph-nodes-and-users" class="toc-h2 toc-link" data-title="Favorite relationships between graph nodes and users">Favorite relationships between graph nodes and users</a>
                  </li>
                  <li>
                    <a href="#graph-concept-reference" class="toc-h2 toc-link" data-title="Graph concept reference">Graph concept reference</a>
                  </li>
                  <li>
                    <a href="#graph-relationship-reference" class="toc-h2 toc-link" data-title="Graph relationship reference">Graph relationship reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#areas" class="toc-h1 toc-link" data-title="Areas">Areas</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user-areas" class="toc-h2 toc-link" data-title="Get user areas">Get user areas</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#create-area" class="toc-h2 toc-link" data-title="Create area">Create area</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#parameters" class="toc-h3 toc-link" data-title="Parameters">Parameters</a>
                          </li>
                          <li>
                            <a href="#example" class="toc-h3 toc-link" data-title="Example">Example</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#delete-area" class="toc-h2 toc-link" data-title="Delete area">Delete area</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#example-2" class="toc-h3 toc-link" data-title="Example">Example</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#get-area" class="toc-h2 toc-link" data-title="Get area">Get area</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#example-3" class="toc-h3 toc-link" data-title="Example">Example</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#areas-v2" class="toc-h1 toc-link" data-title="Areas v2">Areas v2</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-the-difference-between-v1-and-v2" class="toc-h2 toc-link" data-title="What is the difference between v1 and v2?">What is the difference between v1 and v2?</a>
                  </li>
                  <li>
                    <a href="#interaction-between-areas-and-subscriptions" class="toc-h2 toc-link" data-title="Interaction between Areas and Subscriptions">Interaction between Areas and Subscriptions</a>
                  </li>
                  <li>
                    <a href="#getting-all-user-areas" class="toc-h2 toc-link" data-title="Getting all user areas">Getting all user areas</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                          <li>
                            <a href="#errors-for-getting-user-areas" class="toc-h3 toc-link" data-title="Errors for getting user areas">Errors for getting user areas</a>
                          </li>
                          <li>
                            <a href="#implementation-details" class="toc-h3 toc-link" data-title="Implementation details">Implementation details</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-all-areas" class="toc-h2 toc-link" data-title="Getting all areas">Getting all areas</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#pagination-2" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#filters-2" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#errors-for-getting-all-areas" class="toc-h3 toc-link" data-title="Errors for getting all areas">Errors for getting all areas</a>
                          </li>
                          <li>
                            <a href="#implementation-details-2" class="toc-h3 toc-link" data-title="Implementation details">Implementation details</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-an-area-by-its-id" class="toc-h2 toc-link" data-title="Getting an area by its id">Getting an area by its id</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-getting-an-area-by-its-id" class="toc-h3 toc-link" data-title="Errors for getting an area by its id">Errors for getting an area by its id</a>
                          </li>
                          <li>
                            <a href="#implementation-details-3" class="toc-h3 toc-link" data-title="Implementation details">Implementation details</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-an-area" class="toc-h2 toc-link" data-title="Creating an area">Creating an area</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-creating-an-area" class="toc-h3 toc-link" data-title="Errors for creating an area">Errors for creating an area</a>
                          </li>
                          <li>
                            <a href="#email-notifications" class="toc-h3 toc-link" data-title="Email notifications">Email notifications</a>
                          </li>
                          <li>
                            <a href="#implementation-details-4" class="toc-h3 toc-link" data-title="Implementation details">Implementation details</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#updating-an-area" class="toc-h2 toc-link" data-title="Updating an area">Updating an area</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-updating-an-area" class="toc-h3 toc-link" data-title="Errors for updating an area">Errors for updating an area</a>
                          </li>
                          <li>
                            <a href="#email-notifications-2" class="toc-h3 toc-link" data-title="Email notifications">Email notifications</a>
                          </li>
                          <li>
                            <a href="#implementation-details-5" class="toc-h3 toc-link" data-title="Implementation details">Implementation details</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#deleting-an-area" class="toc-h2 toc-link" data-title="Deleting an area">Deleting an area</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#errors-for-deleting-an-area" class="toc-h3 toc-link" data-title="Errors for deleting an area">Errors for deleting an area</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#update-areas-by-geostore" class="toc-h2 toc-link" data-title="Update areas by geostore">Update areas by geostore</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#email-notifications-3" class="toc-h3 toc-link" data-title="Email notifications">Email notifications</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#sync-areas" class="toc-h2 toc-link" data-title="Sync areas">Sync areas</a>
                  </li>
                  <li>
                    <a href="#area-reference" class="toc-h2 toc-link" data-title="Area reference">Area reference</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webshot" class="toc-h1 toc-link" data-title="Webshot">Webshot</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pdf" class="toc-h2 toc-link" data-title="PDF">PDF</a>
                  </li>
                  <li>
                    <a href="#widget" class="toc-h2 toc-link" data-title="Widget">Widget</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#topic" class="toc-h1 toc-link" data-title="Topic">Topic</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-topic" class="toc-h2 toc-link" data-title="What is a Topic?">What is a Topic?</a>
                  </li>
                  <li>
                    <a href="#getting-all-topics" class="toc-h2 toc-link" data-title="Getting all topics">Getting all topics</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                          <li>
                            <a href="#include-related-entities" class="toc-h3 toc-link" data-title="Include related entities">Include related entities</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#user" class="toc-h4 toc-link" data-title="User">User</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#creating-a-topic" class="toc-h2 toc-link" data-title="Creating a topic">Creating a topic</a>
                  </li>
                  <li>
                    <a href="#editing-a-topic" class="toc-h2 toc-link" data-title="Editing a topic">Editing a topic</a>
                  </li>
                  <li>
                    <a href="#clone-a-topic" class="toc-h2 toc-link" data-title="Clone a topic">Clone a topic</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#dashboard" class="toc-h1 toc-link" data-title="Dashboard">Dashboard</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-dashboard" class="toc-h2 toc-link" data-title="What is a dashboard">What is a dashboard</a>
                  </li>
                  <li>
                    <a href="#getting-all-dashboards" class="toc-h2 toc-link" data-title="Getting all dashboards">Getting all dashboards</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#filters" class="toc-h3 toc-link" data-title="Filters">Filters</a>
                          </li>
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#sorting" class="toc-h3 toc-link" data-title="Sorting">Sorting</a>
                          </li>
                          <li>
                            <a href="#include-related-entities" class="toc-h3 toc-link" data-title="Include related entities">Include related entities</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#user" class="toc-h4 toc-link" data-title="User">User</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#getting-a-dashboard-by-its-id" class="toc-h2 toc-link" data-title="Getting a dashboard by its ID">Getting a dashboard by its ID</a>
                  </li>
                  <li>
                    <a href="#creating-a-dashboard" class="toc-h2 toc-link" data-title="Creating a dashboard">Creating a dashboard</a>
                  </li>
                  <li>
                    <a href="#editing-a-dashboard" class="toc-h2 toc-link" data-title="Editing a dashboard">Editing a dashboard</a>
                  </li>
                  <li>
                    <a href="#delete-dashboard" class="toc-h2 toc-link" data-title="Delete dashboard">Delete dashboard</a>
                  </li>
                  <li>
                    <a href="#clone-dashboard" class="toc-h2 toc-link" data-title="Clone dashboard">Clone dashboard</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#static-pages" class="toc-h1 toc-link" data-title="Static pages">Static pages</a>
          </li>
          <li>
            <a href="#tasks" class="toc-h1 toc-link" data-title="Tasks">Tasks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-task" class="toc-h2 toc-link" data-title="What is a task?">What is a task?</a>
                  </li>
                  <li>
                    <a href="#get-all-tasks" class="toc-h2 toc-link" data-title="Get all tasks">Get all tasks</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#pagination" class="toc-h3 toc-link" data-title="Pagination">Pagination</a>
                          </li>
                          <li>
                            <a href="#filter-params" class="toc-h3 toc-link" data-title="Filter params">Filter params</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#get-a-single-task" class="toc-h2 toc-link" data-title="Get a single task">Get a single task</a>
                  </li>
                  <li>
                    <a href="#delete-a-task" class="toc-h2 toc-link" data-title="Delete a task">Delete a task</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#user-management" class="toc-h1 toc-link" data-title="User management">User management</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#general-notes-on-rw-api-users" class="toc-h2 toc-link" data-title="General notes on RW API users">General notes on RW API users</a>
                  </li>
                  <li>
                    <a href="#user-management-and-applications" class="toc-h2 toc-link" data-title="User management and applications">User management and applications</a>
                  </li>
                  <li>
                    <a href="#login-email-password" class="toc-h2 toc-link" data-title="Login (email + password)">Login (email + password)</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/</code>">GET <code>&lt;BASE API URL&gt;/auth/</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-login" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/login</code>">GET <code>&lt;BASE API URL&gt;/auth/login</code></a>
                          </li>
                          <li>
                            <a href="#post-lt-base-api-url-gt-auth-login" class="toc-h3 toc-link" data-title="POST <code>&lt;BASE API URL&gt;/auth/login</code>">POST <code>&lt;BASE API URL&gt;/auth/login</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-fail" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/fail</code>">GET <code>&lt;BASE API URL&gt;/auth/fail</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-check-logged" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/check-logged</code>">GET <code>&lt;BASE API URL&gt;/auth/check-logged</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-success" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/success</code>">GET <code>&lt;BASE API URL&gt;/auth/success</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-logout" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/logout</code>">GET <code>&lt;BASE API URL&gt;/auth/logout</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-generate-token" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/generate-token</code>">GET <code>&lt;BASE API URL&gt;/auth/generate-token</code></a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#login-3rd-party-oauth" class="toc-h2 toc-link" data-title="Login (3rd party oauth)">Login (3rd party oauth)</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#3rd-party-authentication-using-twitter" class="toc-h3 toc-link" data-title="3rd party authentication using Twitter">3rd party authentication using Twitter</a>
                          </li>
                          <li>
                            <a href="#3rd-party-authentication-using-google" class="toc-h3 toc-link" data-title="3rd party authentication using Google">3rd party authentication using Google</a>
                          </li>
                          <li>
                            <a href="#3rd-party-authentication-using-facebook" class="toc-h3 toc-link" data-title="3rd party authentication using Facebook">3rd party authentication using Facebook</a>
                          </li>
                          <li>
                            <a href="#3rd-party-authentication-using-apple" class="toc-h3 toc-link" data-title="3rd party authentication using Apple">3rd party authentication using Apple</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#registration" class="toc-h2 toc-link" data-title="Registration">Registration</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#view-the-registration-page" class="toc-h3 toc-link" data-title="View the registration page">View the registration page</a>
                          </li>
                          <li>
                            <a href="#register-a-new-user-account" class="toc-h3 toc-link" data-title="Register a new user account">Register a new user account</a>
                          </li>
                          <li>
                            <a href="#confirm-user-account" class="toc-h3 toc-link" data-title="Confirm user account">Confirm user account</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#password-recovery" class="toc-h2 toc-link" data-title="Password recovery">Password recovery</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-reset-password" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/reset-password</code>">GET <code>&lt;BASE API URL&gt;/auth/reset-password</code></a>
                          </li>
                          <li>
                            <a href="#post-lt-base-api-url-gt-auth-reset-password" class="toc-h3 toc-link" data-title="POST <code>&lt;BASE API URL&gt;/auth/reset-password</code>">POST <code>&lt;BASE API URL&gt;/auth/reset-password</code></a>
                          </li>
                          <li>
                            <a href="#get-lt-base-api-url-gt-auth-reset-password-token" class="toc-h3 toc-link" data-title="GET <code>&lt;BASE API URL&gt;/auth/reset-password/:token</code>">GET <code>&lt;BASE API URL&gt;/auth/reset-password/:token</code></a>
                          </li>
                          <li>
                            <a href="#post-lt-base-api-url-gt-auth-reset-password-token" class="toc-h3 toc-link" data-title="POST <code>&lt;BASE API URL&gt;/auth/reset-password/:token</code>">POST <code>&lt;BASE API URL&gt;/auth/reset-password/:token</code></a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#user-details-management" class="toc-h2 toc-link" data-title="User details management">User details management</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#getting-all-users" class="toc-h3 toc-link" data-title="Getting all users">Getting all users</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#pagination" class="toc-h4 toc-link" data-title="Pagination">Pagination</a>
                                  </li>
                                  <li>
                                    <a href="#filters" class="toc-h4 toc-link" data-title="Filters">Filters</a>
                                  </li>
                              </ul>
                          </li>
                          <li>
                            <a href="#get-the-current-user" class="toc-h3 toc-link" data-title="Get the current user">Get the current user</a>
                          </li>
                          <li>
                            <a href="#get-a-user-by-id" class="toc-h3 toc-link" data-title="Get a user by id">Get a user by id</a>
                          </li>
                          <li>
                            <a href="#update-your-user-account-details" class="toc-h3 toc-link" data-title="Update your user account details">Update your user account details</a>
                          </li>
                          <li>
                            <a href="#update-another-user-39-s-account-details" class="toc-h3 toc-link" data-title="Update another user's account details">Update another user's account details</a>
                          </li>
                          <li>
                            <a href="#deleting-a-user" class="toc-h3 toc-link" data-title="Deleting a user">Deleting a user</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#microservices" class="toc-h1 toc-link" data-title="Microservices">Microservices</a>
          </li>
          <li>
            <a href="#troubleshooting" class="toc-h1 toc-link" data-title="Troubleshooting">Troubleshooting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication-and-authorization" class="toc-h2 toc-link" data-title="Authentication and authorization">Authentication and authorization</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#401-unauthorized" class="toc-h3 toc-link" data-title="401 Unauthorized">401 Unauthorized</a>
                          </li>
                          <li>
                            <a href="#403-forbidden" class="toc-h3 toc-link" data-title="403 Forbidden">403 Forbidden</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#contact" class="toc-h1 toc-link" data-title="Contact">Contact</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#contact-us" class="toc-h2 toc-link" data-title="Contact us">Contact us</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#example" class="toc-h3 toc-link" data-title="Example">Example</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='quickstart.html'>Getting started</a></li>
            <li><a href='https://github.com/resource-watch/doc-api'>Contribute to these docs</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <aside class="notice">
  All use of the Resource Watch API is governed by the Resource Watch <a href="https://resourcewatch.org/terms-of-service" target="_blank">Terms of Service</a> and <a href="https://resourcewatch.org/api-attribution-requirements" target="_blank">API Attribution Requirements</a>.
</aside>
<h1 id='resource-watch-api-reference'>Resource Watch API Reference</h1>
<p>This section of the documentation contains technical reference information for each of the endpoints exposed by the RW API.</p>
<p><a href="./">Back to the documentation homepage</a></p>
<h1 id='authentication'>Authentication</h1>
<p>Most RW API endpoints are public, but some actions require user authentication. Each endpoint&#39;s documentation will specify whether authentication is required and under whate conditions.</p>

<p>The RW API uses JSON Web Tokens to authenticate requests. Check out the <a href="quickstart.html">Quickstart Guide</a> for instructions on how to create an account and generate a token.</p>

<p>Authentication is performed using bearer auth. For all authenticated requests, you must provide your JWT using the header <code>Authorization: Bearer &lt;your token&gt;</code>.</p>

<p>If you lose your JWT, or if it becomes invalidated (which happens whenever the name, email, or applications associated with your account changes), you can always log in via the browser and generate a new token at <a href="https://api.resourcewatch.org/auth/generate-token">https://api.resourcewatch.org/auth/generate-token</a>.</p>
<h1 id='dataset'>Dataset</h1><h2 id='what-is-a-dataset'>What is a dataset?</h2>
<p>If you are new to the RW API, or want to learn more about the concept of a dataset, we strongly encourage you to read the <a href="concepts.html#dataset">dataset concept</a> documentation first. It gives you a brief and clear description of what a dataset is, and what it can do for you.</p>

<p>Once you&#39;ve read that section, you can come back here to learn more details about using the RW API&#39;s datasets feature. The RW API is home to many datasets uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you. These datasets contain a lot of information about a wide range of topics that you may want to learn about or build on top of. To find out more about finding and accessing the datasets already available on the RW API, check out the documentation on <a href="reference.html#getting-all-datasets">getting datasets</a>. A nice, visual way to explore existing datasets is by using the <a href="https://resourcewatch.org/">Resource Watch</a> website. </p>

<p>You can also <a href="reference.html#creating-a-dataset">create you own datasets</a> on the RW API, if you&#39;d like to share your data with the world, or 
 if you are looking to use the RW API and its features to gain insights into your data.</p>
<h2 id='getting-all-datasets'>Getting all datasets</h2>
<p>This endpoint will allow you to get the list of the datasets available in the API, and it&#39;s a great place for new users to start exploring the RW API. By default, this endpoint will give you a paginated list of 10 datasets. In the sections below, we&#39;ll explore how you can customize this endpoint call to match your needs. </p>

<p>For a detailed description of each field, check out the <a href="reference.html#dataset-reference">Dataset reference</a> section.</p>

<blockquote>
<p>Getting a list of datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00f2be42-1ee8-4069-a55a-16a988f2b7a0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glad points"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glad-points-1490086842129"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"data4sdgs"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributesPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"connectorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"connectorUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers.csv"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"overwrite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"geoInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="nl">"clonedHost"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"errorMessage"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"widgetRelevantProps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"layerRelevantProps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=99&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=2&amp;page[size]=10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">990</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre></div>
<p>The Dataset service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your datasets list.</p>
<h3 id='search'>Search</h3>
<blockquote>
<p>Search for datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?search<span class="o">=</span>wind
</code></pre></div>
<p>The dataset service offers a simple yet powerful search mechanism that will help you look for datasets. The query argument <code>search</code> allows you to specify a search string that will match:</p>

<ul>
<li>The dataset name.</li>
<li>The dataset&#39;s metadata name.</li>
<li>The dataset&#39;s metadata description.</li>
<li>The <a href="reference.html#graph">relational graph</a> node list.</li>
</ul>
<h3 id='filters'>Filters</h3>
<blockquote>
<p>Filtering datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?name<span class="o">=</span>birds&amp;provider<span class="o">=</span>cartodb
</code></pre></div>
<blockquote>
<p>Matching vocabulary tags</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?vocabulary[legacy]<span class="o">=</span>umd
</code></pre></div>
<p>The dataset list provides a wide range of parameters that you can use to tailor your dataset listing. Most of these parameters reflect fields you&#39;ll find in a dataset itself (which you can learn more about in the <a href="reference.html#dataset-reference">Dataset reference</a> section), while others are convenience filters for things like user role or favourites.</p>

<p>Filtering datasets adheres to the conventions defined in the <a href="concepts.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to these conventions, you can use the following fields as filters supported by the dataset list endpoint:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Expected values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Filter returned datasets by the name of the dataset.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>slug</td>
<td>Filter returned datasets by the slug of the dataset.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>type</td>
<td>Filter returned datasets by dataset type.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>subtitle</td>
<td>Filter returned datasets by dataset subtitle.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>application</td>
<td>Applications associated to this dataset. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>If the dataset has <code>applicationConfig</code> data (i.e. contains a non-empty object in the <code>applicationConfig</code> field)</td>
<td>Boolean</td>
<td><code>true</code> or <code>false</code></td>
</tr>
<tr>
<td>dataPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>attributesPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>connectorType</td>
<td>Filter returned datasets by the type of connector used.</td>
<td>String</td>
<td><code>rest</code>, <code>document</code> or <code>wms</code></td>
</tr>
<tr>
<td>provider</td>
<td>Dataset provider this include inner connectors and 3rd party ones</td>
<td>String</td>
<td><a href="reference.html#creating-a-dataset">Check the available providers when creating a dataset</a></td>
</tr>
<tr>
<td>connectorUrl</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>sources</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>tableName</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>userId</td>
<td>Filter results by the owner of the dataset. Does not support regexes.</td>
<td>String</td>
<td>valid user id</td>
</tr>
<tr>
<td>status</td>
<td>Filter results by the current status of the dataset.</td>
<td>String</td>
<td><code>pending</code>, <code>saved</code> or <code>failed</code></td>
</tr>
<tr>
<td>overwrite</td>
<td>If the data can be overwritten (only for being able to make dataset updates)</td>
<td>Boolean</td>
<td><code>true</code>or <code>false</code></td>
</tr>
<tr>
<td>errorMessage</td>
<td>If this dataset is in <code>error</code> state, this field may contain additional details about the error.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>mainDateField</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the dataset is published or not.</td>
<td>Boolean</td>
<td><code>true</code>or <code>false</code></td>
</tr>
<tr>
<td>env</td>
<td>Environment to which the dataset belongs. Multiple values can be combined using <code>,</code> as a separator. Does not support regexes. Read more about this field in the <a href="concepts.html#environments">Environments concept section</a>.</td>
<td>String</td>
<td>any valid text. Defaults to <code>production</code>.</td>
</tr>
<tr>
<td>geoInfo</td>
<td>If it contains interceptable geographical info</td>
<td>Boolean</td>
<td><code>true</code>or <code>false</code></td>
</tr>
<tr>
<td>protected</td>
<td>If the dataset is protected.</td>
<td>Boolean</td>
<td><code>true</code>or <code>false</code></td>
</tr>
<tr>
<td>taskId</td>
<td>Id of the latest task associated with this dataset. Typically only present in <code>document</code> connectorType datasets</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.lat</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.long</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.date</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.region</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.country</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.nested</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.integer</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.short</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.byte</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.double</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.byte</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.half_float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.scaled_float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.boolean</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.binary</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.text</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.keyword</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostProvider</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostUrl</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostId</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostType</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>widgetRelevantProps</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>layerRelevantProps</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>subscribable</td>
<td>If the dataset is subscribable (i.e. contains a non-empty object in the <code>subscribable</code> field)</td>
<td>Boolean</td>
<td><code>true</code> or <code>false</code></td>
</tr>
<tr>
<td>user.role</td>
<td>Filter results by the role of the owner of the dataset. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td>String</td>
<td><code>ADMIN</code>, <code>MANAGER</code> or <code>USER</code></td>
</tr>
<tr>
<td>vocabulary[name]</td>
<td>Filter returned datasets by vocabulary tags. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>collection</td>
<td>Filter returned datasets collection id. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>favourite</td>
<td>Filter by favourited datasets. See <a href="reference.html#favorites">this section</a> for more info. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
</tbody></table>
<h3 id='sorting'>Sorting</h3><h4 id='basics-of-sorting'>Basics of sorting</h4>
<blockquote>
<p>Sorting datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name
</code></pre></div>
<blockquote>
<p>Sorting datasets by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name,description
</code></pre></div>
<blockquote>
<p>Sort by name descending, description ascending</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span><span class="nt">-name</span>,+description
</code></pre></div>
<blockquote>
<p>Sorting datasets by the role of the user who owns the dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>user.role
</code></pre></div>
<p>The Dataset service currently supports sorting using the <code>sort</code> query parameter. Sorting dataset adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="reference.html#dataset-reference">Dataset reference</a> section for a detailed description of the fields you can use when sorting. In addition to all dataset model fields, you can sort the returned results by the name (using <code>user.name</code>) or role (using <code>user.role</code>) of the user owner of the dataset. Keep in mind that sorting by user data is restricted to ADMIN users.</p>
<h4 id='special-sorting-criteria'>Special sorting criteria</h4>
<blockquote>
<p>Sorting datasets with special criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span><span class="nt">-most-favorited</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>relevance&amp;status<span class="o">=</span>saved&amp;search<span class="o">=</span>agriculture
</code></pre></div>
<p>Special search criteria must be used as sole sorting criteria, as it&#39;s not possible to combine any of them with any other search criteria. The following criteria can be used for special sorting in datasets:</p>

<ul>
<li><code>most-viewed</code> delegates sorting to the graph component, sorting by the datasets that have been queried more frequently. Supports ascending/descending order.</li>
<li><code>most-favorited</code>: delegates sorting to the graph component, sorting by the datasets that have been more favorited. Supports ascending/descending order.</li>
<li><code>relevance</code>: delegates sorting to the metadata component, sorting by the datasets which metadata better match the search criteria. Can only be used in conjunction with a <code>search</code> parameter. Does not support ascending order.</li>
</ul>

<p>You can specify the sorting order by prepending the criteria with either <code>-</code> for descending order or <code>+</code> for ascending order. By default, ascending order is assumed.</p>
<h3 id='include-entities-associated-with-the-datasets'>Include entities associated with the datasets</h3>
<blockquote>
<p>Loads metadata and widgets associated with each dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?includes<span class="o">=</span>metadata,widget
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Historical Precipitation -- U.S. (Puget Sound Lowlands)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Historical-Precipitation-US-Puget-Sound-Lowlands-1490086842133"</span><span class="p">,</span><span class="w">
                </span><span class="err">...</span><span class="w">
                </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">  

                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a2251d5cd6980a00e054d9"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"widget"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">  
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=223&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">2228</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Loading layers for the given dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET http://api.resourcewatch.org/dataset?includes<span class="o">=</span>layer
</code></pre></div>
<blockquote>
<p>Loading the information about the user who authored the dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset?includes<span class="o">=</span>user
</code></pre></div>
<p>When fetching datasets, you can request additional entities to be loaded. The following entities are available:</p>

<ul>
<li><code>widget</code> - loads all widgets associated with each dataset.</li>
<li><code>layer</code> - loads all layers associated with each dataset.</li>
<li><code>vocabulary</code> - loads all vocabulary entities associated with each dataset.</li>
<li><code>metadata</code> - loads all metadata associated with each dataset.</li>
<li><code>user</code> - loads the name, email address and role of the author of the dataset. If you do not issue this request as an <code>ADMIN</code> user, or if no user data is available, the <code>user</code> object will be empty.</li>
</ul>

<p><strong>Note:</strong> If you include related entities (e.g. layers) with query filters, the filters will not cascade to the related entities.</p>
<h2 id='getting-a-dataset-by-id-or-slug'>Getting a dataset by id or slug</h2>
<blockquote>
<p>Getting a dataset by id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/51943691-eebc-4cb4-bdfb-057ad4fc2145"</span>
</code></pre></div>
<blockquote>
<p>Getting a dataset by slug:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/Timber-Production-RDC"</span>
</code></pre></div>
<blockquote>
<p>Response (equal for both cases):</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"data"</span>: <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"51943691-eebc-4cb4-bdfb-057ad4fc2145"</span>,
        <span class="s2">"type"</span>: <span class="s2">"dataset"</span>,
        <span class="s2">"attributes"</span>: <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"Timber Production RDC"</span>,
            <span class="s2">"slug"</span>: <span class="s2">"Timber-Production-RDC"</span>,
            <span class="s2">"type"</span>: null,
            <span class="s2">"subtitle"</span>: null,
            <span class="s2">"application"</span>: <span class="o">[</span><span class="s2">"forest-atlas"</span><span class="o">]</span>,
            <span class="s2">"dataPath"</span>: null,
            <span class="s2">"attributesPath"</span>: null,
            <span class="s2">"connectorType"</span>: <span class="s2">"document"</span>,
            <span class="s2">"provider"</span>: <span class="s2">"csv"</span>,
            <span class="s2">"userId"</span>: <span class="s2">"58750a56dfc643722bdd02ab"</span>,
            <span class="s2">"connectorUrl"</span>: <span class="s2">"http://wri-forest-atlas.s3.amazonaws.com/COD/temp/annual%20timber%20production%20DRC%20%28test%29%20-%20Sheet1.csv"</span>,
            <span class="s2">"sources"</span>: <span class="o">[]</span>,
            <span class="s2">"tableName"</span>: <span class="s2">"index_51943691eebc4cb4bdfb057ad4fc2145"</span>,
            <span class="s2">"status"</span>: <span class="s2">"saved"</span>,
            <span class="s2">"overwrite"</span>: <span class="nb">false</span>,
            <span class="s2">"legend"</span>: <span class="o">{</span>
                <span class="s2">"date"</span>: <span class="o">[</span><span class="s2">"year"</span><span class="o">]</span>,
                <span class="s2">"region"</span>: <span class="o">[]</span>,
                <span class="s2">"country"</span>: <span class="o">[]</span>,
                <span class="s2">"long"</span>: <span class="s2">""</span>,
                <span class="s2">"lat"</span>: <span class="s2">""</span>
            <span class="o">}</span>,
            <span class="s2">"clonedHost"</span>: <span class="o">{}</span>,
            <span class="s2">"errorMessage"</span>: null,
            <span class="s2">"createdAt"</span>: <span class="s2">"2017-01-25T21:48:27.535Z"</span>,
            <span class="s2">"updatedAt"</span>: <span class="s2">"2017-01-25T21:48:28.675Z"</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>If you know the id or the <code>slug</code> of a dataset, then you can access it directly. Both id and <code>slug</code> are case-sensitive.</p>

<p>Using this endpoint, you can also <a href="reference.html/#include-entities-associated-with-the-datasets">include entities associated with the dataset</a>, in the same way you do when loading multiple datasets. </p>

<blockquote>
<p>Getting a dataset by its including its relationships:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959?includes<span class="o">=</span>metadata,vocabulary,widget,layer
</code></pre></div><h2 id='getting-multiple-datasets-by-ids'>Getting multiple datasets by ids</h2>
<p>This endpoint allows you to load multiple datasets by id in a single request.</p>
<h4 id='errors-for-getting-multiple-datasets-by-ids'>Errors for getting multiple datasets by ids</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>ids: ids can not be empty.</td>
<td>The required <code>ids</code> field is missing in the request body.</td>
</tr>
</tbody></table>

<blockquote>
<p>Getting multiple datasets by their ids:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "ids": [
        "0706f039-b929-453e-b154-7392123ae99e",
        "0c630feb-8146-4fcc-a9be-be5adcb731c8",
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0706f039-b929-453e-b154-7392123ae99e"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Social Vulnerability Index (2006-2010) -- U.S. (New Hampshire)"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Social-Vulnerability-Index-2006-2010-US-New-Hampshire-1490086842541"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tabular"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c630feb-8146-4fcc-a9be-be5adcb731c8"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USGS Land Cover - Impervious Surface (2001) -- U.S. (Alaska)"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USGS-Land-Cover-Impervious-Surface-2001-US-Alaska-1490086842439"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='creating-a-dataset'>Creating a dataset</h2>
<p>So you are ready to create your first dataset on the RW API? Great, welcome aboard! These instruction will help you create your dataset on the RW API, so you can start sharing your data with the world and taking full advantage of all the RW API features on your projects.</p>

<p>Before creating a dataset, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a dataset, you need to be <a href="reference.html#authentication">authenticated</a>.</li>
<li>Depending on your user account&#39;s role, you may have permission to create a dataset but not delete it afterwards - read more about this in <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>All data uploaded to the RW API will be publicly visible and available to other users. </li>
</ul>

<p>The first thing to consider when creating a dataset is where your data currently is - this will determine the <a href="concepts.html#dataset-providers">Dataset provider</a> you will need to use and, with it, a set of things you need to take into account - we&#39;ll cover each provider in detail shortly. When building your request to the RW API to create your dataset, you will need to take into account both the general details that follow, plus the details for the <code>provider</code> you are using. Be sure to review both sections when creating your datasets, to avoid any pitfalls.</p>

<p>Creating a dataset is done using a POST request and passing the relevant data as body files. The supported body fields are as defined on the <a href="reference.html#dataset-reference">dataset reference</a> section, but the minimum field list you must specify for all datasets is:</p>

<ul>
<li>name</li>
<li>application</li>
<li>connectorType</li>
<li>provider </li>
</ul>

<p>Additionally, depending on the data provider you will be using, other fields may be required - we&#39;ll cover those in detail in each provider&#39;s specific documentation.</p>

<p>A successful dataset creation request will return a 200 HTTP code, and the dataset details as stored on the RW API. PAy special attention to the <code>id</code> or the <code>slug</code>, as those will allow you to <a href="reference.html#getting-a-dataset-by-id-or-slug">access your dataset</a> later.</p>

<p><strong>There&#39;s one aspect of the dataset creation process that you need to keep in mind: it is an asynchronous process.</strong> This means that a successful call to the create dataset endpoint will <em>start</em> the process, but the dataset may not be immediately available to be used. The <code>status</code> field will tell you if the dataset creation process is in progress (status set to <code>pending</code>), if something went wrong (<code>failed</code>, in which case the <code>errorMessage</code> field will have a short description of what went wrong) or if the dataset is available to be used (when status is <code>saved</code>). The amount of time it takes for a newly created dataset to go from <code>pending</code> to <code>saved</code> depends on the provider and amount of data. Just keep in mind that you need to wait for the status to be set to <code>saved</code> before starting to use your datasets. You should <a href="reference.html#getting-a-dataset-by-id-or-slug">check your dataset</a> manually to see when the <code>status</code> is updated.</p>
<h4 id='errors-for-creating-a-dataset'>Errors for creating a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: <code>&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: empty or invalid <code>&lt;field&gt;</code></td>
<td>The provided value for <code>&lt;field&gt;</code> is invalid. This is usually happens if an invalid value type is provided, but certain fields use more advanced validation rules, that may produce this error message if validation fails (ie: on a carto dataset, the <code>connectorUrl</code> must contain a valid carto URL).</td>
</tr>
<tr>
<td>400</td>
<td>provider: must be valid <list of valid providers></td>
<td>Your <code>provider</code> value is invalid. The <code>&lt;list of valid providers&gt;</code> will contain the list of providers that are supported for the <code>connectorType</code> you specified.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated. If creating a BigQuery dataset, you may also see this message even if you are authenticated. Refer to the <a href="concepts.html#bigquery">BigQuery documentation</a> for more details.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - User does not have access to this dataset&#39;s application</td>
<td>You are trying to create a dataset with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
</tbody></table>
<h3 id='carto-datasets'>Carto datasets</h3>
<blockquote>
<p>Example of creating a dataset based on CartoDB data with the minimum fields required</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "name":"World Database on Protected Areas -- Global",
    "connectorType":"rest",
    "provider":"cartodb",
    "connectorUrl":"https://wri-01.carto.com/tables/wdpa_protected_areas/table",
    "application":[
      "gfw", 
      "forest-atlas"
    ]
  }
}'</span>
</code></pre></div>
<p>To create a dataset connected to a Carto data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code>connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code>rest</code>.</td>
<td style="text-align: right"><code>rest</code></td>
</tr>
<tr>
<td><code>provider</code></td>
<td style="text-align: center">The provider should be set to <code>cartodb</code>.</td>
<td style="text-align: right"><code>cartodb</code></td>
</tr>
<tr>
<td><code>connectorUrl</code></td>
<td style="text-align: center">The URL for the CartoDB table that this dataset will be using.</td>
<td style="text-align: right"><code>https://wri-01.carto.com/tables/wdpa_protected_areas/table</code></td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the Carto account specified on the <code>connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The Carto URL provided will be publicly visible to all RW API users.</li>
<li>The Carto account will see increased traffic.</li>
<li>Any changes made to the data hosted on Carto will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your Carto table, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>The <code>tableName</code> value of a carto-based dataset will automatically be filled with the name of the carto table corresponding to the dataset.</p>

<p>When creating a Carto based-dataset, the RW API will try to validate the <code>connectorUrl</code> by trying to connect to the corresponding Carto table - the result of this will determine if the dataset&#39;s status will be set to <code>saved</code> or <code>error</code>.</p>
<h3 id='arcgis-feature-layer'>ArcGIS feature layer</h3>
<blockquote>
<p>Example of creating a dataset based on ArcGIS feature layer data with the minimum fields required</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"rest",
    "provider":"featureservice",
    "connectorUrl":"https://services.arcgis.com/uDTUpUPbk8X8mXwl/arcgis/rest/services/Public_Schools_in_Onondaga_County/FeatureServer/0?f=json",
    "application":[
     "prep"
    ],
    "name":"Uncontrolled Public-Use Airports -- U.S."
  }
}'</span>
</code></pre></div>
<p>To create a dataset using ArcGIS feature layer as data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code>connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code>rest</code>.</td>
<td style="text-align: right"><code>rest</code></td>
</tr>
<tr>
<td><code>provider</code></td>
<td style="text-align: center">The provider should be set to <code>featureservice</code>.</td>
<td style="text-align: right"><code>featureservice</code></td>
</tr>
<tr>
<td><code>connectorUrl</code></td>
<td style="text-align: center">The URL for the JSON data in ArcGIS services this dataset will be using.</td>
<td style="text-align: right">https://services.arcgis.com/uuid/arcgis/rest/services/example/FeatureServer/0?f=json</td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the ArcGIS feature layer server specified on the <code>connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The ArcGIS feature layer URL provided will be publicly visible to all RW API users.</li>
<li>The ArcGIS feature layer server will see increased traffic.</li>
<li>Any changes made to the data hosted on ArcGIS feature layer will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your ArcGIS feature layer dataset, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>The <code>tableName</code> value of a ArcGIS-based dataset will automatically be filled with the name of the ArcGIS feature layer table corresponding to the dataset.</p>

<p>When creating a ArcGIS-based dataset, the RW API will try to validate the <code>connectorUrl</code> by trying to connect to the corresponding ArcGIS Feature Layer - the result of this will determine if the dataset&#39;s status will be set to <code>saved</code> or <code>error</code>.</p>
<h3 id='google-earth-engine'>Google Earth Engine</h3>
<blockquote>
<p>Example of creating a dataset based on Google Earth Engine data with the minimum fields required</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"rest",
    "provider":"gee",
    "tableName": "JRC/GSW1_0/GlobalSurfaceWater"
    "application":[
     "rw"
    ],
    "name":"Water occurrence"
  }
}'</span>
</code></pre></div>
<p>To create a dataset using Google Earth Engine (GEE) as data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code>connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code>rest</code>.</td>
<td style="text-align: right"><code>rest</code></td>
</tr>
<tr>
<td><code>provider</code></td>
<td style="text-align: center">The provider should be set to <code>gee</code>.</td>
<td style="text-align: right"><code>gee</code></td>
</tr>
<tr>
<td><code>tableName</code></td>
<td style="text-align: center">Relative path of the dataset within GEE.</td>
<td style="text-align: right">users/resourcewatch_wri/dataset_name</td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the GEE dataset specified on the <code>tableName</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The GEE resource name provided will be publicly visible to all RW API users.</li>
<li>Any changes made to the data hosted on GEE will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your GEE dataset, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>When creating a GEE-based dataset, the RW API will try to validate it by connecting to the corresponding dataset GEE - the result of this will determine if the dataset&#39;s status will be set to <code>saved</code> or <code>error</code>.</p>
<h3 id='wms'>WMS</h3>
<blockquote>
<p>Example of creating a dataset based on WMS data with the minimum fields required</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/dataset'</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span>  <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
   "dataset": {
     "application": [
       "rw"
     ],
     "name": "Seasonal variability",
     "connectorType": "wms",
     "provider":"wms",
     "connectorUrl":"http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson"
   }
 }
'</span>
</code></pre></div>
<p>To create a dataset using WMS as data source, you should provide the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code>connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code>wms</code>.</td>
<td style="text-align: right"><code>wms</code></td>
</tr>
<tr>
<td><code>provider</code></td>
<td style="text-align: center">The provider should be set to <code>wms</code>.</td>
<td style="text-align: right"><code>wms</code></td>
</tr>
<tr>
<td><code>connectorUrl</code></td>
<td style="text-align: center">URL of the server hosting the data in WMS format.</td>
<td style="text-align: right"><code>https://maps.heigit.org/osm-wms/service?request=GetCapabilities&amp;service=WMS</code></td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the WMS dataset specified on the <code>connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The WMS server URL provided will be publicly visible to all RW API users.</li>
<li>Any changes made to the data hosted on the WMS server data will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your WMS server data, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>When creating a WMS-based dataset, no validation is done - the dataset is automatically created in a <code>saved</code> state.</p>
<h3 id='document-based-datasets-json-csv-tsv-or-xml'>Document based datasets: JSON, CSV, TSV or XML</h3>
<blockquote>
<p>Creating a CSV dataset with data provided by externally hosted files:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"csv",
    "sources": [
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_1.csv",
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_2.csv",
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_3.csv"
    ],
    "application":[
     "gfw"
    ],
    "name":"Glad points"
  }
}'</span>
</code></pre></div>
<blockquote>
<p>Creating a JSON dataset with data provided on the request body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"json",
    "application":[
     "your", "apps"
    ],
    "data": {"myData":[
            {"name":"nameOne", "id":"random1"},
            {"name":"nameTow", "id":"random2"}
          ]},
    "name":"Example JSON Dataset"
  }
}'</span>
</code></pre></div>
<p>This dataset hosts data from files in JSON, CSV, TSV or XML format.</p>

<p>Here&#39;s a breakdown of the fields you need to specify when creating a document type dataset, besides the common required fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code>connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code>document</code>.</td>
<td style="text-align: right"><code>document</code></td>
</tr>
<tr>
<td><code>provider</code></td>
<td style="text-align: center">The type of data you are uploading. Must be one of the following: <code>csv</code>, <code>tsv</code>, <code>json</code> or <code>xml</code>.</td>
<td style="text-align: right"><code>csv</code>, <code>tsv</code>, <code>json</code> or <code>xml</code></td>
</tr>
<tr>
<td><code>connectorUrl</code></td>
<td style="text-align: center">URL from which to source data.</td>
<td style="text-align: right">http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson</td>
</tr>
<tr>
<td><code>sources</code></td>
<td style="text-align: center">List of URLs from which to source data.</td>
<td style="text-align: right">[&#39;http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson&#39;,&#39;http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/7?f=pjson&#39;]</td>
</tr>
<tr>
<td><code>data</code></td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present.</td>
<td style="text-align: right">[{&quot;key&quot;:&quot;value1&quot;},{&quot;key&quot;:&quot;value2&quot;}]]</td>
</tr>
</tbody></table>

<p>When creating a document based dataset, you have multiple ways of providing your data to the API, of which you should use only one:</p>

<ul>
<li>The <code>sources</code> field expects a list of URL containing files in the format matching your <code>provider</code> value. This is the recommended way of uploading data.</li>
<li>The <code>connectorUrl</code> field is similar to <code>sources</code>, but it only accepts a single value. <strong>Deprecation notice</strong>: The previously used <code>connectorUrl</code> field should be considered deprecated when creating document-based datasets.</li>
<li>If creating a dataset based on JSON data, you can upload the data on the actual request you issue to the API, inside the <code>data</code> field.</li>
</ul>

<p>The data passed in <code>sources</code> or <code>connectorUrl</code> must be available on a publicly accessible URLs, specified in the <code>sources</code> array field or the <code>connectorUrl</code> single value field. The URLs must be an accessible CSV, TSV or XML file, non-compressed - zip, tar, tar.gz, etc are not supported. <code>sources</code> allows you to specify multiple URLs for a single dataset, provided all files have the same format and data structure. This is particularly useful when creating very large datasets, as it will allow the creation process to be parallelized. No warranties are provided about the order in which the files or their parts are imported.</p>

<p><em>Notice: If you want to create a dataset from a file you have, but that it&#39;s not available on a public URL, check out our docs for <a href="reference.html#uploading-a-dataset-file">uploading a dataset</a>.</em></p>

<p>Unlike with other dataset types, when the dataset is created, the data is copied from the provided source into the API&#39;s internal Elasticsearch instance, which is the source used for subsequent queries or other operations. This has a few implications that you should be aware of:</p>

<ul>
<li>The URLs provided in <code>sources</code> or <code>connectorUrl</code> will be publicly visible to all RW API users.</li>
<li>On dataset creation, those URLs will be visited as the API loads and copies your data.</li>
<li>Queries to the dataset will use the API&#39;s internal copy of your data. If you wish to update that data, see the documentation below on how to update your data.</li>
<li>If the URLs provided become unavailable after the creation process is over, the dataset will continue to work normally - your data will still be available online.</li>
</ul>

<p><em>Notice: When creating a document-based dataset, if any of the fields has a numerical name (for example, column: <code>3</code>), a string named <code>col_</code> will be appended to the beginning of the name of the column. This way, an uploaded column named <code>3</code> will become <code>col_3</code>.</em></p>

<p><em>Tip: If you want to periodically and automatically update your document based dataset with new data, check out the <a href="reference.html#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<p>When creating a document-based dataset, the RW API will start a complex process that copies your data into the API&#39;s internal database, and perform certain indexing actions. This process is called a <strong>Task</strong>, and is given a <code>taskId</code> that is stored on the dataset&#39;s field with the same name. Depending on the size of your dataset, this may take from a few seconds to a few hours to complete. The result of this import process will determine if the dataset&#39;s status will be set to <code>saved</code> or <code>error</code>. You can follow this process by using the <code>taskId</code> value with the <a href="reference.html#get-a-single-task">Tasks API</a>.</p>
<h4 id='using-the-legend-fields-to-define-field-types'>Using the legend fields to define field types</h4>
<p>By default, when creating a document based dataset, the data is ingested by the API and the field types are automatically determined by the underlying Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.7/mapping.html#_dynamic_mapping">dynamic mapping API</a>.
However, in some scenarios, it may be desirable to specify some or all of these mappings manually, to match each field type to its Elasticsearch equivalent.</p>

<p>When defining manual mappings, you don&#39;t need to map every single field. When processing the data, if a field is found for which there isn&#39;t a manual mapping, Elasticsearch will fallback to its dynamic mapping algorithm to try and guess that field&#39;s type. This API only supports a single explicit mapping per field, meaning you cannot declare a given field as both <code>text</code> and <code>keyword</code> for example.</p>

<p>Field mapping can only be defined on dataset creation. Should you want to change these mappings, you can only do so by creating a new dataset with the new mapping structure.</p>

<p>The <code>legend</code> field allows explicitly identifying the following mappings:</p>

<table><thead>
<tr>
<th>Mapping</th>
<th style="text-align: center">Notes</th>
</tr>
</thead><tbody>
<tr>
<td>lat</td>
<td style="text-align: center">If <code>lat</code> and <code>long</code> are both provided, a <code>the_geom</code> mapping is added</td>
</tr>
<tr>
<td>long</td>
<td style="text-align: center">If <code>lat</code> and <code>long</code> are both provided, a <code>the_geom</code> mapping is added</td>
</tr>
<tr>
<td>date</td>
<td style="text-align: center">Name of columns with date values (ISO Format)</td>
</tr>
<tr>
<td>country</td>
<td style="text-align: center">Name of columns with country values (ISO3 code)</td>
</tr>
<tr>
<td>region</td>
<td style="text-align: center">Name of columns with region values (ISO3 code)</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
</tr>
<tr>
<td>nested</td>
<td style="text-align: center"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.7/nested.html">Nested objects</a> need to be explicitly identified in order to be indexed.</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
</tr>
<tr>
<td>integer</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>short</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>byte</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>double</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>half_float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>scaled_float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>boolean</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>binary</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>text</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>keyword</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
</tbody></table>

<p>For more details on the characteristics of each of the basic data types, refer to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.7/mapping.html#field-datatypes">Elasticsearch documentation</a>.</p>
<h4 id='uploading-a-dataset-file'>Uploading a dataset file</h4>
<blockquote>
<p>Upload raw data for using in a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/upload <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-F</span> <span class="nv">provider</span><span class="o">=</span>csv,
<span class="nt">-F</span> <span class="nv">dataset</span><span class="o">=</span>@&lt;your-file&gt;
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"connectorUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw.dataset.raw/some-file.csv"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Country (region)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Positive affect"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Negative affect"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Social support"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Freedom"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Corruption"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Generosity"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Using the returned connectorUrl to create a new dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"csv",
    "connectorUrl":"rw.dataset.raw/some-file.csv",
    "application":[
     "your", "apps"
    ],
    "name":"Example RAW Data Dataset"
  }
}'</span>
</code></pre></div>
<p>The <code>upload</code> endpoint allows you to create datasets on the API from local files that aren&#39;t available online. 
If your file is up to 4MB in size, you can upload it to the API by using the <code>upload</code> endpoint. 
This endpoint accepts a file in the &quot;dataset&quot; field of your POST request, and a <code>provider</code> that matches your file type and extension. 
The supported formats/extensions are: csv, json, tsv, xml, tif, tiff and geo.tiff.
The request uploads the file to the API, and returns a specially crafted <code>connectorUrl</code> value, and a list of fields found in your file.
With this data, you can create a document type dataset by passing it to the <code>connectorUrl</code> value of a <a href="reference.html#document-based-datasets-json-csv-tsv-or-xml">new document type dataset</a>.</p>
<h4 id='errors-for-upload-a-dataset-file'>Errors for upload a dataset file</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- no file to check -</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file dataset can not be a empty file -</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>provider: provider must be in [csv,json,tsv,xml,tif,tiff,geo.tiff].</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file too large -</td>
<td>Your file is larger than 4MB.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file <your file name> is bad file type. -</td>
<td>The <code>provider</code> value must match the extension of the uploaded file.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to upload a file.</td>
</tr>
</tbody></table>
<h2 id='updating-a-dataset'>Updating a dataset</h2>
<p>There are multiple options to update a dataset, depending on what modification you are trying to achieve, and the underlying data provider of the dataset itself. This section covers the different endpoints that allow you to modify a dataset, their details, and helps you pick the option that best fits your scenario. We recommend reviewing all of them before proceeding, so you can find the endpoint that best matches your needs.</p>
<h3 id='updating-the-fields-of-a-dataset'>Updating the fields of a dataset</h3>
<blockquote>
<p>Example request for updating the name of a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id-or-slug&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "name": "Another name for the dataset"
}'</span>
</code></pre></div>
<p>In order to modify the fields of a dataset, you can use the patch dataset endpoint. 
This endpoint allows you to modify most of your dataset&#39;s details, like the name or publishing status, but can also be used to modify internal fields of a dataset, like <code>connectorType</code>. 
When making these changes, be mindful that some of these fields are critical to the correct behavior of the dataset, and providing incorrect values may break your dataset. 
There are other endpoints documented in this page that allow you to perform certain update-like operations (ie. update data on a document-type dataset), so refer to those first before using this endpoint. 
Also important to keep in mind is the fact that this endpoint does not perform validation on things like <code>connectorUrl</code>/<code>sources</code> URLs.</p>

<p>All the fields in the <a href="reference.html#dataset-reference">dataset reference</a> can be modified, except the following:</p>

<ul>
<li><code>slug</code></li>
<li><code>userId</code></li>
<li><code>createdAt</code></li>
<li><code>updatedAt</code></li>
</ul>

<p>Additionally, certain fields have special behavior associated with them:</p>

<ul>
<li><code>status</code> can only be modified by users with <code>ADMIN</code> role or by other microservices.</li>
<li><code>taskId</code> and <code>errorMessage</code> can only be modified by other microservices.</li>
<li><code>published</code> can only be modified by users with <code>ADMIN</code> role.</li>
<li><code>env</code> changes will not only affect the dataset, but also related widgets and layers. Refer to the PATCH <code>/widget/change-environment/&lt;dataset id&gt;/&lt;env&gt;</code> and the the PATCH <code>/layer/change-environment/&lt;dataset id&gt;/&lt;env&gt;</code> endpoints respectively for more details.</li>
</ul>

<p>When passing new values for Object type fields, the new value will fully overwrite the previous one. It&#39;s up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<p>Use this endpoint when:</p>

<ul>
<li>Modifying the fields of a dataset, like name, and not the data itself.</li>
<li>Modifying the source of data for any dataset that&#39;s not document based (<code>connectorType</code> values other than <code>document</code>).</li>
<li>Making advanced changes to a dataset.</li>
</ul>
<h4 id='errors-for-updating-the-fields-of-a-dataset'>Errors for updating the fields of a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&#39;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h3 id='concatenate-and-append-data-to-a-document-based-dataset'>Concatenate and append data to a document based dataset</h3>
<blockquote>
<p>Concatenate data using external data source:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset_id/concat <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "sources": ["&lt;csv1Url&gt;", "&lt;csv2Url&gt;", "&lt;csv3Url&gt;"],
    "dataPath": "data... etc"
}'</span>
</code></pre></div>
<blockquote>
<p>Append data using external data source:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset_id/append <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "sources": ["&lt;csvUrl&gt;"],
    "dataPath": "data... etc"
}'</span>
</code></pre></div>
<blockquote>
<p>Concatenate data using JSON array in post body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset_id/concat <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "data": [{},{}]
}'</span>
</code></pre></div>
<p>Using these endpoints, you can add more data to an already existing dataset. They are exclusively available for document based datasets - you&#39;ll get a <code>404</code> error if you use them on a dataset of a different type. You can either provide the URL for the file containing the data you wish to add, or simply provide that data in the body of your request, as a JSON object.</p>

<p>These process are asynchronous and not instantaneous. Immediately when triggered, these requests will cause the dataset&#39;s <code>status</code> to be set to <code>pending</code>, meaning you will not be able to issue new overwrite, concatenate or append requests. Once the request has been fully processed, the status will be automatically set to <code>saved</code>. Depending on factors like API load or the size of the data being uploaded, this may take from a few minutes to a few hours to occur. The API does not issue any notification when the asynchronous operation is finished.</p>

<p>In order to perform these operation, the following conditions must be met:</p>

<ul>
<li>the dataset&#39;s <code>overwrite</code> property must be set to <code>true</code>.</li>
<li>the dataset&#39;s <code>status</code> property must be set to <code>saved</code>.</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must have at least one overlapping application with the ones associated with the dataset.</li>
</ul>

<p>While they ultimately achieve a very similar end result, concatenate and append rely on different internal processes, each with its own characteristics.</p>

<ul>
<li>The concatenate process relies on a slower approach to ensure the operation is atomic. Until the operation is completed, you will see the dataset data as it was before the concatenate operation was triggered. If the operation fails, the old version of the data is kept accessible as it was before the concatenation process was started. There&#39;s a known issue where concatenating new data to already existing large datasets may result in failure.</li>
<li>The append operation relies on a faster process that does not offer atomicity. The new data is simply added to the current dataset, and any queries done while this process is taking place may produce results based on the preexisting data mixed with parts of the newly added values. Should the operation fail halfway, your dataset may contain all the preexisting records as well as part (but not all) of the newly added ones.</li>
</ul>

<aside class="notice">
    Using the previous <code class="prettyprint">url</code> field to pass the url of a single file is still permitted but is now deprecated in favor of <code class="prettyprint">sources</code>.
</aside>

<p>Here&#39;s a more detailed description of the request&#39;s body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Dataset provider this include inner connectors and 3rd party ones</td>
<td style="text-align: right">String</td>
<td style="text-align: right">A valid dataset provider</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>sources</td>
<td style="text-align: center">List of URLs from which to source data</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">URL array</td>
<td style="text-align: right">Yes, unless JSON data is provided using the <code>data</code> field</td>
</tr>
<tr>
<td>data</td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">[{},{},{}]</td>
<td style="text-align: right">Yes for JSON if <code>sources</code> is not present</td>
</tr>
<tr>
<td>dataPath</td>
<td style="text-align: center">Path to the data in a JSON file-based datasets</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;&#39;</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p><em>Tip: If you want to periodically and automatically concatenate data to your document based dataset, check out the <a href="reference.html#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<p>Use this endpoint when:</p>

<ul>
<li>Adding new data to an existing document based dataset, without modifying/removing the existing one.</li>
</ul>
<h4 id='errors-for-concatenating-and-appending-data-to-a-document-based-dataset'>Errors for concatenating and appending data to a document based dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Dataset is not in saved status</td>
<td>The dataset&#39;s <code>status</code> value is not set to <code>saved</code>. Refer to <a href="reference.html#dataset-reference">dataset reference</a> for more details on this field and its values.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>A dataset with the provided id does not exist, or does not have <code>connectorType</code> with value <code>document</code>.</td>
</tr>
<tr>
<td>409</td>
<td>Dataset locked. Overwrite false.</td>
<td>The dataset you&#39;re trying to modify has <code>overwrite</code> value set to <code>false</code>, to explicitly prevent data modifications.</td>
</tr>
</tbody></table>
<h3 id='overwrite-data-for-a-document-based-dataset'>Overwrite data for a document based dataset</h3>
<blockquote>
<p>Overwrite data using external data source:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset_id/data-overwrite <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
   "sources": ["&lt;url of the data source&gt;"],
   "provider": "csv"
}'</span>
</code></pre></div>
<blockquote>
<p>Overwrite data using JSON array in post body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset_id/data-overwrite <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
   "data": [{},{}],
   "provider": "csv"
}'</span>
</code></pre></div>
<p>Using this endpoint, you can add or completely replace the data of an already existing dataset. 
It&#39;s exclusively available for document based datasets - you&#39;ll get a <code>404</code> error if you use it on a dataset of a different type. 
All previously existing data will be permanently deleted. 
You can either provide the URL(s) for the file(s) containing the data you wish to add, or simply provide that data in the body of your request, as a JSON object. 
There are no requirements regarding similarity of the data structure between existing and new data - your overwrite data can have a completely different data schema.</p>

<p>This process is asynchronous and not instantaneous. Immediately when triggered, this request will cause the dataset&#39;s <code>status</code> to be set to <code>pending</code>, meaning you will not be able to issue new overwrite or concat requests, and will not yet be able to access the new data yet. Once the request has been fully processed, the status will be automatically set to <code>saved</code> and the new data will be accessible. Depending on factors like API load or the size of the data being uploaded, this may take from a few minutes to a few hours to occur. The API does not issue any notification when the asynchronous operation is finished.</p>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the dataset&#39;s <code>overwrite</code> property must be set to <code>true</code>.</li>
<li>the dataset&#39;s <code>status</code> property must be set to <code>saved</code>.</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must have at least one overlapping application with the ones associated with the dataset.</li>
</ul>

<p>Here&#39;s a more detailed description of the request&#39;s body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Dataset provider this include inner connectors and 3rd party ones</td>
<td style="text-align: right">String</td>
<td style="text-align: right">A valid dataset provider</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>sources</td>
<td style="text-align: center">List of URLs from which to source data</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">URL array</td>
<td style="text-align: right">Yes, unless JSON data is provided using the <code>data</code> field</td>
</tr>
<tr>
<td>data</td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">[{},{},{}]</td>
<td style="text-align: right">Yes for JSON if <code>sources</code> is not present</td>
</tr>
<tr>
<td>legend</td>
<td style="text-align: center">The schema of the new data. If none is provided, a guessing mechanism will be used. The existing <code>legend</code> value of the dataset will be ignored and overwritten in all <code>overwrite</code> operations. See <a href="reference.html#using-the-legend-fields-to-define-field-types">the legend section</a> above for more details.</td>
<td style="text-align: right">Object</td>
<td style="text-align: right"></td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p><em>Tip: If you want to periodically and automatically overwrite the data on your document based dataset, check out the <a href="reference.html#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>
<h4 id='errors-for-overwriting-data-for-a-document-based-dataset'>Errors for overwriting data for a document based dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Dataset is not in saved status</td>
<td>The dataset&#39;s <code>status</code> value is not set to <code>saved</code>. Refer to <a href="reference.html#dataset-reference">dataset reference</a> for more details on this field and its values.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>A dataset with the provided id does not exist, or does not have <code>connectorType</code> with value <code>document</code>.</td>
</tr>
<tr>
<td>409</td>
<td>Dataset locked. Overwrite false.</td>
<td>The dataset you&#39;re trying to modify has <code>overwrite</code> value set to <code>false</code>, to explicitly prevent data modifications.</td>
</tr>
</tbody></table>

<p>Use this endpoint when:</p>

<ul>
<li>Fully replacing the data of an existing document based dataset, while keeping other values like id or name.</li>
<li>Modifying the structure of the data for a document based dataset.</li>
</ul>
<h2 id='cloning-a-dataset'>Cloning a dataset</h2>
<blockquote>
<p>Example request for cloning a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/5306fd54-df71-4e20-8b34-2ff464ab28be/clone <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "datasetUrl": "/query/5306fd54-df71-4e20-8b34-2ff464ab28be?sql=select%20%2A%20from%20data%20limit%2010",
    "application": [
      "your",
      "apps"
    ],
    "legend": {...},
    "applicationConfig" : {...}
  }
}'</span>
</code></pre></div>
<p>This endpoint allows you to create a new, json based dataset, from the result of a RW API endpoint call. The basic usage example would be to create a new dataset based on a custom query to an existing dataset - this is illustrated in the example <code>curl</code> call in this section. Other use cases could be converting the result of an analysis endpoint into a dataset, or capturing the result of a query to a REST based dataset (cartodb, arcgis, etc) to an internal json representation of the same data, that is kept in the API database.   </p>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must belong to the applications specified in the request body.</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<p>The request requires two fields to be present:</p>

<ul>
<li><code>datasetUrl</code>: the URL from where to load the data to populate the new dataset. Must be RW API, relative path, like <code>/query/5306fd54-df71-4e20-8b34-2ff464ab28be?sql=select%20%2A%20from%20data%20limit%2010</code>.</li>
<li><code>application</code>: the array of applications to which the new dataset will belong.</li>
</ul>

<p>Additionally, you can optionally specify these fields:</p>

<ul>
<li><code>legend</code>: field structure and type of the new dataset. Refer to <a href="reference.html#dataset-reference">dataset reference</a> for more details.</li>
<li><code>applicationConfig</code>: application-specific configuration. Refer to <a href="reference.html#dataset-reference">dataset reference</a> for more details. If not provided, it will be copied from the original dataset.</li>
<li><code>published</code>: if the user has <code>ADMIN</code> role, they can set this value to <code>true</code>. </li>
</ul>

<p>For the fields in the following list, values will be copied from the original dataset to the new one, unless specified:</p>

<ul>
<li><code>name</code>: copied from the original dataset, with a timestamp appended, to ensure uniqueness.</li>
<li><code>subtitle</code></li>
<li><code>dataPath</code>: will always be set to <code>data</code>, matching the expected response structure of RW API responses like <code>/query</code> that encapsulate the &quot;real&quot; data in a <code>data</code> json object.</li>
<li><code>connectorType</code>: will be set to <code>document</code></li>
<li><code>provider</code>: will be set to <code>json</code></li>
<li><code>attributesPath</code></li>
<li><code>tableName</code></li>
<li><code>dataLastUpdated</code></li>
<li><code>overwrite</code></li>
<li><code>published</code>: if the user has role <code>ADMIN</code> and does not explicitly set <code>published</code> to <code>true</code> on the request body, this value is inherited. Otherwise, it&#39;s set to <code>false</code>.</li>
</ul>

<p>Datasets created through a cloning operation will have a specific <code>clonedHost</code> object, with additional data. Refer to <a href="reference.html#dataset-reference">dataset reference</a> for more details on the content of this field. </p>

<p>The dataset cloning requests accepts an optional <code>full</code> boolean query parameter that, when set to <code>true</code>, will clone of vocabulary-related data and metadata from the original dataset to the new one.</p>
<h4 id='errors-for-cloning-a-dataset'>Errors for cloning a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><field>: <field> can not be empty.</td>
<td>The required field identified in the error message is missing in the request body.</td>
</tr>
<tr>
<td>400</td>
<td>- application: must be a non-empty array -</td>
<td><code>application</code> must be specified as an array.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to clone a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - User does not have access to this dataset&#39;s application</td>
<td>You specified an <code>application</code> in your request body that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&#39;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='deleting-a-dataset'>Deleting a dataset</h2>
<p>Use this endpoint if you wish to delete a dataset. Deleting a dataset of type document (<code>connectorType</code> with value <code>document</code>) will cause the API&#39;s internal copy of said data to be deleted. Dataset types that proxy data from an external source (ie. carto, gee, etc) will be deleted without modifying said external source.</p>

<p>When deleting a dataset that is associated with multiple <code>application</code> values, the user issuing the request must be associated with all of them in order for the dataset to be deleted. If that&#39;s not the case, the <code>application</code> values associated with the user will be removed from the dataset&#39;s <code>application</code> list, and no further action will be taken - the dataset itself and its associated resources will continue to exist. The dataset is only actually deleted if the user has access to all of the <code>application</code> to which the dataset belongs. </p>

<p>Besides deleting the dataset itself, this endpoint also deletes graph vocabularies, layers, widgets and metadata related to the dataset itself. These delete operations are issued in this order, and prior to deleting the dataset itself, but are not atomic - if one of them fails (for example, if attempting to delete a protected resource), the following ones are canceled, but the already deleted elements are not restored. </p>

<p>In order to delete a dataset, the following conditions must be met:</p>

<ul>
<li>the dataset&#39;s <code>protected</code> property must be set to <code>false</code>.</li>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<blockquote>
<p>Example request for deleting a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><h4 id='errors-for-deleting-a-dataset'>Errors for deleting a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Dataset is protected</td>
<td>You are attempting to delete a dataset that has <code>protected</code> set to prevent deletion.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset)</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a dataset with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&#39;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='dataset-automatic-synchronization'>Dataset automatic synchronization</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="s1">'{
    "connectorType":"document",
    "provider":"csv",
    "connectorUrl":"&lt;csvUrl&gt;",
    "application":[
     "your", "apps"
    ],
    "name":"Example SYNC Dataset",
    "overwrite": true,
    "sync": {
        "action":"concat",
        "cronPattern":"0 * * * * *",
        "url":"&lt;updateCsvUrl&gt;"
    }
}'</span>
</code></pre></div>
<p>Certain datasets contain data that evolves frequently over time, and you, as the creator of this dataset, what to ensure that it&#39;s up-to-date. As we&#39;ve seen before, if your data is hosted on one of the supported 3rd party data providers, like Carto or Arcgis, your data will be proxied, so users of the RW API will always see the latest version of your data. However, if you uploaded your data from a file, your data is copied to the RW API database at the time of the dataset&#39;s creation, so keeping it up-to-date requires a different approach. It&#39;s with scenario in mind that the RW API offers the automatic synchronization mechanism.</p>

<p>The automatic synchronization mechanism is available for document based datasets only, and you can configure it when <a href="reference.html#creating-a-dataset">creating</a> or <a href="reference.html#updating-the-fields-of-a-dataset">updating</a> a dataset. When enabled, it will schedule an automatic, periodic task, that will update your document based dataset&#39;s data, based on data from an URL you provide. This means that, once configured, you just have to make sure the automatic synchronization mechanism can find the newest version of the data at the specified URL, and the RW API will take care of the actual data update process for you.</p>

<p>To configure automatic synchronization on dataset creation or update, you need to pass a <code>sync</code> object on your calls to the respective endpoints, next to the other fields. See the included example for a clearer idea of how creating a dataset with automatic synchronization looks like.</p>

<p>There are 3 fields, all required, that you need to specify inside the <code>sync</code> object:</p>

<ul>
<li><code>action</code>: choose either <code>concat</code> or <code>overwrite</code>. See more details above about <a href="reference.html#concatenate-and-append-data-to-a-document-based-dataset">concatenating</a> and <a href="reference.html#overwrite-data-for-a-document-based-dataset">overwriting</a> dataset data. Append operations, as documented in the section above, is not supported.</li>
<li><code>cronPattern</code>: <a href="https://en.wikipedia.org/wiki/Cron">cron</a> expression representing when and how frequently the synchronization process should take place. The host executing these tasks use UTC timezone.</li>
<li><code>url</code>: publicly available URL from where the automatic synchronization mechanism will load the data to replace/concatenate to your dataset. </li>
</ul>

<p>Internally, the automatic synchronization mechanism will call either the <a href="reference.html#concatenate-and-append-data-to-a-document-based-dataset">dataset concatenation</a> or <a href="reference.html#overwrite-data-for-a-document-based-dataset">dataset overwrite</a> endpoint. 
If that internal request fails - for example, if <code>overwrite</code> is set to <code>false</code> - the sync process will fail silently. 
If you have the <code>ADMIN</code> role, you can use the <code>/v1/task</code> endpoint to see scheduled tasks and their error output, but otherwise this failure will be invisible to end users.</p>

<p>On the other hand, if the request goes through, but the concatenation/overwrite process fails - for example, if the URL provided is not available - then your dataset <code>status</code> will be set to <code>error</code> and the <code>errorMessage</code> field will give you a simple description of what happened.</p>

<p>To see the details (including the date) of the last operation performed on the dataset, use the link in the <code>taskId</code> field.</p>
<h2 id='flush-dataset-cache'>Flush dataset cache</h2>
<blockquote>
<p>Flush dataset&#39;s cache</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/0c630feb-8146-4fcc-a9be-be5adcb731c8/flush <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>OK
</code></pre></div>
<p>Flushes the cache for the specified dataset. Take into account that only the dataset itself, query results and fields will be flushed. Any other relation, like metadata, layers or widgets linked to the specified dataset will not be affected by this action.</p>

<p>In order to flush a dataset&#39;s cache, the following conditions must be met:</p>

<ul>
<li>the user must be logged in.</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.<br></li>
</ul>
<h4 id='errors-for-flushing-a-dataset-39-s-cache'>Errors for flushing a dataset&#39;s cache</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset)</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a dataset with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&#39;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='recover'>Recover</h2>
<blockquote>
<p>Recover dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/0c630feb-8146-4fcc-a9be-be5adcb731c8/recover <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>OK
</code></pre></div>
<p>Resets a dataset&#39;s <code>status</code> to <code>saved</code> and clears its errors. Keep in mind that this does NOT modify the dataset in any other way - if the underling dataset&#39;s data was inconsistent for any reason, this endpoint will not change it, and it&#39;s up to you to fix it using a <code>data-overwrite</code> or other endpoints.</p>

<p>In order to recover a dataset, the user must be logged in and have the <code>ADMIN</code> role.</p>
<h4 id='errors-for-recovering-a-dataset'>Errors for recovering a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged with to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to have the <code>ADMIN</code> role.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&#39;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='dataset-reference'>Dataset reference</h2>
<p>This section gives you a complete view at the properties that are maintained as part of dataset. When interacting with a dataset (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/dataset/blob/master/app/src/models/dataset.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the dataset. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the dataset.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the dataset. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Type of the dataset.</td>
</tr>
<tr>
<td>subtitle</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Subtitle of the dataset.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this dataset. Read more about this field <a href="concepts.html#applications">here</a>.</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Key-value storage of application-specific data. Use the <code>application</code> value as key and a JSON Object as the value to store complex, extensible data.</td>
</tr>
<tr>
<td>dataPath</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Path to the data in a JSON file-based datasets.</td>
</tr>
<tr>
<td>attributesPath</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>connectorType</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Type of connector. <code>wms</code> for WMS-based datasets, <code>rest</code> for datasets that rely on external data sources (carto, arcgis, etc) or <code>document</code> for file-based datasets (JSON, CSV, etc).</td>
</tr>
<tr>
<td>provider</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Dataset provider.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the dataset. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>connectorUrl</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Path to the source of the data. On datasets with <code>document</code> connectorType, <code>sources</code> should be used instead.</td>
</tr>
<tr>
<td>sources</td>
<td>Array</td>
<td>No</td>
<td>null</td>
<td>Path to the source files of the data. Only used on datasets with <code>document</code> connectorType.</td>
</tr>
<tr>
<td>tableName</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Additional value used to locate the dataset within a given underlying provider. Refer to the documentation of the different connector for more details.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>No</td>
<td>pending</td>
<td>Status of the dataset. <code>saved</code> means the dataset is available to use, <code>pending</code> means an operation is ongoing and the dataset is temporarily unavailable, <code>error</code> means the dataset is in an invalid state and requires further action before becoming available.</td>
</tr>
<tr>
<td>overwrite</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the data can be overwritten (only for being able to update dataset)</td>
</tr>
<tr>
<td>errorMessage</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>If this dataset is in <code>error</code> state, this field may contain additional details about the error.</td>
</tr>
<tr>
<td>mainDateField</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the dataset is published or not.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the dataset belongs. Read more about this field in the <a href="concepts.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>geoInfo</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If it contains interceptable geographical info</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the dataset is protected. A protected dataset cannot be deleted.</td>
</tr>
<tr>
<td>taskId</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Id of the latest task associated with this dataset. Typically only present in <code>document</code> connectorType datasets</td>
</tr>
<tr>
<td>subscribable</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Information about the dataset being subscribable for alerts. More info about this can be found on the <a href="reference.html#subscriptions">Subscriptions</a> section of the docs.</td>
</tr>
<tr>
<td>legend.lat</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Dataset field representing a latitude value.</td>
</tr>
<tr>
<td>legend.long</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Dataset field representing a longitude value.</td>
</tr>
<tr>
<td>legend.*</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Different keys corresponding to data types. Each key may have an array of strings, referencing dataset fields that match that data type. Used functionally for document-based datasets, but may also be set by the user as reference for other types. See <a href="reference.html#using-the-legend-fields-to-define-field-types">this section</a> for more details.</td>
</tr>
<tr>
<td>clonedHost.hostProvider</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code>provider</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code>connectorUrl</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code>Id</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostType</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code>connectorType</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostPath</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code>tableName</code> value of the original dataset.</td>
</tr>
<tr>
<td>widgetRelevantProps</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Group of relevant props of a widget.</td>
</tr>
<tr>
<td>layerRelevantProps</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Group of relevant props of a layer.</td>
</tr>
<tr>
<td>dataLastUpdated</td>
<td>Date</td>
<td>No</td>
<td></td>
<td>User defined date of when a dataset was last updated.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the dataset. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the dataset. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the dataset was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the dataset was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h1 id='fields'>Fields</h1><h2 id='what-are-fields'>What are fields?</h2>
<p>Fields are the properties of a dataset your will find when querying its data, use when filtering data through <a href="concepts.html#query">queries</a>, or visualise when rendering a <a href="concepts.html#layer">layer</a> or a <a href="concepts.html#widget">widget</a>. </p>

<p>Fields are part of a dataset, and are determined by the structure of data provided by the dataset creator. Each field also includes information about its data type, derived automatically by the dataset provider (check out the specifics of each provider in the sections below). If you are uploading your own datasets to the RW API, you don&#39;t have to do anything else for your dataset to be available through the fields endpoints - there&#39;s no additional data you have to provide. Keep in mind the endpoints described in the sections below are <strong>read-only</strong> - if you want to change your dataset&#39;s fields, you need to upload the dataset&#39;s data again.</p>

<p>Fields are targeted at users consuming datasets available on the RW API, particularly if you want to build a flexible and scalable application. The fields endpoints aim at giving you a consistent and uniform view of the structure of data hosted in different <a href="concepts.html#dataset-providers">dataset providers</a>, that would otherwise be served in a heterogeneous structure.</p>
<h2 id='how-to-get-the-dataset-fields'>How to get the dataset fields</h2>
<blockquote>
<p>Querying the fields of a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/fields/&lt;dataset-id&gt;
</code></pre></div>
<blockquote>
<p>Response example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public.cait_2_0_country_ghg_emissions_toplow2011"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"the_geom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"the_geom_webmercator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"x"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"y"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"z"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Once the dataset has been created and its status is set to <code>saved</code>, you will be able to use this endpoint to get details about a its fields. The resulting response contains two root fields</p>

<ul>
<li><code>tableName</code>: a string containing the table name, as stored in the dataset object. The value and function of this field will depend on the dataset&#39;s provider, and you can refer to the <a href="reference.html#dataset">dataset</a> documentation for more details about this.</li>
<li><code>fields</code>: a key-value pair of field names and their respective details. </li>
</ul>

<p>While the aim of this endpoint is to provide an homogeneous view of data stored in different systems, you will still encounter slight variations in data, depending on the underlying type of the dataset you&#39;re querying. The example response on the right illustrates the typical basic response structure: <code>tableName</code> with a string value, and a <code>fields</code> map that matches each field&#39;s name to a <code>type</code>. You&#39;ll find this structure throughout all responses, but you may also find additional details for each field, and the data types may vary in name. In the next sections we&#39;ll cover some of the specifics for each dataset type.</p>
<h3 id='carto'>Carto</h3>
<blockquote>
<p>Example response for a Carto dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gadm28_adm1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int4"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"the_geom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"wkbtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unknown"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dims"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"srid"</span><span class="p">:</span><span class="w"> </span><span class="mi">4326</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"the_geom_webmercator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"wkbtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unknown"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dims"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"srid"</span><span class="p">:</span><span class="w"> </span><span class="mi">3857</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"objectid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int8"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"centroid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"area_ha"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float8"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"topojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"the_geom_simple"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"wkbtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unknown"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dims"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"srid"</span><span class="p">:</span><span class="w"> </span><span class="mi">4326</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pgtype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Carto datasets provide a <code>type</code> for each field, as well as additional details, depending on the field type. Most fields will have a <code>pgtype</code> field, which will identify a sub-type of sorts - for example, <code>type</code> number is matched with different <code>pgtype</code> values in this example. This is related with the underling Carto implementation, that uses PostgreSQL, PostGIS and its own software stack. We recommend relying on the <code>type</code> as much as possible.</p>

<p>Other, more complex, field types, like <code>geometry</code> types, include additional details for their respective types. As before, this is related with the underlying Carto implementation tools, and not actively maintained or supported by the RW API.</p>

<p>For more information about the different types that can be found in Carto datasets please refer to <a href="https://www.postgresql.org/docs/11/datatype.html">PostgreSQL&#39;s documentation on Data Types</a> or <a href="https://postgis.net/docs/index.html">PostGIS&#39;s documentation</a>. </p>
<h3 id='arcgis-feature-layer'>ArcGIS feature layer</h3>
<blockquote>
<p>Example response for a ArcGIS dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"conservationMapServer3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"objectid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeOID"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"tcl_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeString"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"tcl_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeSmallInteger"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"area_ha"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeInteger"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"tx2_tcl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeSmallInteger"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"gfwid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeString"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"globalid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeGlobalID"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"shape"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeGeometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"shape_Length"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeDouble"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"shape_Area"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"esriFieldTypeDouble"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>ArcGIS uses its own type naming convention, as you see reflected in the included example. The RW API passes that information as-is to you. As different ArcGIS datasets rely on different ArcGIS server instances and versions, you may encounter variations in the types you&#39;ll find, depending on how ArcGIS evolves these types over type.</p>

<p>For more information about the different types that can be found in ArcGIS datasets please refer to <a href="https://desktop.arcgis.com/en/arcmap/latest/manage-data/geodatabases/arcgis-field-data-types.htm">ArcGIS&#39;s field data types documentation</a>.</p>
<h3 id='google-earth-engine'>Google Earth Engine</h3>
<blockquote>
<p>Example response for a Google Earth Engine dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"bands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"dataType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"precision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INT"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="mi">2147483647</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2147483648</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"grid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"affineTransform"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"scaleX"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00833333376795053</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"scaleY"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00833333376795053</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"translateX"</span><span class="p">:</span><span class="w"> </span><span class="mf">-180.0000000000001</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"translateY"</span><span class="p">:</span><span class="w"> </span><span class="mf">90.00000782310963</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"crsCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EPSG:4326"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">18000</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">43200</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"pyramidingPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MEAN"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                        </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"-Infinity"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"-Infinity"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"Infinity"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"-Infinity"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"Infinity"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"Infinity"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"-Infinity"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"Infinity"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"-Infinity"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"-Infinity"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Polygon"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users/resourcewatch/cli_030_global_aridity"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"projects/earthengine-legacy/assets/users/resourcewatch/cli_030_global_aridity"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Image:cli_030 _global_aridity"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"sizeBytes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"413389345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Image:cli_030 _global_aridity"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMAGE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-06T18:58:39.646890Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users/resourcewatch/cli_030_global_aridity"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Google Earth Engine (GEE) is perhaps the biggest outlier when it comes to fields data. Because it relies on raster data, rather than tabular data, the data structure you&#39;ll find in a GEE dataset is very different, as you can see in the example on the side.</p>

<p>The response consists of loading the details for a single image, with the most meaningful information being the <code>properties</code> (of an image) and <code>bands</code> (of said image). Those will be the fields you&#39;ll be able to retrieve when using the query endpoints.</p>
<h3 id='nex-gddp'>NEX-GDDP</h3>
<blockquote>
<p>Example response for a NEX-GDDP dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"tasavg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"tasavg_q25"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"tasavg_q75"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tasavg/rcp45_30_y"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>NEX-GDDP datasets have an additional <code>uom</code> (unit of measure) field on some field types, but otherwise has no other info besides the basic details.</p>
<h3 id='bigquery'>BigQuery</h3>
<blockquote>
<p>Example response for a BigQuery dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[bigquery-public-data:ghcn_m.ghcnm_tmin]"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INTEGER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REQUIRED"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11 digit identifier, digits 1-3=Country Code, digits 4-8 represent the WMO id if the station is a WMO station. It is a WMO station if digits 9-11=</span><span class="se">\"</span><span class="s2">000</span><span class="se">\"</span><span class="s2">."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"year"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INTEGER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULLABLE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4 digit year of the station record."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"element"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STRING"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULLABLE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"element type, monthly mean temperature=</span><span class="se">\"</span><span class="s2">TAVG</span><span class="se">\"</span><span class="s2"> monthly maximum temperature=</span><span class="se">\"</span><span class="s2">TMAX</span><span class="se">\"</span><span class="s2"> monthly minimum temperature=</span><span class="se">\"</span><span class="s2">TMIN</span><span class="se">\"</span><span class="s2">"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INTEGER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULLABLE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly value (MISSING=-9999).  Temperature values are in hundredths of a degree Celsius, but are expressed as whole integers (e.g. divide by 100.0 to get whole degrees Celsius)."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qcflag3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STRING"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULLABLE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quality control flag, seven possibilities within quality controlled unadjusted (qcu) dataset, and 2 possibilities within the quality controlled adjusted (qca) dataset."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qcflag12"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STRING"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULLABLE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quality control flag, seven possibilities within quality controlled unadjusted (qcu) dataset, and 2 possibilities within the quality controlled adjusted (qca) dataset."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dsflag12"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STRING"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULLABLE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data source flag for monthly value, 21 possibilities"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>BigQuery has a slight variation on the core structure returned by the fields endpoint for other dataset types. Instead of <code>fields</code> having a key-value map, it has an array of objects, each describing a field. Each of these objects has a <code>name</code> and <code>type</code> property, identifying a field and its type, as well as a <code>mode</code> and <code>description</code>, respectively indicating if the field is nullable or required, and providing a human-friendly description of the field&#39;s content or purpose.</p>
<h3 id='loca'>Loca</h3>
<blockquote>
<p>Example response for a Loca dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"xs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"xs_q25"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"xs_q75"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"loca_xs/rcp85_30_y"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Loca datasets have an additional <code>uom</code> (unit of measure) field on some field types, but otherwise has no other info besides the basic details.</p>
<h3 id='document-based-dataset-types-csv-tsv-json-and-xml'>Document-based dataset types (csv, tsv, json and xml)</h3>
<blockquote>
<p>Example response for a document-based dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_1c9a1e4f455b4c03ac88dd2242a2e4b1_1602065490373"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"commodity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"data_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"gcm_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"impactparameter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"scenario"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"keyword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignore_above"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Document based datasets from the 4 different types of sources (json, xml, csv and tsv) all share a common internal storage engine, based on Elasticsearch. So, when querying for fields of a document-based dataset, you&#39;ll find information matching the field mechanism used by Elasticsearch. This is particularly evident on text fields, where the <code>keyword</code> information is present. During most uses cases, we don&#39;t anticipate this information being needed, as relying on the <code>type</code> value should cover the majority of your needs.</p>
<h3 id='dataset-types-not-supported-by-the-fields-endpoint'>Dataset types not supported by the fields endpoint</h3>
<p>The following dataset types have not been integrated with the fields endpoint, so you will get a 404 response when querying for their fields:</p>

<ul>
<li><code>wms</code></li>
<li><code>rasdaman</code></li>
<li><code>vector</code></li>
</ul>
<h3 id='errors-for-getting-a-dataset-fields'>Errors for getting a dataset fields</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>You are querying for fields of a dataset which type is not integrated with the fields endpoint</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h1 id='query'>Query</h1>
<p>In order to retrieve data from datasets, you can send queries to the API using a syntax very similar to SQL. Using these endpoints, you can also download the results of a particular query. If you are new to the RW API, or want to learn more about the concept of a querying datasets, we strongly encourage you to read the <a href="concepts.html#query">query concept</a> documentation first. It gives you a brief and clear description of what a query is, and what it is useful for.</p>

<p><em>Please note that some SQL features might not be supported. Check <a href="reference.html#supported-sql-syntax-reference">here</a> for a reference of the SQL features&#39; support for each dataset provider.</em></p>
<h2 id='querying-datasets'>Querying datasets</h2>
<blockquote>
<p>Structure of the endpoint for executing a query:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/&lt;dataset.id&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;'</span>
</code></pre></div>
<p>In order to query a dataset, you&#39;ll need two pieces of information:</p>

<ul>
<li>The id of the dataset you&#39;re trying to query.</li>
<li>The SQL query that represents the data you are trying to retrieve.</li>
</ul>

<p>The <a href="reference.html#dataset">dataset documentation</a> covers different ways that you can use to browse the existing dataset catalog or upload your own, all of which will give you the details of a dataset, including the dataset id you&#39;ll need to query it.</p>

<p>The SQL query will have to be custom built by you to fit your needs, but a good starting point for newcomers would be something like <code>SELECT * FROM &lt;dataset.tableName&gt; limit 10</code>.</p>

<p><em>Notice: the <code>limit</code> parameter restricts our results to 10 rows, and is not required. However, for our learning purposes, this is useful, as it keeps the API responses small and fast.</em></p>

<p>Most of the SQL query is up to you to define, based on your needs and the <a href="reference.html#supported-sql-syntax-reference">support provided for the dataset type you are using</a>. The <code>FROM</code> clause, however, does use a special value - the dataset&#39;s <code>tableName</code> value, which you can also get from the <a href="reference.html/#dataset">dataset documentation</a> described above.</p>

<blockquote>
<p>Example endpoint for executing a query:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>
</code></pre></div>
<p>With both pieces of information at hand, you can now send your query to the API and get the response. The example <code>cURL</code> to the side shows how that would look like.</p>
<h3 id='query-response-body'>Query response body</h3>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1830</span><span class="p">,</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MEX"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mexico"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de Mxico"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Distrito Federal"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1109</span><span class="p">,</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTI"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Haiti"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L'Artibonite"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dpartement"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cloneUrl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"http_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/dataset/098b33df-6871-4e53-a5ff-b56a7d989f9a/clone"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"datasetUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT%20*%20FROM%20gadm28_adm1%20limit%2010"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"your"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"apps"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The following table describes the response body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>Array</td>
<td>Array of objects that correspond to the result of the query execution. The data structure varies according to <code>SELECT</code> clause of your query, or the structure of dataset being queried.</td>
</tr>
<tr>
<td>meta</td>
<td>Object</td>
<td>Object with metadata regarding the query executed.</td>
</tr>
<tr>
<td>meta.cloneUrl</td>
<td>Object</td>
<td>Object with information for creating a new dataset from the current query execution.</td>
</tr>
<tr>
<td>meta.cloneUrl.http_method</td>
<td>String</td>
<td>The HTTP method that should be used for the request to create a new dataset from the current query execution. Read the documentation on <a href="reference.html#cloning-a-dataset">cloning a dataset</a> for more info.</td>
</tr>
<tr>
<td>meta.cloneUrl.url</td>
<td>String</td>
<td>The API endpoint path that should be used for the request to create a new dataset from the current query execution.</td>
</tr>
<tr>
<td>meta.cloneUrl.body</td>
<td>Object</td>
<td>The body request data that should be provided for creating a new dataset from the current query execution.</td>
</tr>
</tbody></table>
<h3 id='query-endpoint-parameters'>Query endpoint parameters</h3>
<blockquote>
<p>Example of requesting the query results as CSV data:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;format=csv'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>"alert__date",
"_id"
"2019-04-12",
"AW6O0fqMLu2ttL7ZDM4P"
"2015-08-22",
"AW6O0fqMLu2ttL7ZDM4T"
</code></pre></div>
<blockquote>
<p>Example of requesting to freeze the query results:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;freeze=true'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/query-freeze/1589458072773.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The following parameters can be provided as query parameters, in order to customize the output of the response returned:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query to be executed. This parameter changes the data returned in the query response body.</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td>format</td>
<td>The format of the returned response. By default, JSON format is assumed (<code>json</code>), but you can also request the response as CSV (<code>csv</code>), in which case the returned response will contain the CSV contents of the response. <strong>This parameter will only be considered for document-based datasets.</strong></td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td>freeze</td>
<td>The <code>freeze</code> parameter, when provided as <code>true</code>, will create a file with the results of the execution of the query and return the URL for that file. <strong>Please note that you should be authenticated in order to request freezing the results of query executions.</strong></td>
<td>Boolean</td>
<td>No</td>
</tr>
<tr>
<td>geostore</td>
<td>Read more about the geostore query parameter <a href="reference.html#filter-query-results-by-geostore">here</a>.</td>
<td>String</td>
<td>No</td>
</tr>
</tbody></table>
<h4 id='filter-query-results-by-geostore'>Filter query results by geostore</h4>
<blockquote>
<p>Example query providing a geostore id as query parameter to filter the results:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/1d7085f7-11c7-4eaf-a29a-5a4de57d010e?sql=SELECT * FROM dis_001_significant_earthquakes LIMIT 5&amp;geostore=972c24e1da2c2baacc7572ee9501abdc'</span>
</code></pre></div>
<p>Some dataset providers support receiving a <code>geostore</code> query parameter. When providing this parameter, you can request geo-referenced data that fits within the bounding box of the geostore with id provided. You can obtain the id of the geostore using the <a href="reference.html#geostore">RW API Geostore API</a>. If the data is not geo-referenced, or if the dataset provider does not support the <code>geostore</code> query parameter, it will be ignored.</p>

<p>The following providers support this parameter:</p>

<ul>
<li>CartoDB (<code>carto</code>)</li>
<li>ArcGIS (<code>featureservice</code>)</li>
<li>Google Earth Engine (<code>gee</code>)</li>
<li>BigQuery (<code>bigquery</code>)</li>
<li>Rasdaman (<code>rasdaman</code>)</li>
<li>NEX-GDDP (<code>nexgddp</code>)</li>
<li>Loca (<code>loca</code>)</li>
</ul>
<h3 id='alternative-ways-for-querying-datasets'>Alternative ways for querying datasets</h3>
<p>While the GET request described above is the recommended way of querying datasets, there are other ways to query the RW API datasets that may be more suited for specific use cases.</p>
<h4 id='using-the-dataset-slug-instead-of-the-id'>Using the dataset slug instead of the id</h4>
<blockquote>
<p>Example query not using the dataset id in the request path, and using the dataset slug in the FROM clause:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/Glad-Alerts-Daily-Geostore-User-Areas_3?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
</code></pre></div>
<p>When referencing a dataset&#39;s id in a query, you have the option to use the dataset&#39;s slug instead, obtaining the same result. This is also applicable to the alternative query methods described in the sections below.</p>
<h4 id='post-requests'>POST requests</h4>
<blockquote>
<p>The same query executed as GET, and as a POST request providing the SQL as request body param:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "sql": "SELECT alert__date from gadm28_adm1 limit 2"
}'</span>
</code></pre></div>
<p>Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same query will see a great performance increase, even if they are made by a different application or client.</p>

<p>Alternatively, you can also query a dataset using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your query string be too long. Using a POST request is the recommended solution for these cases. See the example on the side to see how you can query a dataset with a POST request.</p>
<h4 id='dataset-id-as-the-from-clause'>Dataset id as the FROM clause</h4>
<blockquote>
<p>Three different but equivalent syntaxes for the same query:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>

curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span>

curl <span class="nt">-i</span> <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/query'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "sql": "SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10"
}'</span>

</code></pre></div>
<p>The examples we&#39;ve seen so far expect the URL to have the <code>/query/&lt;dataset id or slug&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;</code> format. However, you can also use the equivalent
<code>/query?sql=SELECT * FROM &lt;dataset id&gt;</code> syntax. You can also use this alternative syntax with POST requests.</p>
<h4 id='redundant-from-clause-document-based-datasets-only'>Redundant FROM clause (document based datasets only)</h4>
<blockquote>
<p>Example query providing a document-based dataset id in the request path or as the FROM clause:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT alert__date FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e limit 10'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date FROM data limit 10'</span>
</code></pre></div>
<p>When querying a document based dataset using either GET or POST <code>/query/&lt;dataset id or slug&gt;</code> request, the <code>FROM</code> clause is required but ignored, meaning you don&#39;t have to provide the dataset&#39;s <code>tableName</code> as you normally would. The example on the side illustrates this.</p>
<h2 id='downloading-data-from-a-dataset'>Downloading data from a dataset</h2>
<blockquote>
<p>Structure of the endpoint for downloading the results of a query:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/&lt;dataset.id&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;'</span>
</code></pre></div>
<blockquote>
<p>Example endpoint for downloading the results of a query:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>
</code></pre></div>
<p>The download endpoint allows you to download the results of the execution of a query over a dataset. This endpoint is greatly based on the <a href="reference.html#querying-datasets">query datasets</a> endpoint, so we strongly suggest you read that section of the documentation.</p>

<p><strong>Note: Some dataset providers do not support downloading query results. You can download query results for the following dataset providers:</strong></p>

<ul>
<li>Google Earth Engine</li>
<li>Document-based datasets</li>
<li>Carto</li>
<li>BigQuery</li>
<li>ArcGIS FeatureService</li>
</ul>

<p>Like when querying datasets, in order to download the results of the execution of query, you&#39;ll need two pieces of information:</p>

<ul>
<li>The id of the dataset you&#39;re trying to download the query execution results.</li>
<li>The SQL query that represents the data you are trying to download.</li>
</ul>

<p>The <a href="reference.html/#dataset">dataset documentation</a> covers different ways that you can use to browse the existing dataset catalog or upload your own, all of which will give you the details of a dataset, including the dataset id you&#39;ll need to query it.</p>

<p>The SQL query will have to be custom built by you to fit your needs, but a good starting point for newcomers would be something like <code>SELECT * FROM &lt;dataset.tableName&gt; limit 10</code>.</p>

<p><em>Notice: the <code>limit</code> parameter restricts our results to 10 rows, and is not required. However, for our learning purposes, this is useful, as it keeps the API responses small and fast.</em></p>

<p>As with the query endpoint, the <code>FROM</code> clause should reference the dataset&#39;s <code>tableName</code> value, which you can also get from the <a href="reference.html/#dataset">dataset documentation</a> described above. And also, don&#39;t forget that you can check the <a href="reference.html#supported-sql-syntax-reference">support provided for the dataset type you are using</a> if you are having trouble writing your SQL query.</p>
<h3 id='download-response-body'>Download response body</h3>
<blockquote>
<p>Example of downloading query results (by default, CSV data is assumed):</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date, alert__count from gadm28_adm1 limit 2'</span>
</code></pre></div>
<blockquote>
<p>Example CSV response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>"alert__date",
"alert__count",
"_id"
"2019-04-12",
5,
"AW6O0fqMLu2ttL7ZDM4P"
"2015-08-22",
6,
"AW6O0fqMLu2ttL7ZDM4T"
</code></pre></div>
<blockquote>
<p>Example of downloading query results requesting format as JSON:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date, alert__count from gadm28_adm1 limit 2&amp;format=json'</span>
</code></pre></div>
<blockquote>
<p>Example JSON response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"alert__date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-04-12"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"alert__count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AW6O0fqMLu2ttL7ZDM4P"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"alert__date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"alert__count"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AW6O0fqMLu2ttL7ZDM4T"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The response body of executing the download endpoint will contain the data to be downloaded. You can use the <code>format</code> query parameter to customize the format of the data returned. By default, <code>format=csv</code> will be assumed, so you will receive the corresponding query results the actual CSV data in the response body. If you provide <code>format=json</code>, the returned result will be a JSON object with a <code>data</code> index containing the results of the execution of the query provided.</p>
<h3 id='download-execution-errors'>Download execution errors</h3>
<p>Calling the download endpoint might sometimes result in an error being returned. The following table describes the possible errors that can occur when downloading query execution results:</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>SQL or FS required</td>
<td>The required <code>sql</code> field is missing either as query string parameter or in the request body.</td>
</tr>
<tr>
<td>400</td>
<td>- format: format must be in [json,csv]. -</td>
<td>If provided, <code>format</code> must be either <code>csv</code> or <code>json</code>.</td>
</tr>
<tr>
<td>500</td>
<td>Internal server error</td>
<td>The error message might vary in this case.</td>
</tr>
</tbody></table>
<h3 id='download-endpoint-parameters'>Download endpoint parameters</h3>
<blockquote>
<p>Example of requesting to freeze the download results:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;freeze=true'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/query-freeze/1589458072773.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can use the following query parameters to customize the output of the download query execution results endpoint:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query to be executed. This parameter changes the data returned in the query response body.</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td>format</td>
<td>The format of the returned response. By default, CSV format is assumed (<code>csv</code>), but you can also request the response as JSON (<code>json</code>). Check the section on the <a href="reference.html#download-response-body">download endpoint response body</a> for some examples of how the <code>format</code> query parameter can be used.</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td>freeze</td>
<td>The <code>freeze</code> parameter, when provided as <code>true</code>, will create a file with the results of the execution of the query and return the URL for that file. <strong>Please note that you should be authenticated in order to request freezing the results of query executions.</strong></td>
<td>Boolean</td>
<td>No</td>
</tr>
<tr>
<td>geostore</td>
<td>Read more about the geostore query parameter <a href="reference.html#filter-download-results-by-geostore">here</a>.</td>
<td>String</td>
<td>No</td>
</tr>
</tbody></table>
<h4 id='filter-download-results-by-geostore'>Filter download results by geostore</h4>
<blockquote>
<p>Example download request providing a geostore id as query parameter to filter the results:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/1d7085f7-11c7-4eaf-a29a-5a4de57d010e?sql=SELECT * FROM dis_001_significant_earthquakes LIMIT 5&amp;geostore=972c24e1da2c2baacc7572ee9501abdc'</span>
</code></pre></div>
<p>Some dataset providers support receiving a <code>geostore</code> query parameter. When providing this parameter, you can request geo-referenced data that fits within the bounding box of the geostore with id provided. You can obtain the id of the geostore using the <a href="reference.html#geostore">RW API Geostore API</a>. If the data is not geo-referenced, or if the dataset provider does not support the <code>geostore</code> query parameter, it will be ignored.</p>

<p>The following providers support this parameter:</p>

<ul>
<li>CartoDB (<code>carto</code>)</li>
<li>ArcGIS (<code>featureservice</code>)</li>
<li>Google Earth Engine (<code>gee</code>)</li>
<li>BigQuery (<code>bigquery</code>)</li>
<li>Rasdaman (<code>rasdaman</code>)</li>
<li>NEX-GDDP (<code>nexgddp</code>)</li>
<li>Loca (<code>loca</code>)</li>
</ul>
<h3 id='alternative-ways-for-downloading-query-execution-results'>Alternative ways for downloading query execution results</h3>
<p>As in the case of <a href="reference.html#alternative-ways-for-querying-datasets">querying datasets</a>, there are some alternative ways that you can use for downloading query execution results. While the GET request described above is the recommended way of downloading query results, there are other ways to download query results that may be more suited for specific use cases.</p>
<h4 id='using-the-dataset-slug-instead-of-the-id-2'>Using the dataset slug instead of the id</h4>
<blockquote>
<p>Example request for downloading the query execution results not using the dataset id in the request path, and using the dataset slug in the FROM clause:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/Glad-Alerts-Daily-Geostore-User-Areas_3?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
</code></pre></div>
<p>When referencing a dataset&#39;s id in th SQL query, you have the option to use the dataset&#39;s slug instead, obtaining the same result. This is also applicable to the alternative download methods described in the sections below.</p>
<h4 id='post-requests-2'>POST requests</h4>
<blockquote>
<p>The same download request executed as GET, and as a POST request providing the SQL as request body param:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "sql": "SELECT alert__date from gadm28_adm1 limit 2"
}'</span>
</code></pre></div>
<p>Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same download endpoint call will see a great performance increase, even if they are made by a different application or client.</p>

<p>Alternatively, you can also download the query results using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your SQL query string be too long. Using a POST request is the recommended solution for these cases. See the example on the side to see how you can download the query execution results with a POST request.</p>
<h4 id='dataset-id-as-the-from-clause-2'>Dataset id as the FROM clause</h4>
<blockquote>
<p>Three different but equivalent syntaxes for the same call to the download endpoint:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>

curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span>

curl <span class="nt">-i</span> <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/download'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "sql": "SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10"
}'</span>

</code></pre></div>
<p>The examples we&#39;ve seen so far expect the URL to have the <code>/download/&lt;dataset id or slug&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;</code> format. However, you can also use the equivalent <code>/download?sql=SELECT * FROM &lt;dataset id&gt;</code> syntax. This alternative syntax is also available for POST requests.</p>
<h4 id='redundant-from-clause-document-based-datasets-only-2'>Redundant FROM clause (document-based datasets only)</h4>
<blockquote>
<p>Example download providing a document-based dataset id in the request path or as the FROM clause:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download?sql=SELECT alert__date FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e limit 10'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date FROM data limit 10'</span>
</code></pre></div>
<p>When downloading the query results for a document based dataset using either GET or POST <code>/download/&lt;dataset id or slug&gt;</code> request, the <code>FROM</code> clause is required but ignored, meaning you don&#39;t have to provide the dataset&#39;s <code>tableName</code> as you normally would. The example on the side illustrates this.</p>
<h2 id='deleting-data-from-a-dataset'>Deleting data from a dataset</h2>
<blockquote>
<p>Example requests to delete data from a dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/:dataset_id?sql=DELETE FROM index_bf86b945c4ec41d2b5b7af00f3f61423'</span>
curl <span class="nt">-i</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/:dataset_id?sql=DELETE FROM index_bf86b945c4ec41d2b5b7af00f3f61423 WHERE x = "y"'</span>
</code></pre></div>
<p>Write queries such as <code>INSERT</code> or <code>UPDATE</code> are not supported in the RW API. You can use dataset endpoints to <a href="reference.html#concatenate-and-append-data-to-a-document-based-dataset">append</a> or <a href="reference.html#overwrite-data-for-a-document-based-dataset">overwrite</a> a given dataset&#39;s data, but you cannot use SQL to write data into the datasets.</p>

<p>Most providers do not support <code>DELETE</code> queries either. However, in the case of <strong>document-based datasets</strong> (i.e. where the <code>connectorType</code> is <code>document</code>), you can delete the dataset&#39;s data via SQL <code>DELETE</code> query. Executing a <code>DELETE</code> query requires authentication, and additionally, one of the following conditions must be met:</p>

<ul>
<li>have role <code>MANAGER</code> and own the dataset;</li>
<li>have role <code>ADMIN</code> and belong to all the apps to which the dataset is associated.</li>
</ul>

<p>If the query is successfully executed, the request will return an HTTP response with status code <code>204 No Content</code>. Please note that executing a delete query is an <strong>asynchronous process</strong> - as in the case of appending or overwriting a dataset&#39;s data, the dataset will have its status updated to <code>pending</code>, and updated once again to <code>saved</code> once the deletion process is completed.</p>
<h3 id='delete-query-execution-errors'>Delete query execution errors</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>Not authorized to execute DELETE query - the logged user provided does not meet at least one of the conditions required to be able to delete the dataset data.</td>
</tr>
<tr>
<td>400</td>
<td>Unsupported query element detected</td>
<td>The SQL query provided is not valid, or the syntax provided is not supported.</td>
</tr>
</tbody></table>
<h2 id='supported-sql-syntax-reference'>Supported SQL syntax reference</h2>
<p>This section details the support for SQL syntax for the different dataset providers RW API supports. Keep in mind that your HTTP request parameters (like <code>sql</code>) should always be escaped according to the official HTTP specification. You can use <a href="https://www.urlencoder.org/">this online tool</a> as an example of proper URL parameter encoding.</p>
<h3 id='cartodb-datasets'>CartoDB datasets</h3>
<p>This section describes the SQL support for querying datasets with provider <code>cartodb</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20LIMIT%205">SELECT * FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20count(*)%20FROM%20edi">SELECT count(*) FROM edi</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20LIMIT%205">SELECT region, overall_score FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting DISTINCT values for specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20DISTINCT(region)%20FROM%20edi%20LIMIT%205">SELECT DISTINCT(region) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting columns AND counting all rows</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20count(*)%20FROM%20edi%20LIMIT%205">SELECT region, count(*) FROM edi LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20AVG(overall_score)%20as%20alias%20FROM%20edi%20LIMIT%205">SELECT AVG(overall_score) as alias FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20AVG(overall_score)%20FROM%20edi%20LIMIT%205">SELECT AVG(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20MAX(overall_score)%20FROM%20edi%20LIMIT%205">SELECT MAX(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20MIN(overall_score)%20FROM%20edi%20LIMIT%205">SELECT MIN(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20SUM(overall_score)%20FROM%20edi%20LIMIT%205">SELECT SUM(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%200b9f0100-ce5b-430f-ad8f-3363efa05481%20LIMIT%205">SELECT * FROM 0b9f0100-ce5b-430f-ad8f-3363efa05481 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20Environmental-Democracy-Index-1490086842552%20LIMIT%205">SELECT * FROM Environmental-Democracy-Index-1490086842552 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20LIMIT%205">SELECT * FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3E%202%20LIMIT%205">SELECT * FROM edi WHERE overall_score &gt; 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3E%3D%202%20LIMIT%205">SELECT * FROM edi WHERE overall_score &gt;= 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3D%202.1%20LIMIT%205">SELECT * FROM edi WHERE overall_score = 2.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt; 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20AND%20justice_pillar_score%20%3E%201%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 AND justice_pillar_score &gt; 1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20OR%20justice_pillar_score%20%3E%201%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 OR justice_pillar_score &gt; 1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20BETWEEN%202%20AND%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score BETWEEN 2 AND 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: LIKE filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20region%20LIKE%20'Europ%25'%20LIMIT%205">SELECT * FROM edi WHERE region LIKE &#39;Europ%&#39; LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20GROUP%20BY%20region%20LIMIT%205">SELECT region FROM edi GROUP BY region LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20GROUP%20BY%20region%2C%20overall_score%20LIMIT%205">SELECT region, overall_score FROM edi GROUP BY region, overall_score LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Aggregate functions used with GROUP BY statements</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20COUNT(*)%20as%20count%20FROM%20edi%20GROUP%20BY%20region%20LIMIT%205">SELECT region, COUNT(*) as count FROM edi GROUP BY region LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Special grouping by range function</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20count(*)%20FROM%20edi%20GROUP%20BY%20range(overall_score%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM edi GROUP BY range(overall_score, 0,1,2,3,4) LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20ORDER%20BY%20region%20LIMIT%205">SELECT region FROM edi ORDER BY region LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20ORDER%20BY%20region%20DESC%20LIMIT%205">SELECT region FROM edi ORDER BY region DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20ORDER%20BY%20region%2C%20overall_score%20LIMIT%205">SELECT region, overall_score FROM edi ORDER BY region, overall_score LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20ORDER%20BY%20region%2C%20overall_score%20DESC%20LIMIT%205">SELECT region, overall_score FROM edi ORDER BY region, overall_score DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205">SELECT region FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205%20OFFSET%2010">SELECT region FROM edi LIMIT 5 OFFSET 10</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205%2C%2010">SELECT region FROM edi LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>
<h4 id='cartodb-geo-spatial-query-support'>CartoDB geo-spatial query support</h4>
<p>CartoDB datasets can be queried using <a href="https://postgis.net/docs/reference.html">PostGIS functions</a>. This means if your dataset contains geo-referenced data, you can execute PostGIS functions on the data to extract the information you need. The table below displays some examples of supported PostGIS functions:</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_MetaData.html">PostGIS: ST_MetaData</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_METADATA(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_METADATA(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_BandMetaData.html">PostGIS: ST_BandMetaData</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_BANDMETADATA(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_BANDMETADATA(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_SummaryStats.html">PostGIS: ST_SummaryStats</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_SUMMARYSTATS(the_raster_webmercator%2C%20true)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_SUMMARYSTATS(the_raster_webmercator, true) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_Histogram.html">PostGIS: ST_Histogram</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_HISTOGRAM(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_HISTOGRAM(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_ValueCount.html">PostGIS: ST_ValueCount</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_VALUECOUNT(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_VALUECOUNT(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>Using PostGIS functions in WHERE clause</td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20*%20FROM%20sp_richness%20WHERE%20ST_METADATA(the_raster_webmercator)%20IS%20NOT%20NULL%20LIMIT%205">SELECT * FROM sp_richness WHERE ST_METADATA(the_raster_webmercator) IS NOT NULL LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>Using PostGIS functions in GROUP BY clause</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20*%20FROM%20sp_richness%20GROUP%20BY%20ST_SUMMARYSTATS(the_raster_webmercator%2C%20true)%20IS%20NOT%20NULL%20LIMIT%205">SELECT * FROM sp_richness GROUP BY ST_SUMMARYSTATS(the_raster_webmercator, true) IS NOT NULL LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>Using PostGIS functions in ORDER BY clause</td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20*%20FROM%20sp_richness%20ORDER%20BY%20ST_METADATA(the_raster_webmercator)%20IS%20NOT%20NULL%20LIMIT%205">SELECT * FROM sp_richness ORDER BY ST_METADATA(the_raster_webmercator) IS NOT NULL LIMIT 5</a></td>
</tr>
</tbody></table>
<h3 id='arcgis-feature-service-datasets'>ArcGIS Feature Service datasets</h3>
<p>This section describes the SQL support for querying datasets with connector type <code>rest</code> and provider <code>featureservice</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT * FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20count(*)%20FROM%20cdonexradMapServer0">SELECT count(*) FROM cdonexradMapServer0</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20DISTINCT(STATION_NAME)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT DISTINCT(STATION_NAME) FROM cdonexradMapServer0 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting columns AND counting all rows</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20count(*)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT STATION_NAME, count(*) FROM cdonexradMapServer0 LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20AVG(ELEVATION)%20as%20alias%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT AVG(ELEVATION) as alias FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20AVG(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT AVG(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20MAX(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT MAX(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20MIN(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT MIN(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20SUM(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT SUM(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%200b9e546c-f42a-4b26-bad3-7d606f58961c%20LIMIT%205">SELECT * FROM 0b9e546c-f42a-4b26-bad3-7d606f58961c LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20NOAA-NEXt-Generation-RADar-NEXRAD-Products-Locations-1490086842546%20LIMIT%205">SELECT * FROM NOAA-NEXt-Generation-RADar-NEXRAD-Products-Locations-1490086842546 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT * FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3E%203587%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &gt; 3587 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3E%3D%203587%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &gt;= 3587 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3D%205870%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION = 5870 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%205000%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt; 5000 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%3D%205000%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt;= 5000 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%3D%205000%20AND%20LATITUDE%20%3E%2035.23333%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt;= 5000 AND LATITUDE &gt; 35.23333 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%3D%205000%20OR%20LATITUDE%20%3E%2035.23333%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt;= 5000 OR LATITUDE &gt; 35.23333 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20BETWEEN%203587%20AND%205000%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION BETWEEN 3587 AND 5000 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: LIKE filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20STATION_NAME%20LIKE%20'AMARI%25'%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE STATION_NAME LIKE &#39;AMARI%&#39; LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20GROUP%20BY%20STATION_NAME%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 GROUP BY STATION_NAME LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20GROUP%20BY%20STATION_NAME%2C%20ELEVATION%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 GROUP BY STATION_NAME, ELEVATION LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Aggregate functions used with GROUP BY statements</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20COUNT(*)%20as%20count%20FROM%20cdonexradMapServer0%20GROUP%20BY%20STATION_NAME%20LIMIT%205">SELECT STATION_NAME, COUNT(*) as count FROM cdonexradMapServer0 GROUP BY STATION_NAME LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Special grouping by range function</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20count(*)%20FROM%20cdonexradMapServer0%20GROUP%20BY%20range(ELEVATION%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM cdonexradMapServer0 GROUP BY range(ELEVATION, 0,1,2,3,4) LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 ORDER BY STATION_NAME LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%20DESC%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 ORDER BY STATION_NAME DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%2C%20ELEVATION%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 ORDER BY STATION_NAME, ELEVATION LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%2C%20ELEVATION%20DESC%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 ORDER BY STATION_NAME, ELEVATION DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20LIMIT%205%20OFFSET%2010">SELECT STATION_NAME FROM cdonexradMapServer0 LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20LIMIT%205%2C%2010">SELECT STATION_NAME FROM cdonexradMapServer0 LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>
<h3 id='gee-datasets'>GEE datasets</h3>
<p>This section describes the SQL support for querying datasets with connector type <code>rest</code> and providers <code>gee</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20count(*)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index">SELECT count(*) FROM users/resourcewatch_wri/foo_024_vegetation_health_index</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20DISTINCT(system%3Aindex)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT DISTINCT(system:index) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting columns AND counting all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20count(*)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT system:index, count(*) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Aliasing aggregate function results such as AVG in SELECT</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20AVG(system%3Aasset_size)%20as%20alias%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT AVG(system:asset_size) as alias FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20AVG(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT AVG(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20MAX(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT MAX(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20MIN(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT MIN(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20SUM(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT SUM(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>FROM: Using dataset id in FROM statement</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20c12446ce-174f-4ffb-b2f7-77ecb0116aba%20LIMIT%205">SELECT * FROM c12446ce-174f-4ffb-b2f7-77ecb0116aba LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>FROM: Using dataset slug in FROM statement</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20foo024nrt-Vegetation-Health-Index_replacement_4%20LIMIT%205">SELECT * FROM foo024nrt-Vegetation-Health-Index_replacement_4 LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3E%2036975655%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &gt; 36975655 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3E%3D%2036975655%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &gt;= 36975655 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3D%2037153685%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size = 37153685 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%2037180450%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt; 37180450 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%3D%2037180450%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt;= 37180450 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: Conjunction (AND) filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%3D%2037180450%20AND%20system%3Atime_start%20%3E%201572739200000%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt;= 37180450 AND system:time_start &gt; 1572739200000 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: Disjunction (OR) filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%3D%2037180450%20OR%20system%3Atime_start%20%3E%201572739200000%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt;= 37180450 OR system:time_start &gt; 1572739200000 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: BETWEEN filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20BETWEEN%2036975655%20AND%2037180450%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size BETWEEN 36975655 AND 37180450 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: LIKE filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aindex%20LIKE%20'foo_024_vegetation_health_index%25'%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:index LIKE &#39;foo_024_vegetation_health_index%&#39; LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Group results by a single column</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20system%3Aindex%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY system:index LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Group results by multiple columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20system%3Aindex%2C%20system%3Aasset_size%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY system:index, system:asset_size LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Aggregate functions used with GROUP BY statements</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20COUNT(*)%20as%20count%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20system%3Aindex%20LIMIT%205">SELECT system:index, COUNT(*) as count FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY system:index LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Special grouping by range function</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20count(*)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20range(system%3Aasset_size%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY range(system:asset_size, 0,1,2,3,4) LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by one column</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by one column descending</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%20DESC%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index DESC LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by multiple column</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%2C%20system%3Aasset_size%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index, system:asset_size LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by multiple column descending</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%2C%20system%3Aasset_size%20DESC%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index, system:asset_size DESC LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205%20OFFSET%2010">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205%2C%2010">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>
<h3 id='document-based-datasets'>Document-based datasets</h3>
<p>This section describes the SQL support for querying datasets with connector type <code>document</code> and providers <code>csv</code>, <code>tsv</code>, <code>json</code> or <code>xml</code>.</p>

<p>While the API has it&#39;s own query handling mechanism, it mostly relies on <a href="https://opendistro.github.io/for-elasticsearch-docs/docs/sql/">Opendistro for Elasticsearch 1.x SQL support</a>, meaning its limitations will also apply to queries done to document-based datasets.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20LIMIT%205">SELECT * FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20count(*)%20FROM%20data">SELECT count(*) FROM data</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20DISTINCT(bra_biome__name)%20FROM%20data%20LIMIT%205">SELECT DISTINCT(bra_biome__name) FROM data LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting columns AND counting all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20count(*)%20FROM%20data%20LIMIT%205">SELECT bra_biome__name, count(*) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20AVG(alert__count)%20as%20alias%20FROM%20data%20LIMIT%205">SELECT AVG(alert__count) as alias FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20AVG(alert__count)%20FROM%20data%20LIMIT%205">SELECT AVG(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20MAX(alert__count)%20FROM%20data%20LIMIT%205">SELECT MAX(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20MIN(alert__count)%20FROM%20data%20LIMIT%205">SELECT MIN(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20SUM(alert__count)%20FROM%20data%20LIMIT%205">SELECT SUM(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%209be3bf63-97fc-4bb0-b913-775ccae3cf9e%20LIMIT%205">SELECT * FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20Glad-Alerts-Daily-Geostore-User-Areas_3%20LIMIT%205">SELECT * FROM Glad-Alerts-Daily-Geostore-User-Areas_3 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20LIMIT%205">SELECT * FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3E%202%20LIMIT%205">SELECT * FROM data WHERE alert__count &gt; 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3E%3D%202%20LIMIT%205">SELECT * FROM data WHERE alert__count &gt;= 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3D%205%20LIMIT%205">SELECT * FROM data WHERE alert__count = 5 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%208%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt; 8 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20AND%20alert_area__ha%20%3E%200.1%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 AND alert_area__ha &gt; 0.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20OR%20alert_area__ha%20%3E%200.1%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 OR alert_area__ha &gt; 0.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20BETWEEN%202%20AND%208%20LIMIT%205">SELECT * FROM data WHERE alert__count BETWEEN 2 AND 8 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: LIKE filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20bra_biome__name%20LIKE%20'Amaz%25'%20LIMIT%205">SELECT * FROM data WHERE bra_biome__name LIKE &#39;Amaz%&#39; LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20GROUP%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name FROM data GROUP BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20GROUP%20BY%20bra_biome__name%2C%20alert__count%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data GROUP BY bra_biome__name, alert__count LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Aggregate functions used with GROUP BY statements</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20COUNT(*)%20as%20count%20FROM%20data%20GROUP%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name, COUNT(*) as count FROM data GROUP BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Special grouping by range function</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20count(*)%20FROM%20data%20GROUP%20BY%20range(alert__count%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM data GROUP BY range(alert__count, 0,1,2,3,4) LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20ORDER%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name FROM data ORDER BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20ORDER%20BY%20bra_biome__name%20DESC%20LIMIT%205">SELECT bra_biome__name FROM data ORDER BY bra_biome__name DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20ORDER%20BY%20bra_biome__name%2C%20alert__count%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data ORDER BY bra_biome__name, alert__count LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20ORDER%20BY%20bra_biome__name%2C%20alert__count%20DESC%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data ORDER BY bra_biome__name, alert__count DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205">SELECT bra_biome__name FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205%20OFFSET%2010">SELECT bra_biome__name FROM data LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205%2C%2010">SELECT bra_biome__name FROM data LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>
<h4 id='troubleshooting-sql-queries-for-document-based-datasets'>Troubleshooting SQL queries for document-based datasets</h4>
<p>This SQL syntax supported when running queries for document-based datasets has some known limitations:</p>

<ul>
<li>Very large SQL queries may run into some parsing issues.</li>
<li>Sorting by aggregated fields is not supported. For instance, the following statement is <strong>not</strong> supported: <code>GROUP BY age ORDER BY COUNT(*)</code>.</li>
<li>Using aggregation functions on top of scalar functions is also not possible. For instance, the following statement is <strong>not</strong> supported: <code>SELECT MAX(abs(age))</code>.</li>
<li>Sub-queries are only supported to a small degree, but the usage of <code>GROUP BY</code> or <code>HAVING</code> in the sub-query is not supported. For instance, the following statement <strong>is</strong> supported: <code>SELECT * FROM (SELECT first_name, last_name FROM emp WHERE last_name NOT LIKE &#39;%a%&#39;) WHERE first_name LIKE &#39;A%&#39; ORDER BY 1</code>, but statements with a higher level of complexity than applying simple conditions or orderings in the sub-query might not be supported.</li>
<li>The usage of scalar functions on nested fields in <code>ORDER BY</code> or <code>WHERE</code> clauses is limited. For instance, the following statement is <strong>not</strong> supported: <code>ORDER BY YEAR(dep.start_date)</code>.</li>
</ul>

<p>You can read more about the limitations of using SQL with document-based datasets <a href="https://opendistro.github.io/for-elasticsearch-docs/docs/sql/">here</a>.</p>
<h3 id='rasdaman-datasets'>Rasdaman datasets</h3>
<p>SQL-like queries can be employed for accessing data stored in Rasdaman datasets. Subsets on the original axes of the data may be provided in the WHERE statement. So far, only operations that result in a single scalar can be obtained from Rasdaman - averages, minimums, maximums.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-XGET</span> <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT avg(Green) from 18c0b71d-2f55-4a45-9e5b-c35db3ebfe94 where Lat &gt; 0 and  Lat &lt; 45'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;token&gt;'</span>
</code></pre></div><h3 id='nex-gddp-and-loca-datasets'>NEX-GDDP and Loca datasets</h3>
<blockquote>
<p>Example of a query for a NEX-GDDP/Loca dataset, providing lat and lon as query parameters:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/aaadd6c3-93ea-44bc-ba8b-7af3f40d39e1?sql=SELECT * FROM data&amp;lat=30&amp;lon=9'</span>
</code></pre></div>
<blockquote>
<p>Example of a query for a NEX-GDDP/Loca dataset, providing a geostore id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/query/aaadd6c3-93ea-44bc-ba8b-7af3f40d39e1?sql=SELECT * FROM data&amp;geostore=972c24e1da2c2baacc7572ee9501abdc'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.6352</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.4849</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.8861</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1971-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.0795</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.7174</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.3168</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1981-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.4218</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.9681</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.5883</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1991-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.697</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.2883</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.8852</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2001-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.7719</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.3449</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">245.0115</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2011-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Like with the other supported providers, you can use a SQL-like syntax to query datasets stored both in NASA NEX-GDDP or in Loca. However, these datasets always contain geo-referenced data, and so they expect that you always provide either a <code>lat</code> + <code>lon</code> pair, or a <code>geostore</code> id, in order to filter the returned data. If you don&#39;t provide either a geostore id or a lat+lon pair, the request will fail with status code <code>400 Bad Request</code>, with the following message: <code>No coordinates provided. Include geostore or lat &amp; lon</code>.</p>

<p>The examples on the side allow you to understand how you can provide either the <code>geostore</code> id or the <code>lat</code> + <code>lon</code> combination.</p>
<h3 id='wms-datasets'>WMS datasets</h3>
<p>Queries to WMS datasets are no longer supported.</p>
<h1 id='layer'>Layer</h1><h2 id='what-is-a-layer'>What is a layer?</h2>
<p>By now, you are probably already familiar with <a href="concepts.html#dataset">datasets</a> and <a href="concepts.html#query">querying</a> them (if you are not, now is a good time to get up to speed on those). Many of the datasets you&#39;ll find on the RW API - and perhaps the datasets you are uploading too - contain georeferenced information. If that&#39;s the case, then you may want to render your data as a web map layer, and the RW API&#39;s <em>layer</em> endpoints can help you with that.</p>

<p>As we&#39;ve seen in the <a href="concepts.html#layer">layer concept docs</a>, a RW API layer may store data in different formats, depending on the needs of its author. This is done using the several open format fields a layer has. To keep this documentation easy to understand, we&#39;ll spit our approach to layers into two sections:</p>

<ul>
<li>We&#39;ll first discuss the details of the endpoints that allow you to <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> layers, without focusing on the actual data contained in it.</li>
<li>In an future version of these docs, we&#39;ll dive deeper into some of the most common structures used to store data in the layer&#39;s open format fields.</li>
</ul>

<p>After viewing the documentation below, consider looking at the <a href="tutorials.html#mapbox-webmap-quickstart">webmap tutorial</a> for a step-by-step guide to rendering an actual layer on a web application.</p>
<h2 id='getting-all-layers'>Getting all layers</h2>
<blockquote>
<p>Getting a list of layers</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=634&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">628</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to list existing layers and their properties. The result is a paginated list of 10 layers, followed by metadata on total number of layers and pages, as well as useful pagination links. By default, only layers with <code>env</code> value <code>production</code> are displayed. In the sections below, well explore how you can customize this endpoint call to match your needs.</p>
<h3 id='getting-all-layers-for-a-dataset'>Getting all layers for a dataset</h3>
<blockquote>
<p>Return the layers associated with a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer"</span>
</code></pre></div>
<p>When handling layers, it&#39;s common to want to limit results to those layers associated with a given dataset. Besides the <a href="reference.html#filters92">filters</a> covered below, there&#39;s an additional convenience endpoint to get the layers associated with a dataset, as shown in this example. </p>
<h3 id='getting-all-layers-for-multiple-datasets'>Getting all layers for multiple datasets</h3>
<blockquote>
<p>Return all layers associated with two datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/layer/find-by-ids"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0dc39924-5736-4898-bda4-49cdc2f3b208"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOAA NEXt-Generation RADar (NEXRAD) Products (Locations)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"noaa-next-generation-radar-nexrad-products-locations"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b9e546c-f42a-4b26-bad3-7d606f58961c"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"USA"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arcgis"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"legacy"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"useCors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mi">0</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://gis.ncdc.noaa.gov/arcgis/rest/services/cdo/nexrad/MapServer"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamicMapLayer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEXRAD"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#FF0000"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gis.ncdc.noaa.gov/arcgis/rest/services/cdo/nexrad/MapServer/0/images/47768c7d812818af98d8da03a04d4fe4"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-07T14:50:22.578Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-12-18T12:08:25.703Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b021478-f4d3-4a1e-ae88-ab97f0085bc9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected change in average precipitation (in)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"projected-change-in-average-precipitation-between-u-s"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d443beca-d199-4872-9d7d-d82c45e43151"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected change in average precipitation for the A2 emissions scenario."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"USA"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arcgis"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"legacy"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"use-cors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mi">12</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://gis-gfw.wri.org/arcgis/rest/services/prep/nca_figures/MapServer"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"zoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"center"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">39.6395375643667</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-99.84375</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamicMapLayer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="mf">-125.61</span><span class="p">,</span><span class="w">
                        </span><span class="mf">24.73</span><span class="p">,</span><span class="w">
                        </span><span class="mf">-66.81</span><span class="p">,</span><span class="w">
                        </span><span class="mf">49.07</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choropleth"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt; -90"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#8C5107"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-90 - -60"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#BF822B"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T13:47:39.829Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-02T20:54:17.260Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows authenticated users to load all layers belonging to multiple datasets in a single request. </p>

<blockquote>
<p>Return all layers associated with two datasets, that are associated with either <code>rw</code> or <code>prep</code> applications </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/layer/find-by-ids"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app" "rw,prep"
}'</span>
</code></pre></div>
<blockquote>
<p>Return all layers associated with two datasets, that are associated with both <code>rw</code> and <code>prep</code> applications simultaneously </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/layer/find-by-ids"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app" "rw@prep"
}'</span>
</code></pre></div>
<p>Besides the required <code>ids</code> array, your request body may optionally include a <code>app</code> string value if you&#39;d like to filter the returned layers by their <code>application</code>:</p>

<ul>
<li>Use a single value, like <code>rw</code>, if you want to show only layers that have <code>rw</code> as one of their applications. </li>
<li>Use a comma separated list, like <code>rw,prep</code>, if you want to show only layers that have <code>rw</code> or <code>prep</code> as one of their applications.</li>
<li>Use a @ separated list, like <code>rw@prep</code>, if you want to show only layers that have both <code>rw</code> and <code>prep</code> as their applications.</li>
<li>Note that the the filters do not need to match on the full application list. For example, the filters <code>rw,prep</code> and <code>rw@prep</code> will both match a layer with the application list <code>[&quot;rw&quot;, &quot;prep&quot;, &quot;gfw&quot;]</code>.</li>
</ul>

<p>Please note that, unlike <a href="reference.html#getting-all-layers">getting all layers</a> or <a href="reference.html#getting-all-layers-for-a-dataset">getting all layers for a dataset</a>, this endpoint does not come with paginated results, nor does it support <a href="#pagination91">pagination</a>, <a href="#filters92">filtering</a> or <a href="#sorting93">sorting</a> or <a href="reference.html#include-entities-associated-with-the-layers">including related entities</a> described in their respective sections.</p>
<h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=2&amp;page[size]=25"</span>
</code></pre></div>
<p>The Layers service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your layers list.</p>
<h3 id='filters'>Filters</h3>
<blockquote>
<p>Return the layers filtered by those whose name contains emissions</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?name=emissions"</span>
</code></pre></div>
<blockquote>
<p>Return the layers filtered by dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?dataset=11de2bc1-368b-42ed-a207-aaff8ece752b"</span>
curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/11de2bc1-368b-42ed-a207-aaff8ece752b/layer"</span>
</code></pre></div>
<blockquote>
<p>Filter layers by published status</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?published=false"</span>
</code></pre></div>
<blockquote>
<p>Filter layers by environment</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?env=staging"</span>
</code></pre></div>
<blockquote>
<p>Return the layers filtered by those whose applications contain rw</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?app=rw"</span>
</code></pre></div>
<p>The layer list endpoint provides a wide range of filters that you can use to tailor your layer listing. Filtering layers adheres to the conventions defined in the <a href="concepts.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to these conventions, you will be able to use the great majority of the layer fields you&#39;ll find on the <a href="reference.html#layer-reference">layer reference</a> section, with the following exceptions:</p>

<ul>
<li><code>id</code></li>
<li><code>userName</code></li>
<li><code>userRole</code>: filtering by the role of the owning user can be done using the <code>user.role</code> query argument. If the requesting user does not have the ADMIN role, this filter is ignored.</li>
<li>Filtering by fields of type <code>Object</code> is not supported.</li>
</ul>

<p>Additionally, you can use the following filters:</p>

<ul>
<li><code>collection</code>: filters by a <a href="reference.html#collections">collection</a> id. Requires being authenticated.</li>
<li><code>favourite</code>: if defined, only the layers set by the user as <a href="reference.html#favorites">favorites</a> will be returned. Requires being authenticated.</li>
</ul>
<h3 id='sorting'>Sorting</h3>
<blockquote>
<p>Sorting layers</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=name"</span>
</code></pre></div>
<blockquote>
<p>Sorting layers by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=name,slug"</span>
</code></pre></div>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=-name,+slug"</span>
</code></pre></div>
<blockquote>
<p>Sorting layers by the role of the user who owns the layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=user.role"</span>
</code></pre></div>
<p>The Layer service currently supports sorting using the <code>sort</code> query parameter. Sorting layer adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="reference.html#layer-reference">Layer reference</a> section for a detailed description of the fields you can use when sorting. In addition to all layer model fields, you can sort the returned results by the name (using <code>user.name</code>) or role (using <code>user.role</code>) of the user owner of the layer. Keep in mind that sorting by user data is restricted to ADMIN users.</p>
<h3 id='include-entities-associated-with-the-layers'>Include entities associated with the layers</h3>
<p>When fetching layers, you can request additional entities to be loaded. The following entities are available:</p>
<h4 id='vocabulary'>Vocabulary</h4>
<blockquote>
<p>Loads vocabulary associated with each layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?includes=vocabulary"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="s2">"inuncoast"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"rp0002"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"historical"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"nosub"</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Loads all vocabulary entities associated with each layer. Internally this uses the <a href="reference.html#getting-all-vocabularies-and-tags-for-a-resource"><code>dataset/&lt;dataset_id&gt;/layer/&lt;layer_id&gt;/vocabulary</code></a> endpoint, and thus it&#39;s affected by its behavior - particularly, only vocabularies associated with the <code>rw</code> application will be listed. There&#39;s currently no way to modify this behavior.</p>
<h4 id='user'>User</h4>
<p>Loads the name and email address of the author of the layer. If you request this issue as an authenticated user with <code>ADMIN</code> role, you will additionally get the author&#39;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code>user</code> property will be added to the layer object.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?includes=user"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='requesting-multiple-additional-entities'>Requesting multiple additional entities</h4>
<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer?includes=user,vocabulary"</span>
</code></pre></div><h2 id='getting-a-layer-by-id-or-slug'>Getting a layer by id or slug</h2>
<blockquote>
<p>Getting a layer by id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;"</span>
curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer/&lt;layer_id&gt;"</span>
</code></pre></div>
<blockquote>
<p>Getting a layer by slug:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_slug&gt;"</span>
curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/layer/&lt;layer_slug&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
           </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
           </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"rw"</span><span class="w">
           </span><span class="p">],</span><span class="w">
           </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
           </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
           </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
           </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
           </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
           </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
           </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
           </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="nl">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                   </span><span class="nl">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                   </span><span class="nl">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                       </span><span class="p">{</span><span class="w">
                           </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                           </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                               </span><span class="nl">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                               </span><span class="nl">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                               </span><span class="nl">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                           </span><span class="p">}</span><span class="w">
                       </span><span class="p">}</span><span class="w">
                   </span><span class="p">]</span><span class="w">
               </span><span class="p">}</span><span class="w">
           </span><span class="p">},</span><span class="w">
           </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                   </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                       </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                   </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
           </span><span class="p">},</span><span class="w">
           </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
           </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
       </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-23T16:51:42.571Z"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-23T16:51:42.571Z"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If you know the id or the <code>slug</code> of a layer, then you can access it directly. Both id and <code>slug</code> are case-sensitive.</p>
<h3 id='include-entities-associated-with-the-layer'>Include entities associated with the layer</h3>
<p>You can load related <code>user</code> and <code>vocabulary</code> data in the same request. See <a href="reference.html#include-entities-associated-with-the-layers">this section</a> for more details.</p>
<h2 id='creating-a-layer'>Creating a layer</h2>
<blockquote>
<p>To create a layer, you need to provide at least the following details:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-d</span>  <span class="se">\</span>
<span class="s1">'{
    "application": [
      "rw"
    ],
    "name": "Water stress",
    "description": "water stress"
}'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd8a36df-2e52-4b2d-b7be-a48bdcd7c769"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water stress"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water-stress_7"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"water stress"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb06df2dc74d2ad054fb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In this section we&#39;ll guide you through the process of creating a layer in the RW API. Layer creation is available to all registered API users, and will allow you to store your own layer visualisation settings on the API, for reusing and sharing.</p>

<p>Before creating a layer, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a layer, you need to be <a href="reference.html#authentication">authenticated</a>.</li>
<li>Depending on your user account&#39;s role, you may have permission to create a layer but not delete it afterwards - read more about this in <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>The layers you create on the RW API will be publicly visible and available to other users.</li>
</ul>

<p>Creating a layer is done using a POST request and passing the relevant data as body fields. The supported body fields are as defined on the <a href="reference.html#layer-reference">layer reference</a> section, but the minimum field list you must specify for all layers is:</p>

<ul>
<li>name</li>
<li>description </li>
<li>application</li>
</ul>

<p>There&#39;s also a dependency on a dataset id, as it is required to build the POST URL. As noted on the <a href="concepts.html#layer">layer concept</a> documentation, a layer is meant to hold the rendering details of a layer, but not the actual data - that should be part of the dataset. While this is not enforced - it&#39;s up to your rendering tool to load the data, and it can do it from a RW API dataset or from anywhere else - it&#39;s common and best practice to have the data for a layer be sourced from the dataset that&#39;s associated with it.</p>

<p>When a layer is created, a <a href="reference.html#vocabularies-and-tags">vocabulary tag</a> for it is automatically created, associated with the dataset tag.</p>

<p>The layer service was built to be very flexible, and not be restricted to specific layer rendering libraries or tools. This gives you the freedom to use virtually any rendering technology you want, but it also means you&#39;ll have to make additional decisions on how to structure your data into the different open format fields provided by a RW API layer. In a future release of these docs, we&#39;ll show you some examples of how existing applications use different rendering tools with the layer endpoints, to give you an idea on how you can structure your own data, and also as a way to help you get started creating your first layers for your own custom applications. Until then, the <a href="tutorials.html">tutorials section of the documentation</a> shows an example of how existing raster tile layers may be structured and how the information in the layer response can be utilized by a third-party visualization library.</p>
<h4 id='errors-for-creating-a-layer'>Errors for creating a layer</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: <code>&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td>- <code>&lt;field&gt;</code>: must be a <code>&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create a layer with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>The provided dataset id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Error: StatusCodeError: 404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset not found\&quot;}]}</td>
<td>The provided dataset exists but is not present on the <a href="reference.html#graph">graph</a>.</td>
</tr>
</tbody></table>
<h2 id='updating-a-layer'>Updating a layer</h2>
<blockquote>
<p>Example PATCH request that updates a layer&#39;s name:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
  "name":"foo"
}'</span>
</code></pre></div>
<p>The update layer endpoint allows you to modify the details of an existing layer. As noted on the <a href="concepts.html#layer">layer concept</a> documentation, the layer object stores the details of how layer is meant to be rendered, but does not contain the actual data. As such, if you are looking to update the data that&#39;s being displayed on your map, this is probably not the endpoint you&#39;re looking for - you may want to <a href="reference.html#updating-a-dataset">update your dataset</a> instead. Use this endpoint if you want to modify things like legend details, color schemes, etc - this will depend on your rendering implementation. </p>

<p>Unless specified otherwise in their description, all the fields present in the <a href="reference.html#layer-reference">layer reference</a> section can be updated using this endpoint. When passing new values for Object type fields, the new value will fully overwrite the previous one. Its up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the layer</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>
<h4 id='errors-for-updating-a-layer'>Errors for updating a layer</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- <code>&lt;field&gt;</code>: must be a <code>&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a layer.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the layer&#39;s owner (through the <code>userId</code> field of the layer).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a layer with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Layer with id <id> doesn&#39;t exist</td>
<td>A layer with the provided id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='deleting-a-layer'>Deleting a layer</h2>
<blockquote>
<p>Example DELETE request that deletes a layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd8a36df-2e52-4b2d-b7be-a48bdcd7c769"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water stress"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water-stress_7"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"water stress"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb06df2dc74d2ad054fb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use this endpoint if you&#39;d like to delete a layer from the RW API. As a layer object does not store the actual data being displayed, this will only delete the layer settings, but the actual data will continue to be available at its source.</p>

<p>Besides deleting the layer itself, this endpoint also deletes graph vocabularies and metadata related to the layer itself. These delete operations are issued after the layer itself is deleted. The process is not atomic, and the output of the API request is based solely on the result of the deletion of the layer itself. For example, is the metadata service is temporarily unavailable when you issue your delete layer request, the layer itself will be deleted, but the associated metadata will continue to exist. The response will not reflect the failure to delete metadata in any way.</p>

<p>In order to delete a layer, the following conditions must be met:</p>

<ul>
<li>the layer&#39;s <code>protected</code> property must be set to <code>false</code>.</li>
<li>the user must be logged in and belong to the same application as the layer.</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>
<h4 id='errors-for-deleting-a-layer'>Errors for deleting a layer</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Layer is protected</td>
<td>You are attempting to delete a layer that has <code>protected</code> set to prevent deletion.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a layer.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the layer&#39;s owner (through the <code>userId</code> field of the layer)</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Layer with id <id> doesn&#39;t exist</td>
<td>A layer with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='layer-reference'>Layer reference</h2>
<p>This section gives you a complete view at the properties that are maintained as part of layer. When interacting with a layer (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/layer/blob/master/app/src/models/layer.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the layer. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the layer.</td>
</tr>
<tr>
<td>dataset</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the dataset to which the layer corresponds. Set on layer creation, cannot be modified.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the layer. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>User defined description of the layer.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this layer. Read more about this field <a href="concepts.html#applications">here</a>.</td>
</tr>
<tr>
<td>iso</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>List of ISO3 codes of the countries that relate to the layer. If empty (or contains a single element: &#39;global&#39;) then the layer is a global layer.</td>
</tr>
<tr>
<td>provider</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Layer provider. It typically identifies the source service for the data displayed in the layer.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Layer type.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the layer. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>default</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the layer should be used as the dataset&#39;s default layer.</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the layer is protected. A protected layer cannot be deleted.</td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the layer is published or not.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the layer belongs. Read more about this field in the <a href="concepts.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to host application-specific data or behavior configuration.</td>
</tr>
<tr>
<td>layerConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to define layer specific data, like source of data, styling and animation settings.</td>
</tr>
<tr>
<td>legendConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to define how a layer legend should be represented visually.</td>
</tr>
<tr>
<td>staticImageConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>interactionConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to define interactive layer element behavior, ie.: how tooltips behave on click.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the layer. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the layer. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the layer was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the layer was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h2 id='contextual-layers'>Contextual layers</h2><h3 id='what-is-a-contextual-layer'>What is a contextual layer</h3>
<p>Contextual layers are a simpler version of RW API layers, focused on supporting raster or vector layers that can be intersected with map coordinates. Unlike RW API layers, contextual layers support out-of-the-box downloading layer tiles from a remote tile URL pattern set in the contextual layer itself.</p>

<p>Also, another significant difference between layers and contextual layers is that layers, despite being owned by users, cannot be private - if you create layers, any other RW API user will be able to see them when they <a href="reference.html#getting-all-layers">get all layers</a>. Contextual layers are, by default, private. However, you can also set your contextual layers to be publicly accessible by other users, if you choose to do so.</p>

<p>Another thing you should keep in mind is that, aside from being owned by users, contextual layers can be owned by teams - a separate RW API entity that groups users, assigning some of them a <code>manager</code> profile (not to be confused with the <a href="concepts.html#user-roles"><code>MANAGER</code> user role</a>). If owned by a team, the contextual layer can be fetched or edited by any of the team members, not only by the creator of the contextual layer. Additionally, the contextual layer can also be deleted by a team manager aside from the owner of the contextual layer. Unfortunately, documentation for team endpoints is not up-to-date, so it can be hard to understand how you can interact with teams or use them to create contextual layers. However, for the time being, just keep in mind that contextual layers can be owned by teams, not only by users.</p>

<p>Contextual layers are mostly used by the <a href="https://forestwatcher.globalforestwatch.org/">Forest Watcher mobile application</a>, so for more information about contextual layer use cases, please check out the FW app or reach out to a member of the FW team.</p>
<h3 id='getting-contextual-layers'>Getting contextual layers</h3>
<blockquote>
<p>Getting the list of contextual layers:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contextual-layers"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59a979235f17780012d7dfcf"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"isPublic"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layers.treeCoverLoss2015"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/contextual-layer/loss-layer/2015/2016/{z}/{x}/{y}.png"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-01T15:13:39.502Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to list contextual layers and their properties. If successful, the returned response will include a list of contextual layers in the <code>data</code> index of the response body, including contextual layers that match one of the following conditions:</p>

<ul>
<li>the contextual layer is public - <code>isPublic</code> attribute is set to <code>true</code>;</li>
<li>the contextual layer is owned by the user making the request - <code>owner.id</code> attribute matches the user id in the token provided in the request;</li>
<li>the contextual layer is owned by a team you belong to - the contextual layer <code>id</code> is part of the layers of the team the user making the request belongs to.</li>
</ul>

<p>Keep in mind this endpoint is restricted to authenticated users, so always remember to provide your authentication token when calling this endpoint. The result is <strong>not</strong> paginated, so you will get all layers that match at least one of the conditions defined above.</p>
<h4 id='filters-2'>Filters</h4>
<blockquote>
<p>Return only contextual layers with the <code>enabled</code> attribute equal to true:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer?enabled=true"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<p>The contextual layer list endpoint allows you to filter by the <code>enabled</code> attribute, to retrieve only enabled or disabled layers.</p>
<h4 id='sorting-2'>Sorting</h4>
<p>Sorting is currently not supported for contextual layers.</p>
<h4 id='errors-for-getting-contextual-layers'>Errors for getting contextual layers</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You haven&#39;t provided your authentication token.</td>
</tr>
<tr>
<td>500</td>
<td>Error while retrieving user team</td>
<td>An internal error occurred while fetching the request user&#39;s team.</td>
</tr>
</tbody></table>
<h3 id='creating-a-contextual-layer-for-a-user'>Creating a contextual layer for a user</h3>
<blockquote>
<p>To create a contextual layer for a user, you need to provide at least the following fields:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-d</span>  <span class="se">\</span>
<span class="s1">'{
    "name": "Test",
    "url": "https://example.com/contextual-layer/{z}/{x}/{y}.png"
}'</span>
</code></pre></div>
<blockquote>
<p>Example successful response for creating a contextual layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contextual-layers"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fe9fe6bdc8bd5001bbcb9d0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"isPublic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/contextual-layer/{z}/{x}/{y}.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-28T15:48:59.812Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>RW API contextual layers can be associated with either a user or a team. This section details the information you need to provide to create a contextual layer associated with a user. This endpoint is available to all registered API users.</p>

<p>You can create a contextual layer by calling a POST request, passing the relevant data as body fields. The supported body fields are defined in the <a href="reference.html#contextual-layer-reference">contextual layer reference</a> section, but the required fields you must provide are <code>name</code> and <code>url</code>.</p>
<h4 id='errors-for-creating-a-contextual-layer-for-a-user'>Errors for creating a contextual layer for a user</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>The structure of the JSON request payload is not valid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You haven&#39;t provided your authentication token.</td>
</tr>
<tr>
<td>500</td>
<td>Layer creation Failed.</td>
<td>The creation of the contextual layer failed, check if you are sending all the required fields.</td>
</tr>
</tbody></table>
<h3 id='creating-a-contextual-layer-for-a-team'>Creating a contextual layer for a team</h3>
<blockquote>
<p>To create a contextual layer for a team, you need to provide at least the following fields:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer/team/:teamId"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-d</span>  <span class="se">\</span>
<span class="s1">'{
    "name": "Test",
    "url": "https://example.com/contextual-layer/{z}/{x}/{y}.png"
}'</span>
</code></pre></div>
<blockquote>
<p>Example successful response for creating a contextual layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contextual-layers"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fe9fe6bdc8bd5001bbcb9d0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"isPublic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/contextual-layer/{z}/{x}/{y}.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-28T15:48:59.812Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>RW API contextual layers can be associated with either a user or a team. This section details the information you need to provide to create a contextual layer associated with a team. This endpoint is available to all registered API users.</p>

<p>You can create a contextual layer by calling a POST request, passing the relevant data as body fields. The supported body fields are defined on the <a href="reference.html#contextual-layer-reference">contextual layer reference</a> section, but the required fields you must provide are <code>name</code> and <code>url</code>.</p>
<h4 id='errors-for-creating-a-contextual-layer-for-a-team'>Errors for creating a contextual layer for a team</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>The structure of the JSON request payload is not valid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You haven&#39;t provided your authentication token.</td>
</tr>
<tr>
<td>500</td>
<td>Layer creation Failed.</td>
<td>The creation of the contextual layer failed, check if you are sending all the required fields.</td>
</tr>
<tr>
<td>500</td>
<td>Team retrieval Failed.</td>
<td>An error occurred while fetching the information about the team with id provided, check you are providing a valid team id.</td>
</tr>
</tbody></table>
<h3 id='updating-a-contextual-layer'>Updating a contextual layer</h3>
<blockquote>
<p>Example PATCH request to update a contextual layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer/:layerId"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "name": "Test 2",
    "url": "https://example.com/contextual-layer/{z}/{x}/{y}.png"
}'</span>
</code></pre></div>
<blockquote>
<p>Example successful response for updating a contextual layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contextual-layers"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fe9fe6bdc8bd5001bbcb9d0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"isPublic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/contextual-layer/{z}/{x}/{y}.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-28T15:48:59.812Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To update the details of an existing contextual layer (either created for a user or a team), you should issue a PATCH request. This endpoint is available to all registered API users. </p>

<p>Keep in mind that, as in the case of creating a contextual layer, you must provide at least <code>name</code> and <code>url</code> in all update contextual layer requests. Remember that you can check the <a href="reference.html#contextual-layer-reference">contextual layer reference</a> section for the list of fields available.</p>

<p>Updating contextual layers also has some caveats:</p>

<ul>
<li>you can only update the <code>enabled</code> attribute of contextual layers you own, or contextual layers that belong to a team that you manage - if one of these conditions is not met, the <code>enabled</code> attribute value is kept as is.</li>
<li>you can only update the <code>isPublic</code> attribute of contextual layers if you are an <code>ADMIN</code> user and the contextual layer you are trying to update is owned by a user (not by a team) - in all other cases, the <code>isPublic</code> attribute value is kept as is.</li>
</ul>
<h4 id='errors-for-updating-a-layer-2'>Errors for updating a layer</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Layer not found</td>
<td>No contextual layer was found for the provided id.</td>
</tr>
<tr>
<td>500</td>
<td>Layer retrieval failed.</td>
<td>An error occurred while fetching the layer information from the database.</td>
</tr>
<tr>
<td>500</td>
<td>Team retrieval Failed.</td>
<td>An error occurred while fetching the information about the team with id provided.</td>
</tr>
<tr>
<td>500</td>
<td>Layer update failed.</td>
<td>An error occurred while saving the updated information of the contextual layer.</td>
</tr>
</tbody></table>
<h3 id='deleting-a-contextual-layer'>Deleting a contextual layer</h3>
<blockquote>
<p>Example DELETE request to delete a contextual layer:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer/:layerId"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<p>Use this endpoint if you&#39;d like to delete a contextual layer from the RW API. In order to delete a contextual layer, you must either be an <code>ADMIN</code> user or, alternatively, meet all of the following conditions:</p>

<ul>
<li>the contextual layer&#39;s <code>isPublic</code> property must be set to <code>false</code>.</li>
<li>if the contextual layer is owned by a user, you must be the owner of the contextual layer.</li>
<li>if the contextual layer is owned by a team, you must be one of the managers of the team that owns the contextual layer.</li>
</ul>

<p>If successful, the request to delete a contextual layer returns a 204 No Content response.</p>
<h4 id='errors-for-deleting-a-layer-2'>Errors for deleting a layer</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Layer not found</td>
<td>No contextual layer was found for the provided id.</td>
</tr>
<tr>
<td>500</td>
<td>Layer retrieval failed.</td>
<td>An error occurred while fetching the layer information from the database.</td>
</tr>
<tr>
<td>500</td>
<td>Team retrieval Failed.</td>
<td>An error occurred while fetching the information about the team with id provided.</td>
</tr>
<tr>
<td>500</td>
<td>Layer update failed.</td>
<td>An error occurred while saving the updated information of the contextual layer.</td>
</tr>
</tbody></table>
<h3 id='getting-loss-layer-tiles'>Getting loss layer tiles</h3>
<blockquote>
<p>Example request to fetch loss layer tiles:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/contextual-layer/loss-layer/:startYear/:endYear/:z/:x/:y.png"</span>
</code></pre></div>
<p><strong>This endpoint can be used as a shortcut to obtain PNG tiles, instead of retrieving the contextual layer&#39;s <code>url</code> field and manually interpolating coordinates. The base URL of the service containing the PNG tiles for the layers referred by this endpoint can be configured changing the <a href="https://github.com/gfw-api/fw-contextual-layers/blob/a8442da2c7a4e68625867479860c0185f35488a8/config/default.json#L17"><code>hansenUrl</code> configuration value in the Contextual Layers service</a>.</strong></p>

<p>Use this endpoint to retrieve PNG image corresponding to the loss layer tiles for the <code>(x,y,z)</code> tuple (where <code>x</code> represents latitude, <code>y</code> longitude, and <code>z</code> the zoom level) for loss layers for the interval of years from <code>startYear</code> to <code>endYear</code>.</p>

<p>If successful, this endpoint returns a PNG file of the loss layer tile.</p>
<h4 id='errors-for-getting-loss-layer-tiles'>Errors for getting loss layer tiles</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Tile not found</td>
<td>No tile was found for the parameters provided.</td>
</tr>
</tbody></table>
<h3 id='contextual-layer-reference'>Contextual layer reference</h3>
<p>This section gives you a complete view of the properties that are maintained as part of a contextual layer. When interacting with a contextual layer (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/gfw-api/fw-contextual-layers/blob/dev/app/src/models/layer.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the contextual layer. Auto-generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the contextual layer.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Description of the contextual layer.</td>
</tr>
<tr>
<td>url</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>URL to fetch tiles for the contextual layer.</td>
</tr>
<tr>
<td>isPublic</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the contextual layer is publicly accessible.</td>
</tr>
<tr>
<td>enabled</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the contextual layer is enabled.</td>
</tr>
<tr>
<td>owner</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Object containing information about the owner of the contextual layer.</td>
</tr>
<tr>
<td>owner.type</td>
<td>String</td>
<td>Yes (auto-filled according to the endpoint used to create the contextual layer)</td>
<td></td>
<td>Type of the owner of the layer - can be <code>USER</code> or <code>TEAM</code>.</td>
</tr>
<tr>
<td>owner.id</td>
<td>String</td>
<td>Yes (auto-filled according to the endpoint used to create the contextual layer)</td>
<td></td>
<td>Id of the user or team (according to the value of the <code>owner.type</code> attribute) owner of the contextual layer.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the contextual layer was created. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h1 id='widget'>Widget</h1><h2 id='what-is-a-widget'>What is a widget?</h2>
<p>In a nutshell, a RW API widget is a toolset to help you render your data in a visually more appealing way. The <a href="concepts.html#widget">widget concept documentation</a> will give you a more detailed description of this, and we encourage you to read it before proceeding. We also recommend you take a look at our section about <a href="reference.html#widget-configuration-using-vega-grammar">Vega</a> if you plan on reusing existing widgets or upload widgets that are reusable by other users. The RW API does not require you to use Vega, but we highly recommend that you do, as it&#39;s the technology used by many of the widgets you&#39;ll find on the RW API.</p>
<h2 id='getting-all-widgets'>Getting all widgets</h2>
<blockquote>
<p>Getting a list of widgets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Widget"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
             </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="s2">"rw"</span><span class="w">
             </span><span class="p">],</span><span class="w">
             </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
             </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prev"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=64&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">372</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to list existing widgets and their properties. The result is a paginated list of 10 widgets, followed by metadata on total number of widgets and pages, as well as useful pagination links. By default, only widgets with <code>env</code> value <code>production</code> are displayed. In the sections below, well explore how you can customize this endpoint call to match your needs.</p>
<h3 id='getting-all-widgets-for-a-dataset'>Getting all widgets for a dataset</h3>
<blockquote>
<p>Return the widgets associated with a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Precipitation Change in Puget Sound"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"precipitation-change"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOAA nCLIMDIV Precipitation: Historical Precipitation"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query/06c44f9a-aae7-401e-874c-de13b7764959?sql=select annual as x, year as y from index_06c44f9aaae7401e874cde13b7764959%20order%20by%20year%20asc"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
                </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-03T16:17:06.863Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-21T16:07:57.631Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=2&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When handling widgets, it&#39;s common to want to limit results to those widgets associated with a given dataset. Besides the <a href="#filters130">filters</a> covered below, there&#39;s an additional convenience endpoint to get the widgets associated with a dataset, as shown in this example. </p>
<h3 id='getting-all-widgets-for-multiple-datasets'>Getting all widgets for multiple datasets</h3>
<blockquote>
<p>Return all widgets associated with two datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/widget/find-by-ids"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"]
}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Precipitation Change in Puget Sound"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"precipitation-change"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOAA nCLIMDIV Precipitation: Historical Precipitation"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query/06c44f9a-aae7-401e-874c-de13b7764959?sql=select annual as x, year as y from index_06c44f9aaae7401e874cde13b7764959%20order%20by%20year%20asc"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows users to load all widgets belonging to multiple datasets in a single request. </p>

<blockquote>
<p>Return all widgets associated with two datasets, that are associated with either <code>rw</code> or <code>prep</code> applications </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/widget/find-by-ids"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app": "rw,prep"
}'</span>
</code></pre></div>
<blockquote>
<p>Return all widgets associated with two datasets, that are associated with both <code>rw</code> and <code>prep</code> applications simultaneously </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/widget/find-by-ids"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app": "rw@prep"
}'</span>
</code></pre></div>
<p>Besides the required <code>ids</code> array, your request body may optionally include a <code>app</code> string value if you&#39;d like to filter the returned widgets by their <code>application</code>:</p>

<ul>
<li>Use a single value, like <code>rw</code>, if you want to show only widgets that have <code>rw</code> as one of their applications. </li>
<li>Use a comma separated list, like <code>rw,prep</code>, if you want to show only widgets that have <code>rw</code> or <code>prep</code> as one of their applications.</li>
<li>Note that the the filters do not need to match on the full application list. For example, the filters <code>rw,prep</code> and <code>rw@prep</code> will both match a widget with the application list <code>[&quot;rw&quot;, &quot;prep&quot;, &quot;gfw&quot;]</code>.</li>
</ul>

<p>Please note that, unlike <a href="reference.html#getting-all-widgets">getting all widgets</a> or <a href="reference.html#getting-all-widgets-for-a-dataset">getting all widgets for a dataset</a>, this endpoint does not come with paginated results, nor does it support <a href="reference.html#pagination129">pagination</a>, <a href="reference.html#filters130">filtering</a> or <a href="reference.html#sorting131">sorting</a> or <a href="reference.html#include-entities-associated-with-the-widgets">including related entities</a> described in their respective sections.</p>
<h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?page[number]=2&amp;page[size]=25"</span>
</code></pre></div>
<p>The Widgets service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your widgets list.</p>
<h3 id='filters'>Filters</h3>
<blockquote>
<p>Return the widgets filtered by those whose name contains emissions</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?name=emissions"</span>
</code></pre></div>
<blockquote>
<p>Return the widgets filtered by dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?dataset=11de2bc1-368b-42ed-a207-aaff8ece752b"</span>
curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/11de2bc1-368b-42ed-a207-aaff8ece752b/widget"</span>
</code></pre></div>
<blockquote>
<p>Filter widgets by default value</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?default=false"</span>
</code></pre></div>
<blockquote>
<p>Filter widgets by environment</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?env=staging"</span>
</code></pre></div>
<blockquote>
<p>Return the widgets filtered by those whose applications contain both <code>rw</code> and <code>prep</code> applications simultaneously</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?app=rw@prep"</span>
</code></pre></div>
<p>The widget list endpoint provides a wide range of filters that you can use to tailor your widget listing. Filtering widgets adheres to the conventions defined in the <a href="concepts.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to these conventions, you&#39;ll be able to use the great majority of the widget fields you&#39;ll find on the <a href="reference.html#widget-reference">widget reference</a>, with the following exceptions:</p>

<ul>
<li><code>id</code></li>
<li><code>userName</code></li>
<li><code>userRole</code>: filtering by the role of the owning user can be done using the <code>user.role</code> query argument.</li>
</ul>

<p>Additionally, you can use the following filters:</p>

<ul>
<li><code>collection</code>: filters by a <a href="reference.html#collections">collection</a> id. Requires being authenticated.</li>
<li><code>favourite</code>: if any value is defined for this query param, only the widgets set by the user as <a href="reference.html#favorites">favorites</a> will be returned. Requires being authenticated.</li>
</ul>
<h3 id='sorting'>Sorting</h3>
<blockquote>
<p>Sorting widgets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=name"</span>
</code></pre></div>
<blockquote>
<p>Sorting widgets by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=name,slug"</span>
</code></pre></div>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=-name,+slug"</span>
</code></pre></div>
<blockquote>
<p>Sorting widgets by the role of the user who owns the widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=user.role"</span>
</code></pre></div>
<p>The Widget service currently supports sorting using the <code>sort</code> query parameter. Sorting widgets adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="reference.html#widget-reference">Widget reference</a> section for a detailed description of the fields you can use when sorting. In addition to all widget model fields, you can sort the returned results by the name (using <code>user.name</code>) or role (using <code>user.role</code>) of the user owner of the widget. Keep in mind that sorting by user data is restricted to ADMIN users.</p>
<h3 id='include-entities-associated-with-the-widgets'>Include entities associated with the widgets</h3>
<p>When loading widget data, you can optionally pass an <code>includes</code> query argument to load additional data.</p>
<h4 id='vocabulary'>Vocabulary</h4>
<p>Loads related <a href="reference.html#vocabularies-and-tags">vocabularies</a>. If none are found, an empty array is returned.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=vocabulary"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="s2">"inuncoast"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"rp0002"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"historical"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"nosub"</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='user'>User</h4><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=user"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Sample"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.sample@vizzuality.com"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Loads the name and email address of the author of the widget. If the user issuing the request has role <code>ADMIN</code>, the response will also display the role of the widget&#39;s author. If the data is not available (for example, the user has since been deleted), no <code>user</code> property will be added to the widget object.</p>
<h4 id='metadata'>Metadata</h4><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=metadata"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aeb1c74a096b50010f3843f"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86777822-d995-49cd-b9c3-d4ea4f82c0a3"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"widgetLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-03T14:28:04.482Z"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-07T11:30:40.054Z"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Loads the metadata available for the widget. If none are found, an empty array is returned.</p>
<h4 id='requesting-multiple-additional-entities'>Requesting multiple additional entities</h4><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=metadata,user,vocabulary"</span>
</code></pre></div>
<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>
<h2 id='getting-a-widget-by-id'>Getting a widget by id</h2>
<blockquote>
<p>Getting a widget by id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;"</span>
curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If you know the <code>id</code> of a widget, then you can access it directly. Ids are case-sensitive.</p>
<h3 id='overwrite-the-query-url-of-a-widget-response'>Overwrite the query url of a widget response</h3>
<blockquote>
<p>Getting a widget by id with a custom query url value:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;?queryUrl=/v1/query?sql=Select%20*%20from%20data"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When getting a single widget, you can optionally provide a <code>queryUrl</code> query parameter. If provided, this parameter will overwrite the following response values:</p>

<ul>
<li><code>data.attributes.queryUrl</code></li>
<li><code>data.attributes.widgetConfig.data.url</code></li>
<li><code>data.attributes.widgetConfig.data[0].url</code></li>
</ul>

<p>This overwrite will only happen if a previous value already existed for the respective field. Also, keep in mind that these changes will NOT be persisted to the database, and will only affect the current request&#39;s response. </p>
<h3 id='customize-the-query-url-of-a-widget-response'>Customize the query url of a widget response</h3>
<blockquote>
<p>Getting a widget by id with a custom query url parameters:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;?geostore=ungeostore"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;previous queryUrl value&gt;?geostore=ungeostore"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;previous widgetConfig.data.url value&gt;?geostore=ungeostore"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Getting a widget by id with a custom query url value parameters:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;?queryUrl=/v1/query?sql=Select%20*%20from%20data&amp;geostore=ungeostore"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data&amp;geostore=ungeostore"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data&amp;geostore=ungeostore"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When getting a single widget, you can optionally provide additional custom query parameter. These parameters will be appended to the following response values:</p>

<ul>
<li><code>data.attributes.queryUrl</code></li>
<li><code>data.attributes.widgetConfig.data.url</code></li>
<li><code>data.attributes.widgetConfig.data[0].url</code></li>
</ul>

<p>The widget service assumes these values are URLs, and will append your custom query parameters as such:</p>

<ul>
<li>If the value already has a <code>?</code> character present, your custom query parameters will be appended with <code>&amp;</code> preceding them. </li>
<li>If no <code>?</code> is present, the first custom query parameter will be appended with a <code>?</code>, and the following with a <code>&amp;</code> before them.</li>
</ul>

<p>This overwrite will only happen if a previous value already existed for the respective field. Also, keep in mind that these changes will NOT be persisted to the database, and will only affect the current request&#39;s response. You can combine these custom query parameters with an <a href="reference.html#overwrite-the-query-url-of-a-widget-response">overwritten query url</a>, as seen on the included example.</p>
<h3 id='include-entities-associated-with-the-widget'>Include entities associated with the widget</h3>
<p>You can load related <code>user</code>, <code>vocabulary</code> and <code>metadata</code> data in the same request. See <a href="reference.html#include-entities-associated-with-the-widgets">this section</a> for more details.</p>
<h2 id='creating-a-widget'>Creating a widget</h2>
<blockquote>
<p>To create a widget, you need to provide at least the following details:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "application":[
      "gfw"
    ],
    "name":"Example Widget"
  }'</span>


curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/widget"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "application":[
      "gfw"
    ],
    "name":"Example Widget",
    "dataset": "7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"    
  }'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In this section we&#39;ll guide you through the process of creating a widget in the RW API. Widget creation is available to all registered API users, and will allow you to store your own widget visualisation settings on the API, for reusing and sharing.</p>

<p>Before creating a widget, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a widget, you need to be <a href="reference.html#authentication">authenticated</a>.</li>
<li>Depending on your user account&#39;s role, you may have permission to create a widget but not delete it afterwards - read more about this in <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>The widgets you create on the RW API will be publicly visible and available to other users.</li>
</ul>

<p>Creating a widget is done using a POST request and passing the relevant data as body files. The supported body fields are as defined on the <a href="reference.html#widget-reference">widget reference</a> section, but the minimum field list you must specify for all widgets is:</p>

<ul>
<li>name</li>
<li>application</li>
<li>dataset - which can be specified either through the URL or the POST body.</li>
</ul>

<p>The widget service was built to be very flexible, and not be restricted to specific widget rendering libraries or tools. While we recommend using <a href="reference.html#widget-configuration-using-vega-grammar">Vega</a>, it&#39;s up to you to decide which library to use, and how to save your custom data within a widget&#39;s <code>widgetConfig</code> field. While there is no hard limit on this, widgets that rely on excessively large <code>widgetConfig</code> objects have been known to cause issues, so we recommend being mindful of this.</p>
<h4 id='widget-thumbnails'>Widget thumbnails</h4>
<blockquote>
<p>Preview of the thumbnail of a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://resourcewatch.org/embed/widget/&lt;widget_id&gt;"</span>
</code></pre></div>
<p>When a widget is created or updated, the RW API will automatically try to generate a thumbnail preview of it. This is done using the renderer that&#39;s part of the <a href="https://resourcewatch.org">Resource Watch</a> website, and will only produce a thumbnail if your widget uses the same approach as the RW website for declaring its widgets. Searching for widgets belonging to the <code>rw</code> application will give you an idea of how this is achieved.</p>

<p>The thumbnail process is asynchronous, meaning it may take up to one minute for your newly created or updated widget to have a valid and/or up to date <code>thumbnailUrl</code> value. If the thumbnail generation process fails (for example, if you decide to use a different rendering tool and data structure), the thumbnail generation will fail silently, but will not affect the actual widget creation or update process.</p>
<h4 id='errors-for-creating-a-widget'>Errors for creating a widget</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: <code>&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td>- <code>&lt;field&gt;</code>: must be a <code>&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create a widget with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>The provided dataset id does not exist.</td>
</tr>
</tbody></table>
<h2 id='updating-a-widget'>Updating a widget</h2>
<blockquote>
<p>To update a widget, you have to do one of the following PATCH requests:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id_or_slug&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name":"New Example Widget Name"
 }'</span>


curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id_or_slug&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name":"New Example Widget Name",
    "dataset":"&lt;dataset-id&gt;
 }'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Example Widget Name"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The update widget endpoint allows you to modify the details of an existing widget. As noted on the <a href="concepts.html#widget">widget concept</a> documentation, the widget object stores the details of how widget is meant to be rendered, but may not contain the actual data. As such, if you are looking to update the data that&#39;s being displayed on your widget, this is probably not the endpoint you&#39;re looking for - you may want to <a href="reference.html#updating-a-dataset">update your dataset</a> instead. Use this endpoint if you want to modify things like legend details, color schemes, etc - this will depend on your rendering implementation. </p>

<p>Unless specified otherwise in their description, all the fields present in the <a href="reference.html#widget-reference">widget reference</a> section can be updated using this endpoint. When passing new values for Object type fields, like <code>widgetConfig</code>, the new value will fully overwrite the previous one. Its up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the widget</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> or <code>USER</code> and be the widget&#39;s owner (through the <code>userId</code> field of the widget) and belong to all the applications associated with the widget.</li>
</ul></li>
</ul>
<h4 id='widget-thumbnails-2'>Widget thumbnails</h4>
<p>When a widget is updated, a new thumbnail is generated. Refer to <a href="reference.html#widget-thumbnails">this section</a> for details on this process. </p>
<h4 id='errors-for-updating-a-widget'>Errors for updating a widget</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- <code>&lt;field&gt;</code>: must be a <code>&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a widget.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> or <code>USER</code> and be the widget&#39;s owner (through the <code>userId</code> field of the widget) and belong to all the applications associated with the widget.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a widget with one or more <code>application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Widget with id <id> doesn&#39;t exist</td>
<td>A widget with the provided id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>
<h2 id='cloning-a-widget'>Cloning a widget</h2>
<blockquote>
<p>To clone a widget, you should use one of the following POST requests:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to duplicate an existing widget. The newly created widget is identical to the old one, except:</p>

<ul>
<li>The <code>userId</code> will be the id of the user who issued the clone request</li>
<li><code>name</code> and <code>description</code> will be the same but can optionally be modified by the clone request (see the provided example)</li>
<li><code>createdAt</code> and <code>updatedAt</code> will have the current time.</li>
</ul>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the widget</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code> or <code>MANAGER</code></li>
<li>have role <code>USER</code> and be the widget&#39;s owner (through the <code>userId</code> field of the widget) and belong to all the applications associated with the widget.</li>
</ul></li>
</ul>

<blockquote>
<p>Cloning a widget while optionally setting a new name or description:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "name": "name for the cloned widget",
   "description": "description of the cloned widget"
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "name": "name for the cloned widget",
   "description": "description of the cloned widget"
}'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name for the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='widget-thumbnails-3'>Widget thumbnails</h4>
<p>When a widget is cloned, a new thumbnail is generated. Refer to <a href="reference.html#widget-thumbnails">this section</a> for details on this process.</p>
<h4 id='errors-for-cloning-a-widget'>Errors for cloning a widget</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to clone a widget.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> or <code>MANAGER</code> role, or have role <code>USER</code> and be the widget&#39;s owner (through the <code>userId</code> field of the widget) and belong to all the applications associated with the widget.</td>
</tr>
<tr>
<td>404</td>
<td>Widget with id <id> doesn&#39;t exist</td>
<td>A widget with the provided id or slug does not exist.</td>
</tr>
</tbody></table>
<h2 id='deleting-a-widget'>Deleting a widget</h2>
<blockquote>
<p>Example DELETE request that deletes a widget:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>


curl <span class="nt">-X</span> DELETE <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name for the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use this endpoint if you&#39;d like to delete a widget from the RW API. As a widget object may not store the actual data being displayed, this may only delete the widget settings, but the actual data may continue to be available at its source.</p>

<p>Besides deleting the widget itself, this endpoint also deletes graph vocabularies and metadata related to the widget itself. These delete operations are issued after the widget itself is deleted. The process is not atomic, and the response is based solely on the result of the deletion of the widget itself, not related resources. For example, is the metadata service is temporarily unavailable when you issue your delete widget request, the widget itself will be deleted, but the associated metadata will continue to exist. The response will not reflect the failure to delete metadata in any way.</p>

<p>In order to delete a widget, the following conditions must be met:</p>

<ul>
<li>the widget&#39;s <code>protected</code> property must be set to <code>false</code>.</li>
<li>the user must be logged in and belong to the same application as the widget.</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>
<h2 id='widget-reference'>Widget reference</h2>
<p>This section gives you a complete view at the properties that are maintained as part of widget. When interacting with a widget (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/widget/blob/master/app/src/models/widget.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the widget. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>dataset</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the dataset to which the widget corresponds. Set on widget creation, cannot be modified.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the widget.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the widget. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the widget. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>User defined description of the widget.</td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Description of the source of the widget&#39;s data, as it&#39;s meant to be displayed to the end user.</td>
</tr>
<tr>
<td>sourceUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL of the source of the data, as it&#39;s meant to be displayed to the end user.</td>
</tr>
<tr>
<td>authors</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Author or authors of the data displayed on the widget, as it&#39;s meant to be displayed to the end user.</td>
</tr>
<tr>
<td>queryUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL of the RW API query or external URL containing the data displayed on the widget</td>
</tr>
<tr>
<td>thumbnailUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL of a example thumbnail of the rendered widget.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the widget belongs. Read more about this field in the <a href="concepts.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>widgetConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to host widget behavior configuration.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this widget. Read more about this field <a href="concepts.html#applications">here</a>.</td>
</tr>
<tr>
<td>layerId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Id of the layer to which the widget corresponds.</td>
</tr>
<tr>
<td>verified</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>default</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the widget should be used as the dataset&#39;s default widget.</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the widget is protected. A protected widget cannot be deleted.</td>
</tr>
<tr>
<td>defaultEditableWidget</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>Used by the RW frontend to determine if a widget is the default widget displayed on the Explore detail page for a given dataset.</td>
</tr>
<tr>
<td>template</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If true, this widget is not necessarily meant to be rendered as-is, but rather as a template for other widgets to be generated from.</td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the widget is published or not.</td>
</tr>
<tr>
<td>freeze</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If true, the widget is meant to represent data from a specific snapshot taken at a given moment in time, as opposed to using a potentially mutable dataset. This data capturing functionality must be implemented by consuming applications, as this value has no logic associated with it on the API side.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the widget. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the widget. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the widget was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the widget was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h1 id='collections'>Collections</h1><h2 id='what-is-a-collection'>What is a collection?</h2>
<p>A collection is a way of aggregating WRI API resources like datasets, layers and widgets. A collection can reference one or more resources of different types.</p>

<p>Collection endpoints require authentication, and the collections are associated with the owner who initially created the collection.</p>
<h2 id='creating-a-collection'>Creating a collection</h2>
<blockquote>
<p>To create an empty collection, you can do a POST with the following body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/collection <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name": "Collection name"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>You can also add a resource in the body of the request when creating a new collection, with the following body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/collection <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name": "Collection name",
    "resources": [
      {
        "type": "dataset",
        "id": "06c44f9a-aae7-401e-874c-de13b7764959"
      }
    ]
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To create a collection, you should send a POST request to the <code>/v1/collection</code> endpoint, providing an authentication token that identifies the user making the request. You also need to (or can) provide the following fields in the request body:</p>

<table><thead>
<tr>
<th>Field name</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Required</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of collection.</td>
<td style="text-align: right">Yes</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application this collection belongs to (defaults to <code>&#39;rw&#39;</code>). Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">No</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>resources</td>
<td style="text-align: center">Array of resources in the collection.</td>
<td style="text-align: right">No</td>
<td style="text-align: right">Array of Objects</td>
</tr>
</tbody></table>
<h2 id='updating-a-collection'>Updating a collection</h2>
<blockquote>
<p>To update a collection, you should perform a PATCH request including the collection ID in the url. Here&#39;s an example:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name": "New name"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can update the name of a collection, you can send a PATCH request to the <code>/v1/collection/:id</code> endpoint, providing an authentication token that identifies the user making the request.</p>

<p><strong>Keep in mind that you will only be able to update collections that are owned by your user.</strong></p>
<h2 id='adding-a-resource-to-an-existing-collection'>Adding a resource to an existing collection</h2>
<blockquote>
<p>To add a resource to a collection, you have to do a POST with the following body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/collection/:id/resource <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "type": "dataset",
    "id": "06c44f9a-aae7-401e-874c-de13b7764959"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can do a POST request to the <code>/v1/collection/:id/resource</code> to push a new resource to an existing collection. You also need to define the following fields in the request body:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">Type of resource being added</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
<tr>
<td>id</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>
<h2 id='getting-collections-for-the-request-user'>Getting collections for the request user</h2>
<blockquote>
<p>To get all collections of the logged user, you have to do a GET request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/collection <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w">            
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>By making a GET request to the <code>/v1/collection</code> endpoint, you can obtain the collections of the logged user.</p>

<blockquote>
<p>To get all collections of the logged user, including the associated resources:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/collection <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can optionally add the <code>include=true</code> query parameter to load the associated resources.</p>
<h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/collection?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25 <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<p>The Collections service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your collections list.</p>

<p>In the specific case of the Collections service, the default value for the <code>page[size]</code> query parameter is 9999999, instead of 10. However (as recommended in the pagination guidelines), you should not rely on the default page size and always provide a value tailored to your needs.</p>
<h3 id='sorting'>Sorting</h3>
<blockquote>
<p>Sorting collections</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/collection?sort=name"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Sorting collections by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/collection?sort=name,application"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/collection?sort=-name,+application"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<p>The Collections service currently supports sorting using the <code>sort</code> query parameter. Sorting collections adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="reference.html#collection-reference">Collection reference</a> section for a detailed description of the fields you can use when sorting.</p>
<h2 id='get-a-collection-by-id'>Get a collection by id</h2>
<blockquote>
<p>To get the collection by id, you have to do a GET request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns the collection with id of the param. If the collection belongs to other user or does not exist, the endpoint returns 400.</p>
<h2 id='delete-a-collection'>Delete a collection</h2>
<blockquote>
<p>To delete the collection by id, you have to do a DELETE request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>In case of success, the deleted collection is returned in the response body:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint deletes the collection with id of the param. If the collection belongs to other user or does not exist, the endpoint returns 400.</p>
<h2 id='delete-a-collection-resource'>Delete a collection resource</h2>
<blockquote>
<p>To delete the resource you have to do a DELETE request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/collection/:id/resource/:resourceType/:resourceId <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>In case of success, the updated collection is returned in the response body:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Using this endpoint you can also delete a resource in a collection with the id, resource type and resource id of the param. If the collection belongs to other user or not exist, the endpoint returns 400.</p>
<h2 id='finding-collections-by-ids'>Finding collections by ids</h2>
<blockquote>
<p>To find collections by ids, you have to do a POST request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/collection/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "ids": ["5f56170c1fca55001ad51779"],
    "userId": "5dd7b92abf56ca0011875ae2"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>You can also filter the returned results by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/collection/find-by-ids?application<span class="o">=</span>gfw <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "ids": ["5f56170c1fca55001ad51779"],
    "userId": "5dd7b92abf56ca0011875ae2"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can find collections providing an array of ids by making a POST request to the <code>/v1/collection/find-by-ids</code> endpoint. You must provide in the body of the request the <code>ids</code> of the collections you wish to fetch, as well as the id of the user (<code>userId</code>) who owns these collections.</p>

<p>You can filter the returned results by application by providing the <code>application</code> query parameter.</p>

<p><strong>Finding collections by id does not require authentication.</strong></p>
<h2 id='collection-reference'>Collection reference</h2>
<table><thead>
<tr>
<th>Field name</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of collection.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>ownerId</td>
<td style="text-align: center">Id of the user owner of this collection.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application this collection belongs to (defaults to <code>&#39;rw&#39;</code>). Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>resources</td>
<td style="text-align: center">Array of resources in the collection.</td>
<td style="text-align: right">Array of Objects</td>
</tr>
<tr>
<td>--- type</td>
<td style="text-align: center">The type of resource.</td>
<td style="text-align: right">String (dataset, layer, widget)</td>
</tr>
<tr>
<td>--- id</td>
<td style="text-align: center">The id of the resource.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h1 id='jiminy'>Jiminy</h1>
<blockquote>
<p>Example jiminy GET request providing the SQL as query param:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/jiminy?sql=SELECT col_1, col_2 FROM &lt;dataset.id&gt; limit &lt;number&gt;'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example jiminy POST request providing the SQL in the request body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/jiminy'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
   "sql": "SELECT col_1, col_2 FROM &lt;dataset.id&gt; limit &lt;number&gt;"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example with real data:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/jiminy?sql=SELECT iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<p>The <code>jiminy</code> endpoint of the RW API makes use of the <a href="https://github.com/vizzuality/jiminy">Jiminy</a> library in order to infer which type of charts can be obtained from a the execution of a SQL query on a given dataset. For a better understanding of this endpoint, it is recommended to read beforehand on how to <a href="reference.html#querying-datasets">query datasets</a>.</p>

<p>To use this endpoint and infer the charts that you can build from a result set, you must provide a valid SQL query. This query should contain the name of the columns for which you want to infer the chart types - the usage of the wildcard selector (<code>SELECT *</code>) in the SQL query is not supported by this endpoint.</p>

<p><strong>Note: You must set a limit value to the SQL query provided. If you do not set it and the dataset contains a lot of data, this endpoint will try to obtain all data at once, which can result in performance issues.</strong></p>

<p>Likewise with <code>query</code> and <code>download</code> endpoints, you can either provide the SQL as query param in a GET request, or in the body of the request as a POST request - read more <a href="reference.html#alternative-ways-for-querying-datasets">here</a>. Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same <code>jiminy</code> endpoint call will see a great performance increase, even if they are made by a different application or client. Alternatively, you can also call the <code>jiminy</code> endpoint using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your SQL query string be too long. Using a POST request is the recommended solution for these cases.</p>
<h2 id='jiminy-response-body'>Jiminy response body</h2>
<blockquote>
<p>Example of successful response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pie"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"scatter"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"byColumns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"byType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"bar"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"pie"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"scatter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type_1"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type_1"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type_1"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_1"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"1d_scatter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"1d_tick"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>For a successful response, the response body is a JSON object containing a single index <code>data</code>, which describes the type of charts that can be obtained from the query provided. The following fields are usually present in the <code>data</code> object:</p>

<!---
<span class="code-wrap">...</span> below forces the code the wrap. Without this, the table is horrendously wide.
See line 467 in screen.css.scss
-->

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>data.general</td>
<td>Array</td>
<td>An array of distinct charts that can be used to represent the data of the query.</td>
<td><span class="code-wrap"><code>[&quot;bar&quot;, &quot;pie&quot;]</code></span></td>
</tr>
<tr>
<td>data.byColumns</td>
<td>Object</td>
<td>An object where the keys are the columns provided in the SQL query. For each the, its value is an array with the names of the charts that might be used to represent the data from the column in the key.</td>
<td><span class="code-wrap"><code>{ &quot;iso&quot;: [&quot;bar&quot;, &quot;pie&quot;], &quot;name_0&quot;: [&quot;bar&quot;, &quot;pie&quot;] },</code></span></td>
</tr>
<tr>
<td>data.byType</td>
<td>Object</td>
<td>An object where the keys are all the charts supported by Jiminy. The values will contain the column names of the query execution that might be used to display the chart type in the key. If the chart type was not included in the <code>data.general</code> field of the response body, its content will likely be empty.</td>
<td><span class="code-wrap"><code>{ &quot;bar&quot;: { &quot;general&quot;: [&quot;iso&quot;, &quot;name_0&quot;, &quot;name_1&quot;, &quot;type_1&quot;], &quot;columns&quot;: { &quot;iso&quot;: [], &quot;name_0&quot;: [], &quot;name_1&quot;: [], &quot;type_1&quot;: [] } } }</code></span></td>
</tr>
</tbody></table>
<h2 id='jiminy-execution-errors'>Jiminy execution errors</h2>
<p>The <code>jiminy</code> endpoint might sometimes return an error response. The following table describes the possible errors that can occur when calling this endpoint:</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>SQL o FS required</td>
<td>The required <code>sql</code> field is missing either as query string parameter or in the request body.</td>
</tr>
<tr>
<td>500</td>
<td>Internal server error</td>
<td>The error message might vary in this case.</td>
</tr>
</tbody></table>
<h2 id='jiminy-endpoint-parameters'>Jiminy endpoint parameters</h2>
<p>The <code>jiminy</code> endpoint makes use of a single query parameter, which is required for a successful call of the endpoint:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query which will be the basis for inferring the chart types.</td>
<td>String</td>
<td>Yes</td>
</tr>
</tbody></table>
<h1 id='forms'>Forms</h1>
<p>This section details the endpoints provided by the GFW Forms API service.</p>
<h2 id='requesting-a-webinar'>Requesting a webinar</h2>
<blockquote>
<p>To create a new webinar request, you need to provide at least the following details:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/form/request-webinar"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span>  <span class="se">\</span>
<span class="s1">'{
    "name": "Example name",
    "email": "example@email.com",
    "description": "Example description"
}'</span>
</code></pre></div>
<blockquote>
<p>Successful response: 204 No Content</p>
</blockquote>

<p>In order to request a new webinar, you should make a POST request to the <code>form/request-webinar</code> endpoint, providing at least a <code>name</code> and an <code>email</code> in the request body. You can also optionally provide a <code>description</code>.</p>

<p>Webinar requests are pushed into a Google Spreadsheet (using the Google Sheets API). Staging webinar requests are located <a href="https://docs.google.com/spreadsheets/d/1JsXX7aE_XlJm-WWhs6wM5IW0UfLi-K9OmOx0mkIb0uA/edit?usp=sharing">here</a>, and production webinar requests are located <a href="https://docs.google.com/spreadsheets/d/1zqiimFua1Lnm9KM4ki_njCaMuRhaPBif30zbvxIZWa4/edit?usp=sharing">here</a>.</p>

<p>In case of success, this endpoint will return a response with status code <code>204 No Content</code>. If an error occurs, a response with status code <code>500 Internal Server Error</code> is returned.</p>
<h1 id='metadata'>Metadata</h1><h2 id='what-is-metadata'>What is metadata?</h2>
<p>If you are new to the RW API, or want to learn more about the concept of metadata, we strongly encourage you to read the <a href="concepts.html#metadata">metadata concept</a> documentation first. It gives you a brief and clear description of what metadata is, and why it is useful.</p>

<p>Once you&#39;ve read that section, you can come back here to learn more details about using the RW API Metadata feature, which aims to provide summary information about <a href="concepts.html#dataset">Datasets</a>, <a href="concepts.html#layer">Layers</a>, and <a href="concepts.html#widget">Widgets</a>.</p>

<p><a href="reference.html#metadata-objects">Metadata objects</a> describe things like the name, spatial and temporal coverage, usage rights, and contact information of datasets as well as their associated layers and widgets, uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you.</p>

<p>They are particularly useful for allowing users to find relevant datasets, layers and widgets, understand their context, and for providing useful extra information, such as descriptions, licensing, and citations.</p>

<p><strong><em>As such, if you really want people to be able to use your datasets, widgets or layers, it is crucial that it has metadata!</em></strong></p>

<p>To find out more about accessing metadata objects already available on the RW API, check out the documentation on <a href="reference.html#getting-metadata">getting metadata objects</a>. If you&#39;d like to share your data with the world, you can also <a href="reference.html#creating-metadata">create your own metadata</a> on the RW API, as well as <a href="reference.html#updating-metadata">update</a> and <a href="reference.html#deleting-metadata">delete</a> existing metadata objects.</p>
<h2 id='metadata-objects'>Metadata objects</h2>
<p>RW API&#39;s <a href="concepts.html#metadata">approach to metadata</a> is designed to offer flexibility; both in terms of the information contained and languages. Hence, when working with metadata objects it is important to understand a few key concepts. </p>

<p>The first of which is that metadata objects contain information about another RW API entity - a dataset, a layer or a widget. Thus, each metadata object belongs to a single <code>resource</code>, identified by its <code>type</code> and <code>id</code>. As this <code>type</code> + <code>id</code> pair directly or indirectly (as widgets and layers themselves are associated with a dataset) references a dataset, and for convenience, each metadata object also has the dataset identifier to which it&#39;s associated.</p>

<p>Another important concept to keep in mind is that each metadata object concerns a single combination of <code>language</code> and <code>application</code>. If you want to provide translations of your metadata, or if you&#39;d like it to tailor a resource&#39;s metadata to better fit different applications, you should create multiple metadata objects for the different combinations of application and language.</p>

<p>Building on top of the two concepts above, it&#39;s important to highlight that while each resource can have multiple metadata, it cannot have multiple metadata for the same combination of <code>language</code> and <code>application</code>. For example, metadata about a tree cover dataset for the <a href="https://www.globalforestwatch.org/">Global Forest Watch</a> application might be available in both English and Spanish (each a different metadata object), and these may be different compared to metadata objects in the same languages associated with <a href="https://resourcewatch.org/">Resource Watch</a> application. This example would then represent a total of 4 different metadata objects, all associated with the same dataset.</p>

<p>When it comes to its internal structure, metadata objects have a balance of structured and free-format fields that promote a common base across all objects, while allowing different applications and use cases to have their own specific structure and details. You can learn more about the available fields in the <a href="reference.html#metadata-reference">metadata reference</a> section.</p>

<p>Last but not least, it&#39;s important to keep in mind that the behavior of metadata objects and endpoints aims to be, as much as possible, independent from the target resource it references. In the detailed endpoint documentation below we&#39;ll cover the different endpoints in depth, and highlight the differences in behavior when handling different resource types, but you can safely assume that, for most of it, behavior described for a type of resource will be the same for all 3 types.</p>
<h2 id='metadata-endpoints-overview'>Metadata endpoints overview</h2>
<p>As covered above, each metadata object directly concerns a single dataset, widget or layer. The endpoint structure mostly reflects that, with each metadata action (getting, creating, modifying or deleting metadata) being available through 3 different endpoints, one for each type of resource (for example, <code>/v1/dataset/&lt;dataset-id&gt;/metadata</code>, <code>/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;/metadata</code> and <code>/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;/metadata</code>). These endpoints will be documented as a single element, as they behave in exactly the same way, with the only difference between them being the actual endpoint URL. Any differences that may exist will be pointed out, but those will be rare. The only exceptions are the endpoints to load all metadata (which ignores resource type) and to clone a dataset&#39;s metadata, which doesn&#39;t have a widget or layer equivalent.</p>
<h2 id='getting-metadata'>Getting metadata</h2>
<p>There are 2 main ways to retrieve metadata objects from the RW API: using the &quot;get all&quot; endpoint (and optionally adding some filters), or loading metadata by their resource id (either a single element at a time, or multiple in one go) and type.</p>

<p>Remembering that each resource <a href="reference.html#metadata-objects">may have many metadata objects</a> associated with it. In general, you will usually want to use the filter parameters <code>application</code> and <code>language</code>, which may be one or many of valid RW API applications and languages.</p>
<h3 id='getting-all-metadata'>Getting all metadata</h3>
<blockquote>
<p>Getting a list of all metadata</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?application=rw,gfw&amp;language=en,es&amp;type=dataset&amp;limit=1'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting a list of all metadata with optional parameters</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?application=rw,gfw&amp;language=en,es&amp;type=dataset&amp;limit=1'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57cfffd6129c3c100054c383"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ffe5ad6-c920-421b-b69c-bc8893155df4"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ffe5ad6-c920-421b-b69c-bc8893155df4"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"short-description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-13T10:02:28.337Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-13T10:03:02.445Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint will allow you to get the list of the metadata available in the API, and it&#39;s the only endpoint that will allow you to load metadata for multiple resources at once.</p>

<p>It&#39;s worth pointing out that, unlike other similar endpoints on the RW API, this endpoint does NOT have pagination by default. If you query it without any of the optional parameters, you will get a list of all metadata objects for all datasets, widgets and layers. This is strongly discouraged, and <strong>you should not rely on this behavior</strong> - when using this endpoint, you should aim to use a combination of parameters to narrow down your response pool. You should also <strong>expect a future update to this endpoint to introduce pagination</strong> on all responses, so try to keep this in mind when using this endpoint on your application.</p>

<p>For a detailed description of each field, check out the <a href="reference.html#metadata-reference">Metadata reference</a> section.</p>

<p>In the sections below, well explore the optional parameters supported by this, which we strongly recommend you use.</p>
<h4 id='application-and-language-filters'>Application and language filters</h4>
<blockquote>
<p>Getting a list of all metadata belonging to the RW application, written in either English or Spanish</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?application=rw&amp;language=en,es'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<p>You can filter by <code>application</code> and <code>language</code> of the metadata by passing query arguments with the same name in your call to this endpoint. You can filter by multiple values at the same time, separating them using using commas.</p>
<h4 id='type-filter'>Type filter</h4>
<blockquote>
<p>Getting a list of all metadata for widgets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?type=widget'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<p>Using the <code>type</code> query parameter you can specify the type of the metadata resource to load. Expected values are <code>dataset</code>, <code>widget</code> or <code>layer</code>, and any other values will produce no results.</p>
<h4 id='limit'>Limit</h4>
<blockquote>
<p>Getting a list of up to 10 metadata</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?limit=10'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<p>Using the <code>limit</code> query parameter you can specify the maximum number of metadata to load in a single response.</p>
<h4 id='sorting'>Sorting</h4>
<blockquote>
<p>Sorting metadata</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/metadata?sort<span class="o">=</span>name
</code></pre></div>
<blockquote>
<p>Sorting metadata by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/metadata?sort<span class="o">=</span>name,description
</code></pre></div>
<blockquote>
<p>Sort by name descending, description ascending</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/metadata?sort<span class="o">=</span><span class="nt">-name</span>,+description
</code></pre></div>
<p>The Metadata service currently supports sorting using the <code>sort</code> query parameter. Sorting metadata adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="reference.html/#metadata-reference">Metadata reference</a> section for a detailed description of the fields you can use when sorting.</p>
<h3 id='getting-metadata-for-a-dataset-layer-or-widget'>Getting metadata for a dataset, layer or widget</h3>
<blockquote>
<p>Getting metadata associated with a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting metadata associated with a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;/metadata'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting metadata associated with a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;/metadata'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"595f836c0d9ed1000bc29a91"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Percentage of Urban Population with Access to an Improved Water Source is derived by ..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UN WHO/WHO UNICEF JMP WSS"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"data_download_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"frequency_of_updates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Annual"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"date_of_content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-present"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"spatial_resolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tabular: National"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"geographic_coverage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Global"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"link_to_linense"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://data.worldbank.org/summary-terms-of-use"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Open: You are free to copy, distribute, adapt, display, or include ..."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"World Bank. 2015. </span><span class="se">\"</span><span class="s2">World Development Indicators: Improved Water Source (% of Population with Access).</span><span class="se">\"</span><span class="s2"> Retrieved from http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS. Accessed through Resource Watch on [date]. www.resourcewatch.org."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cautions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The data on access to an improved water source measure the ..."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"source_organization_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"source_organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United Nations World Health Organization (UN WHO)/World Health Organization and United Nations Children's Fund Joint Monitoring Programme for Water Supply and Sanitation (WHO UNICEF JMP WSS)"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"functions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"technical_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Percentage of Urban Population with Access to an Improved Water Source (WHO/UNICEF)"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Measured year"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Year"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Value"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Country Name"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISO-3 Country Code"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-07T12:49:48.721Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-28T14:30:17.701Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>These endpoints allow you to get metadata for a single dataset, widget or layer. By default, metadata for all languages and applications is returned, but you can use optional query parameters to filter that result.</p>
<h4 id='application-and-language-filters-2'>Application and language filters</h4>
<blockquote>
<p>Getting a list of all metadata for a given dataset, belonging to the RW application and written in either English or Spanish</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?application=rw&amp;language=en,es'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
</code></pre></div>
<p>You can filter by <code>application</code> and <code>language</code> of the metadata by passing query arguments with the same name in your call to this endpoint. You can filter by multiple values at the same time, separating them using using commas.</p>
<h4 id='limit-2'>Limit</h4>
<blockquote>
<p>Getting a list of all metadata for a given dataset, up to 10 results</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?limit=10'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
</code></pre></div>
<p>Using the <code>limit</code> query parameter you can specify the maximum number of metadata to load in a single response.</p>
<h3 id='getting-metadata-for-multiple-datasets-layers-or-widgets'>Getting metadata for multiple datasets, layers or widgets</h3>
<blockquote>
<p>Getting metadata associated with multiple datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset/metadata/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;dataset ids&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Getting metadata associated with multiple widgets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset/layer/metadata/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;layer ids&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Getting metadata associated with multiple widgets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset/widget/metadata/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;widget ids&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"595f836c0d9ed1000bc29a91"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Percentage of Urban Population with Access to an Improved Water Source is derived by ..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UN WHO/WHO UNICEF JMP WSS"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"data_download_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"frequency_of_updates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Annual"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"date_of_content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-present"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"spatial_resolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tabular: National"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"geographic_coverage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Global"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"link_to_linense"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://data.worldbank.org/summary-terms-of-use"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Open: You are free to copy, distribute, adapt, display, or include ..."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"World Bank. 2015. </span><span class="se">\"</span><span class="s2">World Development Indicators: Improved Water Source (% of Population with Access).</span><span class="se">\"</span><span class="s2"> Retrieved from http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS. Accessed through Resource Watch on [date]. www.resourcewatch.org."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"cautions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The data on access to an improved water source measure the ..."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"source_organization_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"source_organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United Nations World Health Organization (UN WHO)/World Health Organization and United Nations Children's Fund Joint Monitoring Programme for Water Supply and Sanitation (WHO UNICEF JMP WSS)"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"functions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"technical_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Percentage of Urban Population with Access to an Improved Water Source (WHO/UNICEF)"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Measured year"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Year"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Value"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Country Name"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISO-3 Country Code"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-07T12:49:48.721Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-28T14:30:17.701Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This group of endpoints allows you to access metadata for multiple resources of the same type with a single request. The result will be a flat list of metadata elements, not grouped by their associated resource - it&#39;s up to your application to implement this logic if it needs it.</p>
<h4 id='application-and-language-filters-3'>Application and language filters</h4>
<blockquote>
<p>Getting a list of all metadata for multiple widgets, belonging to the RW application and written in either English or Spanish</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:dataset/widget/metadata/find-by-ids?application<span class="o">=</span>rw&amp;language<span class="o">=</span>en,es <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;widget ids&gt;]
  }'</span>
</code></pre></div>
<p>You can filter by <code>application</code> and <code>language</code> of the metadata by passing query arguments with the same name in your call to this endpoint. You can filter by multiple values at the same time, separating them using using commas.</p>
<h4 id='errors-for-getting-metadata-for-multiple-datasets-layers-or-widgets'>Errors for getting metadata for multiple datasets, layers or widgets</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Missing &#39;ids&#39; from request body</td>
<td>The required <code>ids</code> field is missing in the request body.</td>
</tr>
</tbody></table>
<h2 id='creating-metadata'>Creating metadata</h2>
<blockquote>
<p>Creating a new metadata for a given dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "application": &lt;application&gt;,
  "language": &lt;language&gt;,
  "name": "metadata name"
}'</span>
</code></pre></div>
<blockquote>
<p>Creating a new metadata for a given layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "application": &lt;application&gt;,
  "language": &lt;language&gt;,
  "name": "metadata name"
}'</span>
</code></pre></div>
<blockquote>
<p>Creating a new metadata for a given widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "application": &lt;application&gt;,
  "language": &lt;language&gt;,
  "name": "metadata name"
}'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f99b9317fe3c8001be2f272"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44c7fa02-391a-4ed7-8efc-5d832c567d57"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44c7fa02-391a-4ed7-8efc-5d832c567d57"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-28T18:32:17.464Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-28T18:32:17.464Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This group of endpoints allows you to associate metadata with an existing dataset, layer or widget. To help make your resources easier to find, understand and reuse, we recommend creating the associated metadata right after you create your new dataset, layer or widget, but you can do it at any time if you want.</p>

<p>As we covered before, the RW API implementation of metadata aims for flexibility, so the only hard requirements when creating a new metadata is that you specify the associate resource id and type, their corresponding dataset id, and the language and application of the metadata (you should ensure that dataset id in the URL matches the dataset id of the resource you&#39;re creating metadata for). Everything else is up to you to decide if you want to define or not, but the effectiveness of your metadata will increase if you provide more details about your resources. You can learn more about the available fields in the <a href="reference.html/#metadata-reference">metadata reference</a> section. </p>

<p>If you want to create new metadata for your resources, you must have the necessary user account permissions. Specifically, you must:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata you&#39;re creating</li>
<li>the user must have role <code>ADMIN</code> or <code>MANAGER</code></li>
</ul>
<h4 id='errors-for-creating-metadata'>Errors for creating metadata</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: <code>&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: empty or invalid <code>&lt;field&gt;</code></td>
<td>The provided value for <code>&lt;field&gt;</code> is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create metadata for an <code>application</code> value that is not associated with your user account.</td>
</tr>
</tbody></table>
<h2 id='updating-metadata'>Updating metadata</h2>
<blockquote>
<p>Updating metadata for a given dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "language": &lt;language&gt;,
   "name": "updated metadata name"
  }'</span>
</code></pre></div>
<blockquote>
<p>Updating metadata for a given layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "language": &lt;language&gt;,
   "name": "updated metadata name"
  }'</span>
</code></pre></div>
<blockquote>
<p>Updating metadata for a given widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "language": &lt;language&gt;,
   "name": "updated metadata name"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazons decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To update an existing metadata, you need to issue a PATCH request to the endpoint that matches your resource type and id, specify the new values you want to use. You can update most of the fields listed in the <a href="reference.html/#metadata-reference">metadata reference</a> section, apart from:</p>

<ul>
<li><code>id</code></li>
<li><code>userId</code></li>
<li><code>createdAt</code> and <code>updatedAt</code></li>
<li><code>language</code> and <code>application</code></li>
<li><code>dataset</code></li>
<li><code>resource</code></li>
</ul>

<p>One important detail is that you MUST specify, in your request body, both the <code>application</code> and <code>language</code> values of the metadata you&#39;re trying to update. These fields will not be used as new values, as you would expect, but are used to pinpoint exactly which metadata entry will be updated - remember that each resource may have multiple metadata associated with it, but only one per application-language pair.</p>

<p>Also keep in mind that, when updating object type fields, your new value will overwrite the previous value for that field entirely - it&#39;s up to you to implement any sort of data merge logic you&#39;d like to see happen.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata that&#39;s being updated </li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>
<h3 id='errors-for-updating-metadata'>Errors for updating metadata</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update metadata.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the metadata owner (through the <code>userId</code> field of the metadata).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update metadata with an <code>application</code> value that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Metadata of resource <resource type>: <resource id> doesn&#39;t exist</td>
<td>Metadata matching the provided resource data, language and application does not exist.</td>
</tr>
</tbody></table>
<h2 id='cloning-dataset-metadata'>Cloning dataset metadata</h2>
<blockquote>
<p>Cloning metadata for a given dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata/clone'</span> 
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "newDataset": "&lt;targer dataset&gt;",
    "application": "&lt;application&gt;"
}'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazons decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to clone all the existing metadata associated with a dataset, as new metadata associated with a different dataset. Note that this will not clone metadata for widgets or layers associated with the defined dataset; only dataset metadata will be cloned.</p>

<p>When calling this endpoint, you must provide two body parameters:</p>

<ul>
<li><code>newDataset</code>: the id of the target dataset to which the cloned metadata will be associated.</li>
<li><code>application</code>: an application to which your user account is associated. This is not used in the cloning logic.</li>
</ul>

<p>A successful cloning will return a list of all metadata created in this process.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata that&#39;s being updated </li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>
<h3 id='errors-for-cloning-metadata'>Errors for cloning metadata</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- newDataset: newDataset can not be empty. -</td>
<td>You need to specify the <code>newDataset</code> body parameter.</td>
</tr>
<tr>
<td>400</td>
<td>Metadata of resource dataset: <new dataset>, application: <application> and language: <language> already exists</td>
<td>The target dataset already has metadata associated with it, and cloning the metadata from the source dataset would cause it to have more than one metadata per language and application.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update metadata.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the metadata owner (through the <code>userId</code> field of the metadata).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to clone metadata with an <code>application</code> value that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Metadata of resource <resource type>: <resource id> doesn&#39;t exist</td>
<td>Metadata matching the provided resource data, language and application does not exist.</td>
</tr>
</tbody></table>
<h2 id='deleting-metadata'>Deleting metadata</h2>
<blockquote>
<p>Deleting metadata for a given dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?application<span class="o">=</span>&lt;application&gt;&amp;language<span class="o">=</span>&lt;language&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> 
</code></pre></div>
<blockquote>
<p>Deleting metadata for a given layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata?application<span class="o">=</span>&lt;application&gt;&amp;language<span class="o">=</span>&lt;language&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> 
</code></pre></div>
<blockquote>
<p>Deleting metadata for a given widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata?application<span class="o">=</span>&lt;application&gt;&amp;language<span class="o">=</span>&lt;language&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> 
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazons decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The metadata delete endpoint allows you to delete a single metadata at a time, provided you have the necessary permissions. Besides the details provided in the URL itself, you must also specify, as query parameters, both the <code>application</code> and <code>language</code> values of the metadata you&#39;re trying to delete. These fields will be used to pinpoint exactly which metadata entry will be deleted - remember that each resource may have multiple metadata associated with it, but only one per application-language pair.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata that&#39;s being deleted</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>
<h3 id='errors-for-deleting-metadata'>Errors for deleting metadata</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad request</td>
<td>Your request does not include the <code>application</code> or <code>language</code> query parameters.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete metadata.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code>ADMIN</code> role, or have role <code>MANAGER</code> and be the metadata owner (through the <code>userId</code> field of the metadata).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete metadata with an <code>application</code> value that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Metadata of resource <resource type>: <resource id> doesn&#39;t exist</td>
<td>Metadata matching the provided resource data, language and application does not exist.</td>
</tr>
</tbody></table>
<h2 id='metadata-reference'>Metadata reference</h2>
<p>This section gives you a complete view at the properties that are maintained as part of metadata objects. When interacting with metadata objects (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/rw_metadata/blob/dev/app/src/models/metadata.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the metadata. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>dataset</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the dataset to which the metadata object corresponds. Set on metadata creation, cannot be modified.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this metadata. Read more about this field <a href="concepts.html#applications">here</a>.</td>
</tr>
<tr>
<td>resource.id</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the resource associated with the metadata.</td>
</tr>
<tr>
<td>resource.type</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Type of the resource associated with the metadata.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the metadata. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Language in which the metadata details are written. While not enforced, we strongly recommend using 2 character language codes.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Name of the metadata.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>User defined description of the metadata.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>No</td>
<td>published</td>
<td>Publication status of the metadata. Defaults to <code>published</code>, can alternatively be set to <code>unpublished</code>.</td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Source information about the associated resource</td>
</tr>
<tr>
<td>citation</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Citation information about the associated resource</td>
</tr>
<tr>
<td>license</td>
<td>String</td>
<td>No</td>
<td></td>
<td>License named used for the associated resource</td>
</tr>
<tr>
<td>units</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object mapping each of the associated resource&#39;s fields to a unit</td>
</tr>
<tr>
<td>info</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object for custom information about the associated resource</td>
</tr>
<tr>
<td>columns</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object mapping each of the associated resource&#39;s fields to a free-form object containing more details.</td>
</tr>
<tr>
<td>applicationProperties</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object containing application-specific information about the associated resource</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the metadata was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the metadata was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h1 id='vocabularies-and-tags'>Vocabularies and tags</h1><h2 id='what-are-vocabularies-and-tags'>What are vocabularies and tags?</h2>
<p><a href="concepts.html#vocabularies-and-tags">Vocabularies and tags concepts</a> are covered in their dedicated section, and we strongly
recommend you read that section before diving into the details of the respective endpoints. In it, we explain in detail
what is a tag and a vocabulary, and why you should use them to empower different use cases of the RW API.</p>

<p>Simply put, a tag is a keyword that describes a <code>resource</code> (we&#39;ll talk in depth about what these are in the next
section). A vocabulary is a group of tags and has a name (also called and used as an <code>id</code> for the vocabulary) that
should define the scope or context of the tags it contains.</p>

<p>It&#39;s important to keep in mind that these associations between a resource and a vocabulary have
an <a href="concepts.html#applications">application</a> associated with them. Putting this in an example, <code>dataset</code> <code>AAA</code> may be associated with
vocabulary <code>BBB</code> for application <code>rw</code>, but not for application <code>gfw</code>. Most endpoints will allow you explicitly define
which application you are referring to (some will even require it), and a <code>rw</code> default value will be assumed when no
explicit value is provided.</p>
<h2 id='what-are-resources'>What are resources?</h2>
<p>Throughout this section, we&#39;ll refer multiple times to <code>resources</code>. Simply put, a <code>resource</code> is either a dataset, a
widget, or a layer. Tags and vocabularies work in a similar fashion for each of these 3 types of RW API entity, so often
we&#39;ll refer to resources instead, for convenience.</p>

<p>We assume that, at this point, you are already familiar with the concepts of <a href="concepts.html#dataset">dataset</a>, <a href="concepts.html#layer">layer</a>
or <a href="concepts.html#widget">widget</a> (ideally you are familiar with the 3). If that&#39;s not the case, we strongly encourage you to learn
about those concepts first, and we also recommend you take some time to explore and experiment using
actual <a href="reference.html#dataset">dataset</a>, <a href="reference.html#layer">layer</a>, or <a href="reference.html#widget">widget</a> endpoints before proceeding. Vocabularies and tags
exist to improve and empower your use cases of those resources, so it should only be used by applications and users that
are already comfortable with the basics, and want to take their knowledge of the RW API to the next level.</p>

<p>The behavior of vocabulary and tags endpoints aims to be, as much as possible, independent from the type of the target
resource it references. In the detailed endpoint documentation below we&#39;ll cover the different endpoints in depth, and
highlight the differences in behavior when handling different resource types, but you can safely assume that, for most
of it, the behavior described for a type of resource will be the same for all 3 types.</p>
<h3 id='a-note-on-resources'>A note on resources</h3>
<blockquote>
<p>Creating a new vocabulary/tag for a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/AAA/widget/BBB/vocabulary/VVV <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<p>In the context of the vocabulary/tag service, widgets and layers are identified not only by their own id but also by the
id you specify as being their associated dataset. Using the side example as reference, this API request would create a
vocabulary <code>VVV</code> for the resource widget <code>BBB</code> associated with dataset <code>AAA</code>. If you later reference the same widget id,
but as belonging to a different dataset, it will be treated as a different resource altogether, and thus will have
different vocabularies and tags. Keep in mind that widgets and layers should only be associated with a single dataset,
so this behavior is described as a pitfall, and you should only rely on vocabularies/tags for widgets/layers properly
associated with their correct dataset.</p>
<h2 id='the-special-knowledge_graph-vocabulary'>The special <code>knowledge_graph</code> vocabulary</h2>
<p>Throughout the whole vocabulary/tags service, there is a special vocabulary named <code>knowledge_graph</code>. When used, this
vocabulary acts as any other vocabulary but has additional logic built-in for the purpose of integrating vocabulary/tags
with the <a href="concepts.html#graph">graph</a> available as part of the RW API.</p>

<p>Whenever you create or clone a vocabulary named <code>knowledge_graph</code> for a resource,
the dataset, layer or widget node is added to the graph if not already present, and
the <a href="reference.html#relationships-between-graph-nodes-and-concepts">tags are associated to it</a>. Updating the <code>knowledge_graph</code> vocabulary also
updates the corresponding tags associated to it on the graph side, and
deleting the vocabulary
also deletes the corresponding tags in the graph.</p>

<p>For more details on the graph, its purpose, and how to use it, please refer its dedicated <a href="concepts.html#graph">concept</a> and <a href="reference.html#graph">reference</a> documentation.</p>
<h2 id='associations-between-vocabularies-tags-and-resources'>Associations between vocabularies, tags and resources</h2><h3 id='vocabularies-and-resources'>Vocabularies and resources</h3>
<p>Despite not being 100% accurate, it&#39;s useful to think that a vocabulary is uniquely identified by a tuple of 3 values:</p>

<ul>
<li>The resource (id and type) to which it&#39;s associated</li>
<li>Its <code>name</code> or <code>id</code> (these are 2 names for the same underlying value)</li>
<li>Its <code>application</code></li>
</ul>

<p>Putting it in other words: you can think of a vocabulary as being <strong>associated with only one resource at a time</strong>. So,
if you create, update or delete a vocabulary, you are only doing so <em>for that resource</em>. You can safely modify the
vocabularies for a resource without fear of affecting vocabularies and tags for other resources.</p>

<p>Further down, we&#39;ll cover endpoints that allow you to discover resources by performing searches based on vocabularies
and tags. These endpoints are able to aggregate these different vocabularies and tags from multiple resources, and
produce a unified response - making it look like vocabularies are shared across resources, and thus producing meaningful
results.</p>

<p>If you find the above slightly confusing, we advise you explore these docs and learn more about the different endpoints available - maybe even try to add vocabularies and tags to one of your resources - and then come back and see if your newly gained knowledge helps you get a deeper understanding of how vocabularies and tags work on the RW API. </p>
<h3 id='vocabularies-and-tags-2'>Vocabularies and tags</h3>
<p>Tags are simply strings associated with an individual vocabulary. They have no direct connection to a resource and have
no logic or complexity within the context of a vocabulary. Tags that have the same value but belong to different
vocabularies are not matched or related in any way.</p>
<h2 id='endpoint-overview'>Endpoint overview</h2>
<p>In broad terms, there are two types of endpoints for manipulating vocabulary/tags: endpoints that allow
to <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> vocabulary/tags for a given resource, and
endpoints that allow you to query for resources for a given vocabulary/tag.</p>

<p>We&#39;ll start by covering how you can manipulate associations between vocabulary/tags and resources, and further down will
cover how to list vocabulary/tags, and their associated resources.</p>
<h2 id='getting-vocabulary-tags-for-a-resource'>Getting vocabulary/tags for a resource</h2>
<p>There are two types of endpoints that will allow you to get vocabularies and tags for a resource: one to retrieve all
vocabularies and their tags, and another to retrieve all tags for a given vocabulary.</p>
<h3 id='getting-all-vocabularies-and-tags-for-a-resource'>Getting all vocabularies and tags for a resource</h3>
<blockquote>
<p>Getting vocabularies and tags associated with a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/dataset/&lt;dataset-id&gt;/vocabulary'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting vocabularies and tags associated with a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;/vocabulary'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting vocabularies and tags associated with a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;/vocabulary'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>These endpoints allow you to get vocabulary/tags for a single dataset, widget, or layer. By default, vocabulary/tags for
the <code>rw</code> application are returned, but you can use the optional <code>app</code> or <code>application</code> query parameters to load data for
a different application.</p>
<h3 id='getting-a-single-vocabulary-and-its-tags-for-a-resource'>Getting a single vocabulary and its tags for a resource</h3>
<blockquote>
<p>Getting a single vocabulary and tags associated with a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting a single vocabulary and tags associated with a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;/vocabulary/&lt;vocabulary-id&gt;'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Getting a single vocabulary and tags associated with a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;/vocabulary/&lt;vocabulary-id&gt;'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>These endpoints allow you to get a single vocabulary and its tags for a single dataset, widget, or layer. By default,
vocabulary/tags for the <code>rw</code> application are returned, but you can use the optional <code>app</code> or <code>application</code> query
parameters to load data for a different application.</p>
<h3 id='getting-vocabularies-and-tags-for-multiple-resources'>Getting vocabularies and tags for multiple resources</h3>
<blockquote>
<p>Getting vocabularies and tags for multiple datasets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/vocabulary/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Getting vocabularies and tags for multiple widgets</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/vocabulary/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Getting vocabularies and tags for multiple layers</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/vocabulary/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag5"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca6817fd-130c-47d4-8a95-303083b2cffa"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This group of endpoints allows you to retrieve the vocabularies for multiple resources of the same type using a single
request. It expects a body containing an <code>ids</code> value, which can either be an array of ids, or a string containing
multiple ids separated by commas.</p>

<p>When retrieving widgets or layers using these endpoints, the dataset id passed in the URL is ignored, and will not
affect the result of the endpoint.</p>

<p>These endpoints return vocabularies for all applications by default, but you can pass an optional <code>application</code> value as
a query parameter to filter by a specific application.</p>
<h4 id='errors-for-getting-vocabularies-and-tags-for-multiple-resources'>Errors for getting vocabularies and tags for multiple resources</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Bad request - Missing &#39;ids&#39; from request body</td>
<td>Your request body is missing the <code>ids</code> field</td>
</tr>
</tbody></table>
<h2 id='creating-vocabularies-tags-for-a-resource'>Creating vocabularies/tags for a resource</h2>
<p>There are two types of endpoints for associating vocabulary/tags with resources: one allows you to create a single
vocabulary (and its tags) for a resource, while the other supports creating multiple vocabularies/tags for a single
resource. The primary use case for these endpoints is when you just created a new dataset/layer/widget, and want to add
vocabularies/tags to them.</p>
<h3 id='creating-a-single-vocabulary-tags-for-a-resource'>Creating a single vocabulary/tags for a resource</h3>
<blockquote>
<p>Creating a new vocabulary/tag for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Creating a new vocabulary/tag for a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Creating a new vocabulary/tag for a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testVocabulary2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This set of endpoints will allow you to create a new vocabulary/tags for a resource.</p>

<p>The request body must contain both an array of tags and the <code>application</code> under which the vocabulary/tags are being
created. If a vocabulary with the same name already exists for the specified application, you will get an error message</p>

<ul>
<li>you can use the update endpoints to modify an existing vocabulary.</li>
</ul>

<p>Assuming the creation was successful, the response will contain a list of all vocabularies and their respective tags
associated with the specified resource, for all applications.</p>

<p>If you want to create new vocabulary/tags for your resources, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the resource</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the resource&#39;s owner (through the <code>userId</code> field of the resource)</li>
</ul></li>
</ul>

<p><strong>An important note:</strong> When creating vocabulary/tags for a resource, the dataset id specified in the URL is validated,
and the requests fail if a dataset with the given id does not exist. When creating a vocabulary for a widget or layer,
you should ensure you specify the dataset id that matches that of the widget/layer, as that validation is not done
automatically - this is a known limitation of the current implementation, and may be modified at any time, and invalid
resources (those where the layer&#39;s/widget&#39;s dataset id does not match the dataset id defined in the resource) may be
purged without prior warning.</p>
<h4 id='errors-for-creating-a-single-vocabulary-tags-for-a-resource'>Errors for creating a single vocabulary/tags for a resource</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>This relationship already exists</td>
<td>The resource already has a vocabulary with the same name for the specified application</td>
</tr>
<tr>
<td>400</td>
<td>- tags: tags can not be empty. -</td>
<td><code>tags</code> body fields is empty</td>
</tr>
<tr>
<td>400</td>
<td>- tags: tags check failed. -</td>
<td>Either the <code>tags</code> or <code>applications</code> body fields are missing or have an invalid value</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create a vocabulary for a resource whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to create a vocabulary for a dataset that doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h3 id='creating-multiple-vocabularies-tags-for-a-resource'>Creating multiple vocabularies/tags for a resource</h3>
<blockquote>
<p>Creating new vocabularies/tags for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "vocabulary1": {
        "tags":["tag1", "tag2"],
        "application": "rw"
    },
    "vocabulary2": {
        "tags":["tag3", "tag4"],
        "application": "rw"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Creating new vocabularies/tags for a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "vocabulary1": {
        "tags":["tag1", "tag2"],
        "application": "rw"
    },
    "vocabulary2": {
        "tags":["tag3", "tag4"],
        "application": "rw"
    }
}'</span>
</code></pre></div>
<blockquote>
<p>Creating new vocabularies/tags for a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "vocabulary1": {
        "tags":["tag1", "tag2"],
        "application": "rw"
    },
    "vocabulary2": {
        "tags":["tag3", "tag4"],
        "application": "rw"
    }
}'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag4"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This set of endpoints will allow you to create multiple vocabularies/tags for a single resource in a single request.</p>

<p>The request body must contain at least one key, each of them corresponding to the names of the vocabularies you want to
create. Each of these keys must have an object-type value, which in turn must contain the following keys:</p>

<ul>
<li><code>tags</code>: an array of tags</li>
<li><code>application</code>: the application associated with the vocabulary.</li>
</ul>

<p>You can create different vocabularies for different applications in a single request.</p>

<p>Assuming the creation was successful, the response will contain a list of all vocabularies and their respective tags
associated with the specified resource, for all applications.</p>

<p>If you want to create new vocabulary/tags for your resources, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the resource</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the resource&#39;s owner (through the <code>userId</code> field of the resource)</li>
</ul></li>
</ul>

<p><strong>An important note:</strong> When creating vocabularies/tags for a resource, the dataset id specified in the URL is validated,
and the requests fail if a dataset with the given id does not exist. When creating a vocabulary for a widget or layer,
you should ensure you specify the dataset id that matches that of the widget/layer, as that validation is not done
automatically - this is a known limitation of the current implementation, and may be modified at any time, and invalid
resources (those where the layer&#39;s/widget&#39;s dataset id does not match the dataset id defined in the resource) may be
purged without prior warning.</p>
<h4 id='errors-for-creating-a-single-vocabulary-tags-for-a-resource-2'>Errors for creating a single vocabulary/tags for a resource</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>This relationship already exists</td>
<td>The resource already has one or more vocabularies with the same name(s) for the specified application(s)</td>
</tr>
<tr>
<td>400</td>
<td>- <code>&lt;value&gt;</code>: <code>&lt;value&gt;</code> check failed. -</td>
<td>The body object has a <code>&lt;value&gt;</code> key which content is invalid (is not an object or is missing <code>tags</code> and/or <code>application</code>).</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create a vocabulary for a resource whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to create a vocabulary for a dataset that doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h2 id='updating-vocabularies-tags'>Updating vocabularies/tags</h2>
<p>If you have already associated vocabularies and tags to your resources and would like to modify those tags, the next set
of endpoints is for you.</p>

<p>There are three types of endpoints for updating existing vocabulary/tags:</p>

<ul>
<li>endpoints that allow you to modify a single vocabulary (and its tags) for a resource</li>
<li>endpoints that allow you to modify multiple vocabularies/tags for a single resource with a single request</li>
<li>endpoint that allows you to add new tags to an existing vocabulary. This endpoint only exists for dataset resources,
not widgets or layers.</li>
</ul>
<h3 id='updating-a-single-vocabulary-tags-for-a-resource'>Updating a single vocabulary/tags for a resource</h3>
<blockquote>
<p>Updating a vocabulary for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Updating a vocabulary for a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Updating a vocabulary for a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"science"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"maths"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"astronomy"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"chemistry"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This set of endpoints will allow you to update the tags of an existing vocabulary/tags for a resource.</p>

<p>The request body must contain the <code>application</code> of the vocabulary you want to update, and it will fail if you specify a
vocabulary name/application pair that does not exist. Additionally, it must contain a <code>tags</code> array of strings with a
list of new tags to use. Any existing tags that already existed for that vocabulary (for that resource and application)
will be deleted, and replaced with the values you provide through this request.</p>

<p>Assuming the update was successful, the response will contain a list of all vocabularies and their respective tags
associated with the specified resource, for all applications.</p>

<p>If you want to update vocabulary/tags for your resources, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the resource</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the resource&#39;s owner (through the <code>userId</code> field of the resource)</li>
</ul></li>
</ul>

<p><strong>An important note:</strong> When updating vocabulary/tags for a resource, the dataset id specified in the URL is validated,
and the requests fail if a dataset with the given id does not exist. When updating a vocabulary for a widget or layer,
you should ensure you specify the dataset id that matches that of the widget/layer, as that validation is not done
automatically - this is a known limitation of the current implementation, and may be modified at any time, and invalid
resources (those where the layer&#39;s/widget&#39;s dataset id does not match the dataset id defined in the resource) may be
purged without prior warning.</p>
<h4 id='errors-for-updating-a-single-vocabulary-tags-for-a-resource'>Errors for updating a single vocabulary/tags for a resource</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- <code>&lt;value&gt;</code>: <code>&lt;value&gt;</code> check failed. -</td>
<td>The body object has a <code>&lt;value&gt;</code> key which content is invalid (is not an object, or is missing <code>tags</code> and/or <code>application</code>).</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a vocabulary for a resource whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to create a vocabulary for a dataset that doesn&#39;t exist.</td>
</tr>
<tr>
<td>404</td>
<td>Relationship between undefined and dataset - <code>&lt;dataset id&gt;</code> and dataset: <code>&lt;dataset id&gt;</code> doesn&#39;t exist</td>
<td>You are trying to update a vocabulary that doesn&#39;t exist. Check your vocabulary name and application</td>
</tr>
</tbody></table>
<h3 id='updating-multiple-vocabularies-tags-for-a-dataset'>Updating multiple vocabularies/tags for a dataset</h3>
<blockquote>
<p>Updating multiple vocabularies/tags for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "vocabulary1": {
        "tags":["tag1", "tag2"],
        "application": "rw"
    },
    "vocabulary2": {
        "tags":["tag3", "tag4"],
        "application": "rw"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag4"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Know issue warning</strong> There&#39;s a known issue where you may experience a <code>400 - This relationship already exists</code> error
when using this endpoint. There&#39;s currently no ETA for its resolution. As a workaround, we suggest updating vocabularies
individually.</p>

<p>This endpoint will allow you to update multiple vocabularies/tags for a single dataset in a single request.</p>

<p>The request body must contain at least one key, each of them corresponding to the names of the vocabularies you want to
update. Each of these keys must have an object-type value, which in turn must contain the following keys:</p>

<ul>
<li><code>tags</code>: an array of tags that will replace all the tags for that vocabulary (associated with that dataset and
application)</li>
<li><code>application</code>: the application associated with the vocabulary you want to update.</li>
</ul>

<p>You can update different vocabularies for different applications in a single request.</p>

<p>Assuming the update was successful, the response will contain a list of all vocabularies and their respective tags
associated with the specified dataset, for all applications.</p>

<p>If you want to update vocabulary/tags for your datasets, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the dataset&#39;s owner (through the <code>userId</code> field of the dataset)</li>
</ul></li>
</ul>
<h4 id='errors-for-updating-multiple-vocabularies-tags-for-a-dataset'>Errors for updating multiple vocabularies/tags for a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- tags: tags can not be empty. -</td>
<td><code>tags</code> body fields is empty</td>
</tr>
<tr>
<td>400</td>
<td>- tags: tags check failed. -</td>
<td>Either the <code>tags</code> or <code>applications</code> body fields are missing or have an invalid value.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a vocabulary for a resource whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to create a vocabulary for a dataset that doesn&#39;t exist.</td>
</tr>
<tr>
<td>404</td>
<td>Relationship between undefined and dataset - <code>&lt;dataset id&gt;</code> and dataset: <code>&lt;dataset id&gt;</code> doesn&#39;t exist</td>
<td>You are trying to update a vocabulary that doesn&#39;t exist. Check your vocabulary name and application</td>
</tr>
</tbody></table>
<h3 id='concatenating-tags-to-a-dataset-vocabulary'>Concatenating tags to a dataset vocabulary</h3>
<blockquote>
<p>Concatenating tags to a dataset vocabulary</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;/concat <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "tags":["tag1", "tag2"],
    "application": "rw"
}'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag4"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to add more tags to an existing vocabulary for a dataset. The dataset is identified by the id
provided in the URL, while the specific vocabulary to update is determined by the vocabulary id in the URL and
the <code>application</code> value in the POST body - if no matching vocabulary is found, a new one is created. The body should
also contain an array of <code>tags</code> which will be appended to the target vocabulary. The endpoint validates and requires
that a dataset with the provided id exists. Any tags that exist both in the request and in the vocabulary prior to the
concat are merged - the resulting tags list won&#39;t have duplicated values.</p>

<p>Should the request be successful, the response will have a complete list of vocabularies/tags for the dataset, for all
applications.</p>
<h4 id='errors-for-concatenating-tags-to-a-dataset-vocabulary'>Errors for concatenating tags to a dataset vocabulary</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- tags: tags can not be empty. -</td>
<td><code>tags</code> body fields is empty</td>
</tr>
<tr>
<td>400</td>
<td>- tags: tags check failed. -</td>
<td>Either the <code>tags</code> or <code>applications</code> body fields are missing or have an invalid value.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to concatenate a vocabulary for a dataset whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>The dataset specified in the request URL doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h2 id='cloning-vocabularies-tags-for-a-dataset'>Cloning vocabularies/tags for a dataset</h2>
<blockquote>
<p>Cloning vocabularies/tags for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/clone/dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "newDataset": "&lt;target-dataset-id&gt;"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag2"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"tag3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tag4"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to clone all vocabularies/tags for all applications, for a single dataset.</p>

<p>The URL should include the id of the source dataset, while the POST body should include a <code>newDataset</code> field containing
the id of the target dataset. The target dataset id is not validated - the cloning will still occur even if the target
id doesn&#39;t correspond to an existing dataset.</p>

<p>The dataset you use as the target dataset can have existing vocabularies - the cloning operation is an additive, and
will not update nor destroy any existing vocabulary that may have already been associated with the target dataset.
However, the cloning operation will fail if it tries to overwrite a vocabulary (ie. if the target dataset already has a
vocabulary with the same name and application as one being created as part of the cloning). This failure is not atomic -
the target dataset may end up with some of the vocabularies of the source dataset. It&#39;s up to you, as the RW API user,
to both manage these collisions, and recover from them should they happen.</p>

<p>Assuming the cloning was successful, the response will contain a list of all vocabularies (both newly cloned and
preexisting) and their respective tags, for all applications, for the target dataset.</p>

<p>If you want to clone vocabularies/tags for your datasets, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the source dataset</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the resource&#39;s owner (through the <code>userId</code> field of the resource)</li>
</ul></li>
</ul>

<p><strong>An important note:</strong> When cloning vocabularies/tags for a dataset, the source dataset id specified in the URL is
validated, and the requests fails if a dataset with the given id does not exist. When creating a vocabulary for a widget
or layer, you should ensure you specify the dataset id that matches that of the widget/layer, as that validation is not
done automatically - this is a known limitation of the current implementation, and may be modified at any time, and
invalid resources (those where the layer&#39;s/widget&#39;s dataset id does not match the dataset id defined in the resource)
may be purged without prior warning.</p>
<h4 id='errors-for-cloning-vocabularies-tags-for-a-dataset'>Errors for cloning vocabularies/tags for a dataset</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>This relationship already exists</td>
<td>The target dataset already has one or more vocabularies with the same name(s) and application(s) as the source dataset.</td>
</tr>
<tr>
<td>400</td>
<td>- newDataset: newDataset can not be empty. -</td>
<td>The body object must have a <code>newDataset</code> key with the id of the target dataset.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to clone vocabulary for a source dataset whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to clone a vocabularies for a source dataset that doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h2 id='deleting-vocabularies-tags-for-a-resource'>Deleting vocabularies/tags for a resource</h2>
<p>There are two types of endpoints for deleting vocabularies/tags: one allows you to delete a single vocabulary (and its
tags) for a resource, while the other supports deleting all the vocabularies/tags for a single resource. Some use cases
for these include deleting vocabularies prior to deleting the actual resource, or typical housekeeping tasks you may
want to carry out on your data.</p>
<h3 id='deleting-a-single-vocabulary-tags-for-a-resource'>Deleting a single vocabulary/tags for a resource</h3>
<blockquote>
<p>Deleting a single vocabulary/tag for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre></div>
<blockquote>
<p>Deleting a single vocabulary/tag for a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre></div>
<blockquote>
<p>Deleting a single vocabulary/tag for a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Portugal"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"blue"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This set of endpoints will allow you to delete a single vocabulary and its tags, for a resource.</p>

<p>As a query param, you can optionally provide an <code>app</code> or <code>application</code> values, to identify the application of the
vocabulary to delete - by default, <code>rw</code> is assumed.</p>

<p>Assuming the operation was successful, the response will contain a list of all vocabularies and their respective tags
associated with the specified resource, for all applications - including the vocabulary that was deleted.</p>

<p>If you want to delete vocabularies/tags for your resources, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the resource</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the resource&#39;s owner (through the <code>userId</code> field of the resource)</li>
</ul></li>
</ul>

<p><strong>An important note:</strong> When deleting vocabulary/tags for a resource, the dataset id specified in the URL is validated,
and the requests fail if a dataset with the given id does not exist. When deleting a vocabulary for a widget or layer,
you should ensure you specify the dataset id that matches that of the widget/layer, as that validation is not done
automatically - this is a known limitation of the current implementation and may be modified at any time.</p>
<h4 id='errors-for-deleting-a-single-vocabulary-tags-for-a-resource'>Errors for deleting a single vocabulary/tags for a resource</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a vocabulary for a resource whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to create a vocabulary for a dataset that doesn&#39;t exist.</td>
</tr>
<tr>
<td>404</td>
<td>Relationship between <code>&lt;vocabulary-id&gt; and dataset -</code><dataset id> and dataset: `<dataset id> doesn&#39;t exist</td>
<td>You are trying to delete a vocabulary that doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h3 id='deleting-all-vocabulary-tags-for-a-resource'>Deleting all vocabulary/tags for a resource</h3>
<blockquote>
<p>Deleting all vocabularies/tag for a dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary
</code></pre></div>
<blockquote>
<p>Deleting all vocabularies/tag for a widget</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary
</code></pre></div>
<blockquote>
<p>Deleting all vocabularies/tag for a layer</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Portugal"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"blue"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Know issue warning</strong> There&#39;s a known issue where you may experience
a <code>404 - Relationship between undefined and dataset - &lt;dataset id&gt; and dataset: &lt;dataset id&gt; doesn&#39;t exist</code> error when
using these endpoints. If you experience this issue, keep in mind that some vocabularies may have already been deleted,
despite the error message. Those are not recoverable. There&#39;s currently no ETA for its resolution. As a workaround, we
suggest deleting vocabularies individually.</p>

<p>This set of endpoints will allow you to delete all vocabularies and their tags for a resource.</p>

<p>Assuming the operation was successful, the response will contain a list of all vocabularies and their respective tags
associated with the specified resource, for all applications - all of which were already deleted.</p>

<p>If you want to delete vocabularies/tags for your resources, you must have the necessary user account permissions.
Specifically:</p>

<ul>
<li>the user must be logged in and belong to the same application as the resource</li>
<li>the user must match one of the following:

<ul>
<li>have role <code>ADMIN</code></li>
<li>have role <code>MANAGER</code> and be the resource&#39;s owner (through the <code>userId</code> field of the resource)</li>
</ul></li>
</ul>

<p><strong>An important note:</strong> When deleting vocabulary/tags for a resource, the dataset id specified in the URL is validated,
and the requests fail if a dataset with the given id does not exist. When deleting vocabularies for a widget or layer,
you should ensure you specify the dataset id that matches that of the widget/layer, as that validation is not done
automatically - this is a known limitation of the current implementation and may be modified at any time.</p>
<h4 id='errors-for-deleting-all-vocabularies-tags-for-a-resource'>Errors for deleting all vocabularies/tags for a resource</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete vocabularies for a resource whose <code>application</code> value is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>404 - {\&quot;errors\&quot;:[{\&quot;status\&quot;:404,\&quot;detail\&quot;:\&quot;Dataset with id <code>&lt;dataset id&gt;</code> doesn&#39;t exist\&quot;}]}</td>
<td>You are trying to delete vocabularies for a dataset that doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h2 id='getting-vocabularies-and-tags-across-resources'>Getting vocabularies and tags across resources</h2>
<p>There are several endpoints you can use to retrieve vocabularies and their details, independently from the resources to
which they are associated</p>
<h3 id='getting-all-vocabularies'>Getting all vocabularies</h3>
<blockquote>
<p>Getting all vocabularies, their resources and tags</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/vocabulary
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"tag2"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"tag2"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0002ed77-f07d-4231-b4eb-cfda77eeafe5"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"tag2"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0002ed77-f07d-4231-b4eb-cfda77eeafe5"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e91"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"forestChange"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"forestChange"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint will give you a list of vocabularies. Inside each, you&#39;ll find a list of resources, identifying the
resource id, type, associated dataset (if the resource is a dataset, the dataset id will be equal to the resource id)and
the tags that said vocabulary associates to that resource</p>

<p>You can optionally pass a <code>limit</code> integer value as a query parameter if you wish to limit the number of vocabularies
returned by calls to this endpoint. There is not full blown pagination support for this endpoint.</p>
<h3 id='getting-a-single-vocabulary'>Getting a single vocabulary</h3>
<blockquote>
<p>Getting a single vocabulary, all its resources and tags</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/vocabulary/&lt;vocabulary-id&gt;
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"tag2"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"tag2"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0002ed77-f07d-4231-b4eb-cfda77eeafe5"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"tag2"</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0002ed77-f07d-4231-b4eb-cfda77eeafe5"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e91"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint will give you the details for a single vocabulary, identified by name. In it, you&#39;ll find a list of
resources, identified by the resource id, type, associated dataset (if the resource is a dataset, the dataset id will be
equal to the resource id) and the tags that said vocabulary associates to that resource.</p>

<p>Keep in mind that there&#39;s an implicit application filter applied to the data returned - only vocabularies and
associations for the corresponding application are returned. By default, this filter uses the <code>rw</code> value, but you can
modify it with the <code>application</code> or <code>app</code> query parameters.</p>
<h3 id='getting-tags-for-single-vocabulary'>Getting tags for single vocabulary</h3>
<blockquote>
<p>Getting the tags for a single vocabulary</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/vocabulary/&lt;vocabulary-id&gt;/tags
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"tag11"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tag21"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tag2"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint will give you a flat list of all the tags associated with the specified vocabulary.</p>

<p>Keep in mind that there&#39;s an implicit application filter applied to the data returned - only tags for the corresponding
application are returned. By default, this filter uses the <code>rw</code> value, but you can modify it with the <code>application</code>
or <code>app</code> query parameters.</p>
<h2 id='getting-resources-by-vocabulary-and-tag'>Getting resources by vocabulary and tag</h2>
<blockquote>
<p>Getting datasets by vocabulary and tag</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset/vocabulary/find?&lt;vocabulary-id&gt;<span class="o">=</span>&lt;tag&gt;
</code></pre></div>
<blockquote>
<p>Getting widgets by vocabulary and tag</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/vocabulary/find?&lt;vocabulary-id&gt;<span class="o">=</span>&lt;tag&gt;
</code></pre></div>
<blockquote>
<p>Getting layers by vocabulary and tag</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/vocabulary/find?&lt;vocabulary-id&gt;<span class="o">=</span>&lt;tag&gt;
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e92"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e92"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This is perhaps the most useful endpoint when it comes to data discovery - it allows you to specify a vocabulary name
and a tag or set of tags, and see resources that match that search criteria.</p>

<p>All three endpoints require at least one query parameter, in the format <code>&lt;vocabulary-id&gt;=&lt;tag&gt;</code>. This will return all
resources of that type, associated with a vocabulary with the name <code>vocabulary-id</code>, and having a tag with value <code>tag</code>
for that vocabulary.</p>

<p>You can expand these filters by specifying multiple tags for a single vocabulary, using
the <code>&lt;vocabulary-id&gt;=&lt;tag1&gt;,&lt;tag2&gt;</code> syntax. This type of filter will return resources that have either <code>tag1</code> or <code>tag2</code>
for vocabulary <code>vocabulary-id</code></p>

<p>You can also filter by multiple vocabularies using multiple query parameters with the formats described above. The
result will contain any resource that matches either vocabulary/tags filters.</p>

<p>The filters described above do not take into account the <code>application</code> for which the vocabularies were defined. If you
wish to only see results matching the vocabulary of a specific application, you can pass either an <code>app</code>
or <code>application</code>
query parameter with the value of the application you wish to filter by.</p>
<h4 id='errors-for-getting-resources-by-vocabulary-and-tag'>Errors for getting resources by vocabulary and tag</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Vocabulary and Tags are required in the queryParams</td>
<td>You must specify at least one vocabulary/tag to filter by.</td>
</tr>
</tbody></table>
<h1 id='geostore'>Geostore</h1><h2 id='what-is-geostore'>What is Geostore</h2>
<p>If you are new to the RW API, or want to learn more about the concept of a geostore, we strongly encourage you to read the <a href="concepts.html#geostore">geostore concept</a> documentation first. It gives you a brief and clear description of what a geostore is, and what it can do for you.</p>

<p>Once you&#39;ve read that section, you can come back here to learn more details about using the RW API Geostore feature, which aims to provide a comprehensive way to communicate geographic vector-data structures described using <a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> between platforms and microservices.</p>

<p><a href="reference.html#what-are-geostore-objects">Geostore objects</a>, describing things like the boundaries of countries, protected areas or land use types, have been uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you. They are particularly useful for combining with the range of <a href="concepts.html#dataset">datasets</a> available in the RW API, for example to create national summaries or for making a specific analysis within your own user-defined region.</p>

<p>To find out more about accessing the geostore objects already available on the RW API, check out the documentation on <a href="reference.html#getting-geostore-objects">getting geostore objects</a>. A quick, visual way to view an existing geostore is by using the <a href="reference.html#get-geostore-by-geostore-id-and-view-at-geojson-io"><code>/geostore/:id/view</code></a> endpoint.</p>

<p>You can also <a href="reference.html#create-a-geostore-object">create you own geostore objects</a> on the RW API, if you&#39;d like to share your data with the world, or if you are looking to use the RW API and its features to gain insights into your data.</p>
<h2 id='what-are-geostore-objects'>What are Geostore objects</h2>
<p>Geostore objects contain <a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> <code>FeatureCollection</code> objects (<code>geojson</code>), with a single <code>Feature</code> whose <code>Geometry</code> has been checked for geometric validity, and have been assigned an identifier (<code>id</code>, <code>hash</code>) upon creation.</p>

<p>This identifier is a 128-bit hash generated by passing the <a href="concepts.html#geostore">pre-processed GeoJSON string</a> through the <a href="https://en.wikipedia.org/wiki/MD5">MD5 message-digest algorithm</a>. This means that each identifier is a unique fingerprint of the GeoJSON string.</p>

<p>If you add an exact copy of your GeoJSON string, it will generate the same hash. But if any GeoJSON property is changed in any way, the generated hash will be different. Hence, the Geostore identifier provides the RW API a way to ensure that platforms and microservices are using <em>exactly</em> the same geographic structures. This also means that Geostore objects are static and cannot be modified.</p>

<p>To prevent overwriting of existing geostore objects, they contain a field indicated if the object is locked to editing (<code>lock</code>); which can be <a href="reference.html#create-a-geostore-object">set when creating geostore objects</a>.</p>

<p>Also, during object creation the minimum bounding box enclosing all geometries in the GeoJSON (<code>bbox</code>), and, if the geometries are type (Multi) Polygon, total surface area in hectares of the geometries (<code>areaHa</code>) are added to the geostore. <em>Note these values are not calculated if supplied when creating a geostore.</em></p>

<p>Geostore objects can also be <a href="reference.html#create-using-a-provider-definition">created by getting a GeoJSON from provider API</a>; in which case the geostore will also include an object which gives information used to connect to the provider data source (<code>provider</code>). At present the only provider definition supported is a <a href="https://carto.com/">Carto</a> table, using  <code>&quot;type&quot;: &quot;carto&quot;</code>.</p>

<p>Finally, all geostore objects have a property for storing application specific attributes (<code>info</code>), which has no formalized schema. Here, fields used for indexing, and metadata, related to use on different platforms are added.</p>

<blockquote>
<p>Overview of a geostore object</p>
</blockquote>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>A unique identifier for the geostore object in the form of a 128 bit <a href="https://en.wikipedia.org/wiki/MD5">MD5 hash</a> generated from the GeoJSON object.</td>
</tr>
<tr>
<td><code>hash</code></td>
<td>string</td>
<td>A unique identifier for the geostore object in the form of a 128 bit <a href="https://en.wikipedia.org/wiki/MD5">MD5 hash</a> generated from the GeoJSON object.</td>
</tr>
<tr>
<td><code>geojson</code></td>
<td>object</td>
<td>A valid <code>FeatureCollection</code>, <code>Feature</code>, or <code>Geometry</code> <a href="https://geojson.org/">GeoJSON</a> object.</td>
</tr>
<tr>
<td><code>provider</code></td>
<td>object</td>
<td>Optional <a href="reference.html#create-using-a-provider-definition">provider definition</a> used to fetch GeoJSON data from APIs.</td>
</tr>
<tr>
<td><code>lock</code></td>
<td>string</td>
<td>Optional indication if the object is locked for editing</td>
</tr>
<tr>
<td><code>areaHa</code></td>
<td>number</td>
<td>Optional total surface area in hectares of all Polygon and MultiPolygon geometries in the GeoJSON object.</td>
</tr>
<tr>
<td><code>bbox</code></td>
<td>array</td>
<td>Array describing the <a href="https://en.wikipedia.org/wiki/Minimum_bounding_box">minimum bounding box</a> enclosing all of the geometries in the GeoJSON object, expressed as an array of the form min Longitude , min Latitude , max Longitude , max Latitude.</td>
</tr>
<tr>
<td><code>info</code></td>
<td>object</td>
<td>Object that defines application specific properties, for example used for indexing or related to editing of the geostore object.</td>
</tr>
</tbody></table>
<h2 id='overview-of-available-endpoints'>Overview of available endpoints</h2>
<p>The Geostore API consists of a number of endpoints to help users interact with geostore objects. Many of them are essentially helpers to make it easy to access geometries from useful data sources, such as:</p>

<ul>
<li><strong>Administrative areas</strong> (countries, regions, ect.) from the <a href="https://en.wikipedia.org/wiki/GADM">Database of Global Administrative Areas (GADM)</a>.</li>
<li><strong>Protected areas</strong> (world heritage sites, national parks, ect.) from the <a href="https://www.protectedplanet.net/c/world-database-on-protected-areas">The World Database on Protected Areas</a>.</li>
<li><strong>Land activity/use types</strong> (logging, mining, ect.) from the <a href="https://www.wri.org/">WRI</a> <a href="https://data.globalforestwatch.org/datasets/managed-forest-concessions">managed forest</a>, <a href="https://data.globalforestwatch.org/datasets/mining-concessions">mining</a>, and <a href="https://data.globalforestwatch.org/datasets/20398d4dc36e47bd92b559786670f270_1">oil palm</a> concessions, and <a href="https://wwf.panda.org">WWF</a>/<a href="https://www.resolve.ngo/about.htm">RESOLVE</a> <a href="https://data.globalforestwatch.org/datasets/tiger-conservation-landscapes">tiger conservation</a> datasets.<br></li>
</ul>

<p>As these data sets are periodically updated, these &quot;helper&quot; endpoints are updated to use the latest data. So unless you really need an older version of a data set, such as GADM, you should always use the latest endpoint version. See the table below to get an overview of what can be done; click on the description to get more details.</p>

<blockquote>
<p>Comparison of endpoint versions</p>
</blockquote>

<table><thead>
<tr>
<th>Version</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>v1</code></td>
<td>GADM version 2.8.</td>
</tr>
<tr>
<td><code>v2</code></td>
<td>GADM version 3.6.</td>
</tr>
</tbody></table>

<blockquote>
<p>Overview of endpoints</p>
</blockquote>

<table><thead>
<tr>
<th>Method</th>
<th>Path</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>POST</td>
<td><code>/v1/geostore</code></td>
<td><a href="reference.html#create-a-geostore-object">Create a geostore object</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/:id</code></td>
<td><a href="reference.html#get-a-geostore-object-by-geostore-id">Get a geostore object by Geostore id</a></td>
</tr>
<tr>
<td>POST</td>
<td><code>/v2/geostore/find-by-ids</code></td>
<td><a href="reference.html#get-geostore-objects-by-geostore-ids">Get geostore objects by Geostore ids</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/:id/view</code></td>
<td><a href="reference.html#get-geostore-by-geostore-id-and-view-at-geojson-io">Get a geostore object by Geostore id and view at GeoJSON.io</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/admin/list</code></td>
<td><a href="reference.html#get-all-geostore-ids-names-and-country-codes">Get all Geostore ids, names and country codes</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/admin/:iso</code></td>
<td><a href="reference.html#get-geostore-by-country-code">Get a geostore object by country code</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/admin/:iso/:id1</code></td>
<td><a href="reference.html#get-geostore-by-country-code-and-gadm-admin-1-id">Get a geostore object by country code and GADM admin 1 id</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/admin/:iso/:id1/:id2</code></td>
<td><a href="reference.html#get-geostore-by-country-code-gadm-admin-1-and-admin-2-ids">Get a geostore object by country code, GADM admin 1 and admin 2 ids</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/wdpa/:id</code></td>
<td><a href="reference.html#get-geostore-by-world-database-on-protected-areas-id">Get a geostore object by WDPA id</a></td>
</tr>
<tr>
<td>GET</td>
<td><code>/v2/geostore/use/:name/:id</code></td>
<td><a href="reference.html#get-geostore-by-land-use-type-keyword-and-id">Get a geostore object by Land Use Type name and id</a></td>
</tr>
<tr>
<td>POST</td>
<td><code>/v1/geostore/area</code></td>
<td><a href="reference.html#calculate-the-area-of-a-geostore-object">Calculate the area of a provided Geostore object</a></td>
</tr>
</tbody></table>
<h2 id='create-a-geostore-object'>Create a geostore object</h2>
<p>Geostore objects can be created in the RW API Geostore using a valid GeoJSON object or by selecting a row from a <a href="https://carto.com/">Carto</a> table.</p>

<blockquote>
<p>Errors for creating a geostore object</p>
</blockquote>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: <code>&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code>: empty or invalid <code>&lt;field&gt;</code></td>
<td>The provided value for <code>&lt;field&gt;</code> is invalid. This is usually happens if an invalid value type is provided, but certain fields use more advanced validation rules, that may produce this error message if validation fails (ie: <code>geojson</code>, which must be <code>type:</code> <code>FeatureCollection</code>, <code>Feature</code>, or <code>Geometry</code>).</td>
</tr>
<tr>
<td>400</td>
<td>provider: must be valid <list of valid providers></td>
<td>Your <code>provider</code> <code>type</code> value is invalid. The <code>&lt;list of valid providers&gt;</code> will contain the list of providers that are supported.</td>
</tr>
</tbody></table>
<h3 id='create-using-a-geojson'>Create using a GeoJSON</h3>
<p>Geostore objects can be created via the POST <code>geostore</code> endpoint, which accepts as body a GeoJSON object (<code>&lt;geojson&gt;</code>). This must be a <code>FeatureCollection</code>, <code>Feature</code> or <code>Geometry</code>. If the object is correctly added to the Geostore a <code>200</code> response is returned, as well as the new geostore object.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/geostore/ <span class="se">\</span>
     <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{"geojson": &lt;geojson&gt;}'</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://api.resourcewatch.org/v1/geostore'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
   "geojson":{
      "type":"FeatureCollection",
      "features":[
         {
            "type":"Feature",
            "properties":{

            },
            "geometry":{
               "type":"Polygon",
               "coordinates":[
                  [
                     [
                        -4.4549560546875,
                        40.84706035607122
                     ],
                     [
                        -4.4549560546875,
                        41.30257109430557
                     ],
                     [
                        -3.5211181640624996,
                        41.30257109430557
                     ],
                     [
                        -3.5211181640624996,
                        40.84706035607122
                     ],
                     [
                        -4.4549560546875,
                        40.84706035607122
                     ]
                  ]
               ]
            }
         }
      ]
   }
}'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b25676360d8bbd5106a022103e0cd28"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">[</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">40.847060356</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">41.302571094</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-3.521118164</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">41.302571094</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-3.521118164</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">40.847060356</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">40.847060356</span><span class="w">
                                    </span><span class="p">]</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Polygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b25676360d8bbd5106a022103e0cd28"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">397372.34118232</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                </span><span class="mf">40.847060356</span><span class="p">,</span><span class="w">
                </span><span class="mf">-3.521118164</span><span class="p">,</span><span class="w">
                </span><span class="mf">41.302571094</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='create-using-a-provider-definition'>Create using a provider definition</h3>
<p>Geostore objects can be created via the POST <code>geostore</code> endpoint, which accepts as body a provider definition object (<code>&lt;provider&gt;</code>), the API then fetches a GeoJSON from the provider, and adds it to the Geostore. If the object is correctly added to the Geostore a <code>200</code> response is returned, as well as the new geostore object. At present the only provider definition supported is a <a href="https://carto.com/">Carto</a> table, using <code>&quot;type&quot;: &quot;carto&quot;</code>.</p>

<p>If the specified <code>table</code>, <code>user</code>, or <code>filter</code> is not recognized a <code>400</code> response is returned with the error message &quot;Geojson not found&quot;.</p>

<blockquote>
<p>Overview of provider object</p>
</blockquote>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td>string</td>
<td>Keyword of the provider</td>
</tr>
<tr>
<td><code>table</code></td>
<td>string</td>
<td>Name of the provider table</td>
</tr>
<tr>
<td><code>user</code></td>
<td>string</td>
<td>Provider username</td>
</tr>
<tr>
<td><code>filter</code></td>
<td>string</td>
<td>Provider specific filter</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{"provider": &lt;provider&gt;}'</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
        "provider":{
            "type": "carto",
            "table": "gfw_mining",
            "user": "wri-01",
            "filter": "cartodb_id=573"
        }
    }'</span>
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b3b2875affa75f145b4f3e5289fd47d7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">14.26438308756265</span><span class="p">,</span><span class="w">
                  </span><span class="mf">14.062500000000002</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">5.266007882805498</span><span class="p">,</span><span class="w">
                  </span><span class="mf">2.8125</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">44.84029065139799</span><span class="p">,</span><span class="w">
                  </span><span class="mf">16.523437500000004</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">-7.362466865535738</span><span class="p">,</span><span class="w">
                  </span><span class="mf">-3.1640625000000004</span><span class="w">
                </span><span class="p">],</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPoint"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b3b2875affa75f145b4f3e5289fd47d7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carto"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw_mining"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wri-01"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb_id=573"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mf">-102.65625</span><span class="p">,</span><span class="w">
        </span><span class="mf">-29.688052749856787</span><span class="p">,</span><span class="w">
        </span><span class="mf">45.87890625</span><span class="p">,</span><span class="w">
        </span><span class="mf">57.79794388498275</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='getting-geostore-objects'>Getting geostore objects</h2>
<p>The fundamental way to read geometries from the RW APIs Geostore is by using Geostore ids. Using these identifiers you can ensure that you are always <a href="concepts.html#geojson-object">retrieving exactly the same <code>Feature</code></a>. If you <a href="reference.html#create-a-geostore-object">add your own geostore objects</a> you will be using <a href="reference.html#get-geostore-by-geostore-id">these endpoints</a>.</p>

<p>Alternatively you may prefer to get selected geometries from the datasets already added to the RW API Geostore, such as the <a href="reference.html#overview-of-available-endpoints">latest administrative areas, protected areas, or land use types</a>. Note, these are periodically updated, and potentially both geometries and ids may change between versions. By design this means that, for example, the Geostore ids of countries change between versions. These geometries can also be simplified when reading them from the Geostore, using the parameter <code>?simplify=&lt;value&gt;</code>, where <code>&lt;value&gt;</code> is given to the simplification algorithm - <code>0.005</code> usually works well.</p>
<h3 id='get-a-geostore-object-by-geostore-id'>Get a geostore object by Geostore id</h3>
<p>Geostore objects can be retrieved via the GET <code>geostore/:id</code> endpoint, which returns a single object selected from the Geostore using a single <a href="concepts.html#geostore">Geostore id</a> (<code>&lt;id&gt;</code>).</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/&lt;<span class="nb">id</span><span class="o">&gt;</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/ca38fa80a4ffa9ac6217a7e0bf71e6df
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca38fa80a4ffa9ac6217a7e0bf71e6df"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Polygon"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">[</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.81137220349083</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.811803118457306</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.272732079029083</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.811803118457306</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.272732079029083</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.81137220349083</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.81137220349083</span><span class="w">
                                    </span><span class="p">]</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">]</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca38fa80a4ffa9ac6217a7e0bf71e6df"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3057556230214663</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                </span><span class="mf">42.81137220349083</span><span class="p">,</span><span class="w">
                </span><span class="mf">-5.272732079029083</span><span class="p">,</span><span class="w">
                </span><span class="mf">42.811803118457306</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='errors-for-getting-geostore-objects-by-id'>Errors for getting geostore objects by id</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore with the id provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-geostore-by-geostore-id-and-view-at-geojson-io'>Get geostore by Geostore id and view at GeoJSON.io</h3>
<p>Geostore objects can be retrieved and viewed via the GET <code>geostore/:id/view</code> endpoint, which returns a URL allowing viewing of a single geostore object selected by <a href="reference.html#what-are-geostore-objects">Geostore id</a> (<code>&lt;id&gt;</code>)  at GeoSON.io.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/&lt;<span class="nb">id</span><span class="o">&gt;</span>/view
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/ca38fa80a4ffa9ac6217a7e0bf71e6df/view
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"view_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://geojson.io/#data=data:application/json,%7B%22crs%22%3A%7B%7D%2C%22type%22%3A%22FeatureCollection%22%2C%22features%22%3A%5B%7B%22type%22%3A%22Feature%22%2C%22geometry%22%3A%7B%22type%22%3A%22Polygon%22%2C%22coordinates%22%3A%5B%5B%5B-5.273512601852417%2C42.81137220349083%5D%2C%5B-5.273512601852417%2C42.811803118457306%5D%2C%5B-5.272732079029083%2C42.811803118457306%5D%2C%5B-5.272732079029083%2C42.81137220349083%5D%2C%5B-5.273512601852417%2C42.81137220349083%5D%5D%5D%7D%2C%22properties%22%3Anull%7D%5D%7D"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='errors-for-viewing-geostore-objects-by-id'>Errors for viewing geostore objects by id</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Geometry too large, please try again with a smaller geometry.</td>
<td>The Geostore provided is too large (more than 150k chars when stringified) and cannot be viewed.</td>
</tr>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore with the id provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-geostore-objects-by-geostore-ids'>Get geostore objects by Geostore ids</h3>
<p>Many geostore objects can be retrieved via the POST <code>geostore/find-by-ids</code> endpoint, which returns an array of a geostore objects selected by an array of <a href="reference.html#what-are-geostore-objects">Geostore ids</a> (<code>[&lt;id&gt;, &lt;id&gt;]</code>). In case of success, the returned response will contain an array with all of the geostore objects found and summary info is available in the root property <code>info</code>.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/geostore/find-by-ids <span class="se">\</span>
     <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{"geostores": [&lt;id&gt;, &lt;id&gt;]}'</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/geostore/find-by-ids <span class="se">\</span>
     <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     <span class="nt">-d</span> <span class="s1">'{"geostores": ["35a6d982388ee5c4e141c2bceac3fb72", "8f77fe62cf15d5098ba0ee11c5126aa6"]}'</span>
</code></pre></div>
<blockquote>
<p>Example response (coordinates are truncated)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                        </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                            </span><span class="err">...</span><span class="w">
                                        </span><span class="p">],</span><span class="w">
                                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                                    </span><span class="p">},</span><span class="w">
                                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">]</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                        </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">50662609.25209112</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mf">-18.1604175567627</span><span class="p">,</span><span class="w">
                            </span><span class="mf">27.6384716033936</span><span class="p">,</span><span class="w">
                            </span><span class="mf">4.32819509506226</span><span class="p">,</span><span class="w">
                            </span><span class="mf">43.7915267944337</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                        </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                            </span><span class="err">...</span><span class="w">
                                        </span><span class="p">],</span><span class="w">
                                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                                    </span><span class="p">},</span><span class="w">
                                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">]</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                        </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">54935531.53854849</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mf">-5.14375114440907</span><span class="p">,</span><span class="w">
                            </span><span class="mf">41.3337516784668</span><span class="p">,</span><span class="w">
                            </span><span class="mf">9.5604162216186</span><span class="p">,</span><span class="w">
                            </span><span class="mf">51.08939743042</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FRA"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"foundIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"returned"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='errors-for-getting-multiple-geostore-objects-by-id'>Errors for getting multiple geostore objects by id</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore with the id provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-all-geostore-ids-names-and-country-codes'>Get all Geostore ids, names and country codes</h3>
<p>All of the Geostore ids, names, and country ISO 3166-1 alpha-3 code values available from the GADM data source in the Geostore can be retrieved via the GET <code>geostore/admin/list</code> endpoint, which returns an array of objects with the properties <code>geostoreId</code>, <code>name</code>, and <code>iso</code>.</p>

<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/list
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FRA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d568c183033da6c17cc28c4aecf1bcf"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cod"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Democratic Republic of the Congo"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><em>Note - This endpoint does not return a unique array of iso codes and names.</em></p>
<h2 id='getting-predefined-geostores-for-commonly-used-geometries'>Getting predefined geostores for commonly used geometries</h2>
<p>The endpoints described below allow API users to retrieve geostores representative of the boundaries of countries, GADM admin regions, WDPA and land use areas. These endpoints can be used as utility methods to retrieve commonly used geometries.</p>
<h3 id='get-geostore-by-country-code'>Get geostore by country code</h3>
<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/&lt;iso&gt;
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/ESP
</code></pre></div>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56f9a919e061d5edd10c042a8fcd31b6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="err">...</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56f9a919e061d5edd10c042a8fcd31b6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">50662609.2516529</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-18.160417557</span><span class="p">,</span><span class="w">
                </span><span class="mf">27.638471603</span><span class="p">,</span><span class="w">
                </span><span class="mf">4.328195095</span><span class="p">,</span><span class="w">
                </span><span class="mf">43.791526794</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"gadm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.8"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use the GET <code>geostore/admin/:iso</code> endpoint to retrieve a geostore object representative of the boundaries of the country with <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> (<code>&lt;iso&gt;</code>). The returned geometries can be simplified using the parameter <code>?simplify=&lt;value&gt;</code>. Where <code>&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - The source of the geometries is GADM version 3.6.</em></p>
<h4 id='errors-for-getting-geostore-objects-by-country-code'>Errors for getting geostore objects by country code</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the country ISO code provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-geostore-by-country-code-and-gadm-admin-1-id'>Get geostore by country code and GADM admin 1 id</h3>
<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/&lt;iso&gt;/&lt;id1&gt;
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/ESP/9
</code></pre></div>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d1534d7c24b2f907c4ae37d11fc51fe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="err">...</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d1534d7c24b2f907c4ae37d11fc51fe"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">1036273.8136673134</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-2.500030994</span><span class="p">,</span><span class="w">
                </span><span class="mf">41.909896851</span><span class="p">,</span><span class="w">
                </span><span class="mf">-0.726752043</span><span class="p">,</span><span class="w">
                </span><span class="mf">43.314189911</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id1"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"gadm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.8"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use the GET <code>geostore/admin/:iso/:id1</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> (<code>&lt;iso&gt;</code>) and <a href="https://gadm.org/metadata.html">GADM admin level 1</a> id (<code>&lt;id1&gt;</code>). The returned geometries can be simplified using the parameter <code>?simplify=&lt;value&gt;</code>. Where <code>&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - The source of the geometries is GADM version 3.6.</em></p>
<h4 id='errors-for-getting-geostore-objects-by-country-code-and-gadm-admin-1-id'>Errors for getting geostore objects by country code and GADM admin 1 id</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the combination of country ISO code and GADM admin 1 id provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-geostore-by-country-code-gadm-admin-1-and-admin-2-ids'>Get geostore by country code, GADM admin 1 and admin 2 ids</h3>
<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/&lt;iso&gt;/&lt;id1&gt;/&lt;id2&gt;
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/admin/ESP/1/2
</code></pre></div>
<blockquote>
<p>Example response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"214e74a9e8702f78354ed5cb0297c10d"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"214e74a9e8702f78354ed5cb0297c10d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">744195.8099038196</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-6.47347212</span><span class="p">,</span><span class="w">
                </span><span class="mf">35.9995842</span><span class="p">,</span><span class="w">
                </span><span class="mf">-5.08662891</span><span class="p">,</span><span class="w">
                </span><span class="mf">37.05246735</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"simplifyThresh"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00005</span><span class="p">,</span><span class="w">
                </span><span class="nl">"gadm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.6"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cdiz"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use the GET <code>geostore/admin/:iso/:id1/:id2</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> (<code>&lt;iso&gt;</code>),  <a href="https://gadm.org/metadata.html">GADM admin level 1</a> id (<code>&lt;id1&gt;</code>), and <a href="https://gadm.org/metadata.html">GADM admin level 2</a> id (<code>&lt;id2&gt;</code>). The returned geometries can be simplified using the parameter <code>?simplify=&lt;value&gt;</code>. Where <code>&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - The source of the geometries is GADM version 3.6.</em></p>
<h4 id='errors-for-getting-geostore-objects-by-country-code-gadm-admin-1-id-and-admin-2-id'>Errors for getting geostore objects by country code, GADM admin 1 id and admin 2 id</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the combination of country ISO code, GADM admin 1 id and admin 2 id provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-geostore-by-world-database-on-protected-areas-id'>Get geostore by World Database on Protected Areas id</h3>
<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/wdpa/&lt;<span class="nb">id</span><span class="o">&gt;</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/wdpa/142809
</code></pre></div>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88db597b6bcd096fb80d1542cdc442be"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="err">...</span><span class="w">
                                </span><span class="p">],</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88db597b6bcd096fb80d1542cdc442be"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">5081.838068566336</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-6.031685272</span><span class="p">,</span><span class="w">
                </span><span class="mf">36.160220287</span><span class="p">,</span><span class="w">
                </span><span class="mf">-5.879245686</span><span class="p">,</span><span class="w">
                </span><span class="mf">36.249656987</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"wdpaid"</span><span class="p">:</span><span class="w"> </span><span class="mi">142809</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use the GET <code>geostore/admin/wdpa/:id</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="https://www.protectedplanet.net/">World Database on Protected Areas</a> (WDPA) with id (<code>&lt;id&gt;</code>) provided. To find valid WDPA id values check the link above.</p>

<p><em>Note marine protected areas are NOT included</em></p>
<h4 id='errors-for-getting-geostore-objects-by-wdpa-id'>Errors for getting geostore objects by WDPA id</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the WDPA id provided was not found.</td>
</tr>
</tbody></table>
<h3 id='get-geostore-by-land-use-type-keyword-and-id'>Get geostore by Land Use Type keyword and id</h3>
<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/use/&lt;name&gt;/&lt;<span class="nb">id</span><span class="o">&gt;</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/geostore/use/logging/1
</code></pre></div>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd5feac1b0dd4e73f3a1553889807622"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
                            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd5feac1b0dd4e73f3a1553889807622"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">45978.43408272762</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">102.691404026</span><span class="p">,</span><span class="w">
                </span><span class="mf">-0.248440312</span><span class="p">,</span><span class="w">
                </span><span class="mf">103.036606</span><span class="p">,</span><span class="w">
                </span><span class="mf">-0.071735991</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw_logging"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"simplify"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use the GET <code>geostore/admin/use/:name/:id</code> endpoint to retrieve a geostore object representative of the boundaries of a Land Use Type keyword (<code>&lt;name&gt;</code>) and  Land Use Type object id (<code>&lt;id&gt;</code>). </p>

<p>Geostore objects for five land use types are available: </p>

<ul>
<li>Tiger conservation landscapes (<code>tiger_conservation_landscapes</code>)</li>
<li><a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">Oil Palm production (<code>oilpalm</code>)</a></li>
<li><a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">Mining activities (<code>mining</code>)</a></li>
<li><a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">Wood fiber production (<code>fiber</code>)</a></li>
<li><a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">Forest logging activities (<code>logging</code>)</a>.</li>
</ul>

<p>The returned geometries can be simplified using the parameter <code>?simplify=&lt;value&gt;</code>. Where <code>&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - each of the land use types actually represents an individual dataset, each with different geographical extents and temporal coverage, see the <a href="reference.html#overview-of-available-endpoints">dataset urls</a> for details</em>  </p>
<h4 id='errors-for-getting-geostore-objects-by-land-use-type'>Errors for getting geostore objects by land use type</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the specified <code>&lt;name&gt;</code> and <code>&lt;id&gt;</code> was not found.</td>
</tr>
</tbody></table>
<h2 id='calculate-the-area-of-a-geostore-object'>Calculate the area of a geostore object</h2>
<p>If you have a GeoJSON geometry and you intend to know the area that your geometry occupies or what is the bounding box for your geometry, you can use the POST <code>v2/geostore/area</code> endpoint to calculate the area of your geometry.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/geostore/area <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{"geojson": &lt;geojson&gt;}'</span>
</code></pre></div>
<blockquote>
<p>Example URL request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/geostore/area <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
      "geojson":{
        "type": "Polygon",
        "coordinates": [
            [
                [-0.1758,51.2894],
                [8.4375,51.1793],
                [6.8555,47.5172],
                [-0.1758,51.2894]
            ]
        ]
    }}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geomArea"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-0.1758</span><span class="p">,</span><span class="w">
                </span><span class="mf">47.5172</span><span class="p">,</span><span class="w">
                </span><span class="mf">8.4375</span><span class="p">,</span><span class="w">
                </span><span class="mf">51.2894</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12797498.414088473</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='errors-for-calculating-the-area-of-a-geostore-object'>Errors for calculating the area of a geostore object</h4>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>geojson, esrijson or provider required.</code></td>
<td>You need to provide the GeoJSON for the geometry you intend to calculate the area.</td>
</tr>
</tbody></table>
<h1 id='subscriptions'>Subscriptions</h1><h2 id='what-is-a-subscription'>What is a subscription?</h2>
<p><em>Note: We strongly recommend that you read the <a href="concepts.html#dataset">dataset concept</a> and <a href="reference.html#dataset">dataset endpoints</a> sections before proceeding.</em></p>

<p>A subscription allows you to get notified of updates on a datasets&#39; data - either for every update, or for updates restricted to geographical areas of your interest. For example, you can use subscriptions to subscribe to deforestation alerts (<a href="http://api.resourcewatch.org/v1/dataset/61170ad0-9d6a-4347-8e58-9b551eeb341e">GLAD alerts dataset</a>) in the Amazon forest, or track fire alerts (<a href="http://api.resourcewatch.org/v1/dataset/64c948a6-5e34-4ef2-bb69-6a6535967bd5">VIIRS fire alerts dataset</a>) in your area of residence.</p>

<p>In the following sections, we will cover how you can interact and manage subscriptions in the RW API. We will see how you can customize subscriptions so that we only get notified for changes in a dataset&#39;s data for specific geographic regions. You will learn how to use them to get notified via email or calls to a URL you provide. We will also dive into subscription lifecycle, and understand how we can confirm subscriptions, resend confirmation emails and how to unsubscribe and stop receiving notifications.</p>
<h2 id='subscription-lifecycle'>Subscription lifecycle</h2>
<p>In this section, you will learn about the lifecycle of a subscription. This will help you understand how you can best use subscriptions to meet your goals. The first step for using subscriptions is understanding which data you want to subscribe - for this, we recommend <a href="reference.html#getting-all-datasets">searching the existing datasets</a> in the WRI API (or maybe even <a href="reference.html#creating-a-dataset">creating a new one</a>). Once you are certain of the dataset you wish to subscribe, the next step is ensuring that this dataset is subscribable.</p>
<h3 id='subscribable-datasets'>Subscribable datasets</h3>
<blockquote>
<p>Example of a subscribable dataset</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example dataset"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"app"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carto"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nl">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataQuery"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * FROM dataset-name  WHERE 'reported_date' &gt;= '{{begin}}' AND 'reported_date' &lt;= '{{end}}' AND 'number_dead' &gt; 0 ORDER BY reported_date DESC LIMIT 10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subscriptionQuery"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT COUNT(*) FROM dataset-name WHERE 'reported_date' &gt;= '{begin}' AND 'reported_date' &lt;= '{end}' AND 'number' &gt; 0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>While you can create a subscription for <em>any</em> dataset, some conditions must be met by the dataset for its corresponding subscriptions to be functional and actually work as described here.</p>

<p>In order to support a functional subscription, a dataset must have some queries defined in its <code>subscribable</code> property. In this property, of type object, one (or many) sub-objects should be declared. Please note that you can define multiple keys in the <code>subscribable</code> object, and each key will be evaluated separately and trigger its own updates. Each object inside the <code>subscribable</code> property must define two queries:</p>

<ul>
<li><code>dataQuery</code>, which will be evaluated as the subscription&#39;s content - i.e. this is what has been updated since the last check on the updates of this dataset.</li>
<li><code>subscriptionQuery</code>, which will be evaluated to check if a subscription has changed since the last update. This query should return a single row with the count of updated items since the last update check. If the value returned by this query is greater than 0, then all the subscriptions that reference this dataset will receive a notification.</li>
</ul>

<p>The example on the side defines the <code>subscribable</code> object for an example dataset, and this object contains a the key <code>test</code>, including both a <code>dataQuery</code> and a <code>subscriptionQuery</code>. For more details on how you can modify the <code>subscribable</code> property of a dataset, check out the documentation on <a href="reference.html#updating-a-dataset">updating a dataset</a>. The keys in the subscribable object (e.g. <code>test</code>) are just for organizational purposes, and they won&#39;t be used in any way from the subscription&#39;s perspective.</p>

<p>Both queries can contain two special keywords: <code>{begin}</code> and <code>{end}</code>. These will be replaced with ISO-formatted dates on runtime, with the datetime in which the subscription was last evaluated, and the datetime at the time of evaluation, respectively.</p>

<p><em>Please note that, for readability purposes, the special characters in example on the side are not properly escaped. Don&#39;t forget all special characters must be properly escaped for the queries to be correctly executed.</em></p>
<h3 id='creating-and-confirming-the-subscription'>Creating and confirming the subscription</h3>
<p>You have your dataset ready to be subscribed. The next steps would be to actually create the subscription - check the <a href="reference.html#creating-a-subscription">docs for creating subscriptions</a> for detailed information on how to do that.</p>

<p>After creating the subscription, an email is sent with a confirmation link. You need to click this link in order to confirm the notification and start receiving notifications. You can check if the subscription is confirmed or not by looking at the <code>confirmed</code> field of the subscription object. Check more information about confirming subscriptions in the <a href="reference.html#confirming-a-subscription">confirming a subscription</a> section.</p>

<p>If, for some reason, you have lost the confirmation email, you can check the <a href="reference.html#resending-the-subscription-confirmation-email">resending confirmation emails</a> section for more information on how to resend the confirmation email.</p>

<p>At any point, you might want to stop receiving email or webhook notifications - if that is the case, you can check the <a href="reference.html#unsubscribing">unsubscribing</a> section for details on how to stop receiving notifications for your subscriptions.</p>

<p>The same subscription can subscribe to multiple datasets - for that, you just need to provide all the dataset ids you intend to subscribe in either the <code>datasets</code> or <code>datasetsQuery</code> fields of the subscription on creation. However, a subscription can only notify a single email at a time - if you intend to receive subscription notifications on multiple emails, you&#39;ll need to create multiple subscriptions.</p>
<h3 id='how-are-subscription-notifications-sent'>How are subscription notifications sent?</h3>
<blockquote>
<p>Example of POST body data for a webhook notification:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"downloadUrls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"csv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/glad-alerts/download/?period=2020-02-22,2020-03-04&amp;gladConfirmOnly=False&amp;aggregate_values=False&amp;aggregate_by=False&amp;geostore=423e5dfb0448e692f97b590c61f45f22&amp;format=csv"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/glad-alerts/download/?period=2020-02-22,2020-03-04&amp;gladConfirmOnly=False&amp;aggregate_values=False&amp;aggregate_by=False&amp;geostore=423e5dfb0448e692f97b590c61f45f22&amp;format=json"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"layerSlug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"glad-alerts"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscription for Amaznia, Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"selected_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amaznia, Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unsubscribe_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/subscriptions/5ea996383efbd0119327b372/unsubscribe?redirect=true&amp;lang=en"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subscriptions_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.globalforestwatch.org/my-gfw?lang=en"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dashboard_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.globalforestwatch.org/dashboards/aoi/5ea996383efbd0119327b372?lang=en"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.globalforestwatch.org/map/aoi/5ea996383efbd0119327b372?lang=en&amp;map%5BcanBound%5D=true&amp;map%5Bdatasets%5D%5B0%5D%5Bdataset%5D=bfd1d211-8106-4393-86c3-9e1ab2ee1b9b&amp;map%5Bdatasets%5D%5B0%5D%5Blayers%5D%5B0%5D=8e4a527d-1bcd-4a12-82b0-5a108ffec452&amp;map%5Bdatasets%5D%5B0%5D%5BtimelineParams%5D%5BstartDate%5D=2020-04-15&amp;map%5Bdatasets%5D%5B0%5D%5BtimelineParams%5D%5BendDate%5D=2020-04-22&amp;map%5Bdatasets%5D%5B0%5D%5BtimelineParams%5D%5BtrimEndDate%5D=2020-04-22&amp;map%5Bdatasets%5D%5B1%5D%5Bdataset%5D=0b0208b6-b424-4b57-984f-caddfa25ba22&amp;map%5Bdatasets%5D%5B1%5D%5Blayers%5D%5B0%5D=b45350e3-5a76-44cd-b0a9-5038a0d8bfae&amp;map%5Bdatasets%5D%5B1%5D%5Blayers%5D%5B1%5D=cc35432d-38d7-4a03-872e-3a71a2f555fc&amp;mainMap%5BshowAnalysis%5D=true"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert_date_begin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-15"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert_date_end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-22"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Subscriptions support two types of notifications: emails or webhook requests is performed. Both notifications are checked and sent every day, assuming that the dataset data has changed since the last notification sent.</p>

<p>Webhook notifications are sent as POST requests to the URL saved in the subscription. You can check on the side an example of the data that is sent in the body of the POST call. Please note that the webhook POST body data can change, based on the dataset chosen to receive notifications.</p>

<p>You can see in the image below an example of an email notification for GLAD deforestation alerts:</p>

<p><img src="images/subscription-email-example-8d51b94d.png" alt="Subscription email example" /></p>
<h3 id='summary-of-the-subscription-lifecycle'>Summary of the subscription lifecycle</h3>
<ul>
<li>First, you should know which dataset to use and when its data gets updated.</li>
<li>You ensure that the dataset is subscribable - if not, you should write the subscription queries and update the dataset.</li>
<li>You create a subscription.</li>
<li>You get a confirmation email and click on the link to confirm the subscription.</li>
<li>Done! You will now get an email every day with the updates to the dataset data <em>(note that if there are no updates, no email is sent)</em>.</li>
<li>Later, you can unsubscribe or delete the subscription.</li>
</ul>
<h2 id='getting-subscriptions-owned-by-the-request-user'>Getting subscriptions owned by the request user</h2>
<blockquote>
<p>Getting the subscriptions for the request user:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"587cc014f3b3f6280058e478"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test subscription"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-16T12:45:08.434Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a063da096c4eda523e99ae"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@wri.org"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"viirs-active-fires"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50601ff9257df221e808af427cb47701"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint will allow you to get all the subscriptions owned by the user who performed the request (identified by the access token). To use this endpoint, you must be logged in (i.e. a token must be provided). In the sections below, well explore how you can customize this endpoint call to match your needs.</p>

<p>For a detailed description of each field, check out the <a href="reference.html#subscription-reference">Subscription reference</a> section.</p>
<h3 id='filters'>Filters</h3>
<p>The <code>v1/subscriptions</code> endpoint supports the following optional query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the subscription is associated. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&#39;</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">The environment to which the subscription is associated. Read more about this field in the <a href="concepts.html#environments">Environments concept section</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;production&#39;</td>
</tr>
</tbody></table>

<p><strong>Deprecation notice:</strong> the default value for the <code>application</code> filter (currently, <code>gfw</code>) will be removed and the <code>application</code> filter will then have no default value. We recommend reviewing your application to ensure you set and load the correct <code>application</code> explicitly.</p>
<h3 id='errors-for-getting-subscriptions'>Errors for getting subscriptions</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
</tbody></table>
<h2 id='getting-a-subscription-by-id'>Getting a subscription by id</h2>
<blockquote>
<p>Example call for getting a subscription by its id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"587cc014f3b3f6280058e478"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test subscription"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-16T12:45:08.434Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a063da096c4eda523e99ae"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@wri.org"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"viirs-active-fires"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50601ff9257df221e808af427cb47701"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If you know the id of a subscription, then you can access it directly by performing a GET request to the <code>v1/subscriptions/:id</code> endpoint. Keep in mind that this will only match subscriptions that are owned by the user who performed the request.</p>
<h3 id='errors-for-getting-subscriptions-by-id'>Errors for getting subscriptions by id</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>ID is not valid</td>
<td>The id provided is not a valid subscription id.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
<tr>
<td>404</td>
<td>Subscription not found</td>
<td>Either no subscription exists with the provided id, or the subscription with the id provided is not owned by the user who performed the request.</td>
</tr>
</tbody></table>
<h2 id='creating-a-subscription'>Creating a subscription</h2>
<blockquote>
<p>Example POST request to create a subscription providing the bare minimum body fields:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": "20cc5eca-8c63-4c41-8e8e-134dcf1e6d76",
    "resource": {
      "type": "EMAIL",
      "content": "example@wri.org"
    },
    "params": {},
    "application": "gfw",
    "language": "en"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5eea1e6cfd754e001b28cb2b"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-17T13:45:16.222Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ed75dd2a82a420010ed066b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@wri.org"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This section will guide you through the process of creating a basic subscription in the RW API. Creating a subscription can be done by any logged user using a POST request and passing the relevant data as body fields. The supported body fields are as defined on the <a href="reference.html#subscription-reference">subscription reference</a> section, but the minimum field list you must specify for all subscriptions are:</p>

<ul>
<li><code>datasets</code> or <code>datasetsQuery</code></li>
<li><code>resource</code> (which must include both <code>resource.type</code> and <code>resource.content</code>)</li>
<li><code>params</code></li>
<li><code>application</code></li>
<li><code>language</code></li>
</ul>

<p>If the creation of the subscription is successful, the HTTP response code will be 200 OK, and the response body will contain the created subscription object. Please note that <strong>subscriptions must be confirmed</strong> before they become active - refer to the <a href="reference.html#subscription-lifecycle">subscription lifecycle</a> for more details on this.</p>
<h3 id='errors-for-creating-subscriptions'>Errors for creating subscriptions</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code> required</td>
<td>You didn&#39;t provide one of the required fields.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
</tbody></table>
<h3 id='defining-the-datasets'>Defining the datasets</h3>
<p>You will need to provide the dataset ids to which your subscription will watch for updates. In order to do so, you&#39;ll need to provide one of two fields when creating a subscription:</p>

<ul>
<li><code>datasets</code> - this field is a simple array of dataset ids. Each dataset will be individually evaluated for updates, and it will trigger an email if the <code>subscriptionsQuery</code> returns greater than 0.</li>
<li><code>datasetsQuery</code> is an alternative way of defining the datasets to subscribe: using this field, you have the advantage of being able to define a different threshold for sending the email (i.e. the email is sent if the <code>subscriptionQuery</code> returns a count greater than the threshold defined in the <code>datasetsQuery</code> object). For more details on the structure of the objects inside <code>datasetsQuery</code>, please check the <a href="reference.html#subscription-reference">subscription model reference</a>.</li>
</ul>
<h3 id='customizing-the-geographic-area-for-the-subscription'>Customizing the geographic area for the subscription</h3>
<p>When it comes to geo-referenced data, subscriptions are intrinsically tied to a geographic area of interest. This association enables users to create subscriptions to be notified of changes in the data of a dataset, but only if there are changes in the data of the dataset relative to the concrete geographic area of the world they are interested in. The specification of the geographic information for the subscription should be done in the <code>params</code> field of the subscription.</p>
<h4 id='subscribing-to-an-area-of-interest'>Subscribing to an area of interest</h4>
<blockquote>
<p>Creating a subscription providing the id of an area of interest in the params field:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "area": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<p>A subscription can refer to a specific area of interest that has been created using the <a href="reference.html#areas">RW API Areas service</a>. If this is the case, you should first <a href="reference.html#create-area">create your area of interest</a>, grab its id and provide it in the <code>params.area</code> field of the request body when creating the subscription.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>params</code></td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td><code>params.area</code></td>
<td style="text-align: center">Id of area of interest from the <a href="reference.html#areas">RW API Areas service</a></td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h4 id='subscribing-to-a-country-country-region-or-subregion'>Subscribing to a country, country region or subregion</h4>
<blockquote>
<p>Creating a subscription to a whole country:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "iso": {
        "country": "BRA"
      }
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Creating a subscription to a country subregion:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "iso": {
        "country": "BRA",
        "region": "1",
        "subregion": "2"
      }
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<p>A subscription can refer to a country, one of its regions, or a subregion within a region. Countries are identified by their ISO 3166-1 alpha-3 code - check <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">here</a> for a list of all the available country codes. Regions and subregions are identified by their respective GADM id, which can be obtained from GADM&#39;s dataset <a href="https://gadm.org/data.html">here</a>. When creating a subscription for a region, the country ISO must be specified. For subscribing to a subregion, both region and country ISO must be provided.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>params.iso.country</code></td>
<td style="text-align: center">ISO 3-letter code of the country to subscribe</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td><code>params.iso.region</code></td>
<td style="text-align: center">Region id to subscribe</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td><code>params.iso.subregion</code></td>
<td style="text-align: center">Subregion id to subscribe (optional)</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h4 id='subscribing-to-a-protected-area-from-world-database-on-protected-areas'>Subscribing to a protected area from World Database on Protected Areas</h4>
<blockquote>
<p>Creating a subscription providing a WDPA id in the params field:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "wdpaid": "32054"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<p>A subscription can refer to a specific protected area by the id of that area in the World Database on Protected Areas. If this is the case, you should provide the WDPA id in the <code>params.wdpaid</code> field when creating the subscription. IDs of protected areas worldwide can be obtained from the <a href="https://www.protectedplanet.net/">Protected Planet website</a>.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>params.wdpaid</code></td>
<td style="text-align: center">Id of the protected area in the WDPA</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h4 id='subscribing-to-a-rw-api-geostore'>Subscribing to a RW API geostore</h4>
<blockquote>
<p>Creating a subscription providing the id of a geostore obtained from the RW API in the params field:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "geostore": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<p>A subscription can refer to a specific geostore that has been created using the <a href="reference.html#geostore">RW API Geostore service</a>. If this is the case, you should <a href="reference.html#create-geostore">create your geostore</a> and use its id in the <code>params.geostore</code> field of the request body when creating the subscription.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>params.geostore</code></td>
<td style="text-align: center">Id of the RW API geostore to subscribe to.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h4 id='subscribing-to-a-gfw-data-api-geostore'>Subscribing to a GFW Data API geostore</h4>
<blockquote>
<p>Creating a subscription providing the id of a geostore obtained from the GFW Data API in the params field:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "geostoreDataApi": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<p>A subscription can refer to a specific geostore that has been created using the GFW Data API. If this is the case, you should check the docs for the GFW Data API and create your geostore, then use its id in the <code>params.geostoreDataApi</code> field of the request body when creating the subscription.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>params.geostoreDataApi</code></td>
<td style="text-align: center">Id of the GFW Data API geostore to subscribe to.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h4 id='subscribing-to-land-use-areas'>Subscribing to land use areas</h4>
<blockquote>
<p>Creating a subscription providing the id of a land use area in the params field:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "use": "mining",
      "useid": "234"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<p>A subscription can refer to a land use area provided by different datasets. At this point, the following land use datasets are supported: <code>mining</code> for mining areas, <code>logging</code> for Congo Basin logging roads, <code>oilpalm</code> for palm oil plantations or <code>fiber</code> for wood fiber plantations. If this is the case, you should provide the name of the land use dataset you wish to use in the <code>params.use</code> field, and the id of the area in the <code>params.useid</code> field of the request body when creating the subscription.</p>

<p>The ids to be used for land use areas can be obtained from the following CartoDB datasets:</p>

<ul>
<li>Mining area IDs can be obtained by querying <a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">this dataset</a>.</li>
<li>Palm oil plantation IDs can be obtained from <a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">this CartoDB table</a>.</li>
<li>Wood fiber plantation IDs can be obtained from <a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">this CartoDB table</a>.</li>
<li>Congo Basin logging road IDs can be obtained from <a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">this CartoDB table</a>.</li>
</ul>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>params.use</code></td>
<td style="text-align: center">The type of land use you want to subscribe to. Can be one of <code>mining</code>, <code>logging</code>, <code>oilpalm</code> or <code>fiber</code>.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td><code>params.useid</code></td>
<td style="text-align: center">The id of the land use area you want to subscribe to.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>
<h2 id='updating-a-subscription'>Updating a subscription</h2>
<blockquote>
<p>Example PATCH request for updating a subscription by id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"],
    "params": {
      "geostore": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "rw",
    "language": "fr",
    "env": "staging",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee79291a67d9a001b11043a"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-15T15:24:01.806Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ed75dd2a82a420010ed066b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@address.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staging"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can update subscriptions associated with you user account by using the PATCH <code>v1/subscriptions/:id</code> endpoint. Updating a subscription follows the same validations as when creating a new one - i.e. all required field values must be provided, even if they remain the same. Values for fields other than the following are optional. The minimum fields list you must specify to update a subscription is:</p>

<ul>
<li><code>datasets</code> or <code>datasetsQuery</code></li>
<li><code>resource</code> (which much include <code>resource.type</code> and <code>resource.content</code>)</li>
<li><code>params</code></li>
<li><code>application</code></li>
<li><code>language</code></li>
</ul>

<p>If the update of the subscription is successful, the HTTP response code will be 200 OK, and the response body will contain the updated subscription object.</p>

<p><em>Note: Updating a subscription does not require confirming it. A confirmed subscription will stay confirmed after an update.</em></p>
<h3 id='errors-for-updating-subscriptions'>Errors for updating subscriptions</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt;</code> required</td>
<td>You didn&#39;t provide one of the required fields.</td>
</tr>
<tr>
<td>400</td>
<td>Id is not valid</td>
<td>The id provided is not valid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
<tr>
<td>404</td>
<td>Subscription not found</td>
<td>Either a subscription with the id provided does not exist or it is not owned by the user who performed the request.</td>
</tr>
</tbody></table>
<h2 id='deleting-subscriptions'>Deleting subscriptions</h2>
<blockquote>
<p>Example DELETE request for deleting a subscription by its id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee79291a67d9a001b11043a"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-15T15:24:01.806Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ed75dd2a82a420010ed066b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@address.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staging"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To delete a subscription associated with your user account, you should use the DELETE <code>v1/subscriptions/:id</code> endpoint. If the deletion of the subscription is successful, the HTTP response code will be 200 OK, and the response body will contain the deleted subscription object.</p>
<h3 id='errors-for-deleting-subscriptions'>Errors for deleting subscriptions</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Id is not valid</td>
<td>The id provided is not valid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
<tr>
<td>404</td>
<td>Subscription not found</td>
<td>Either a subscription with the id provided does not exist or it is not owned by the user who performed the request.</td>
</tr>
</tbody></table>
<h2 id='confirming-a-subscription'>Confirming a subscription</h2>
<blockquote>
<p>Example GET request to confirm a subscription:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;/confirm"</span>
</code></pre></div>
<p>Upon creation of the subscription, a confirmation email is sent to the email of the user who created the subscription. This email will contain a link, which you will need to click in order to confirm the subscription. You can also confirm the subscription by performing a GET request to the <code>v1/subscriptions/:id/confirm</code> endpoint, as exemplified on the side.</p>

<p><em>Manually calling this endpoint will redirect you to the GFW application.</em></p>
<h2 id='resending-the-subscription-confirmation-email'>Resending the subscription confirmation email</h2>
<blockquote>
<p>Example GET request to resend the confirmation email for a subscription:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;/send_confirmation"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<p>For convenience, the RW API offers an additional endpoint to resend the confirmation email. In order to do this, you should perform a GET request to the <code>v1/subscriptions/:id/send_confirmation</code>. As with most of the other subscription endpoints, please keep in mind that you must be authenticated in order to use this endpoint.</p>

<p>This endpoint does not change the subscription - i.e. if the subscription was already confirmed, it stays that way. The confirmation email will always be sent, regardless if the subscription is confirmed or not.</p>

<p><em>Manually calling this endpoint will redirect you to the GFW application.</em></p>
<h2 id='unsubscribing'>Unsubscribing</h2>
<blockquote>
<p>Example GET request to unsubscribe:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;/unsubscribe"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<p><strong>Note: When you unsubscribe, the underlying subscription resource is deleted.</strong>.</p>

<p>You can use the endpoint <code>v1/subscriptions/:id/unsubscribe</code> (exemplified on the side) for unsubscribing from a subscription. As with most of the other subscription endpoints, please keep in mind that you must be authenticated in order to use this endpoint.</p>
<h2 id='subscription-statistics'>Subscription statistics</h2>
<p>The following section details the endpoints that can be used to access statistics on the usage of subscriptions.</p>

<p><strong>The usage of the following endpoints is restricted to ADMIN users.</strong></p>
<h3 id='general-subscription-statistics'>General subscription statistics</h3>
<blockquote>
<p>Example GET request to obtain general subscription statistics:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/statistics?start=:start&amp;end=:end"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="nl">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"numSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">6000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usersWithSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalEmailsSentInThisQ"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalEmailsSended"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"usersWithSubscription"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newUsers"</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="p">,</span><span class="w">
  </span><span class="nl">"groupStatistics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"glad-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
      </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1305</span><span class="p">,</span><span class="w">
      </span><span class="nl">"countries"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"CHL"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"IDN"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"regions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"wdpas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"130"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"34043"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"countryTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"regionTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"nameRegion"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
        </span><span class="nl">"nameCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"wdpaTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34043</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"prodes-loss"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"umd-loss-gain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"terrai-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"viirs-active-fires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"imazon-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"forma250GFW"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"forma-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"story"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="nl">"63f34231-7369-4622-81f1-28a144d17835"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The <code>v1/subscriptions/statistics</code> endpoint can be used to access all the data regarding the subscription notifications that have been sent.</p>
<h4 id='filters-2'>Filters</h4>
<p>This endpoint supports the following query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td style="text-align: center">The start of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">01-01-2020</td>
</tr>
<tr>
<td>end</td>
<td style="text-align: center">The end of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">02-20-2020</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application for which the statistics will be fetched. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&#39;</td>
<td style="text-align: right">&#39;rw&#39;</td>
</tr>
</tbody></table>
<h3 id='grouped-subscription-statistics'>Grouped subscription statistics</h3>
<blockquote>
<p>Example GET request to obtain grouped subscription statistics:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/statistics-group?start=:start&amp;end=:end"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"glad-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
    </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
    </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1305</span><span class="p">,</span><span class="w">
    </span><span class="nl">"countries"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"CHL"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"IDN"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"regions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"wdpas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"130"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"34043"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"countryTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"regionTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"nameRegion"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nameCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"wdpaTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34043</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"prodes-loss"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"umd-loss-gain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"terrai-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"viirs-active-fires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"imazon-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"forma250GFW"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"forma-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"story"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="nl">"63f34231-7369-4622-81f1-28a144d17835"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The <code>v1/subscriptions/statistics-group</code> endpoint can be used to access data regarding the subscription notifications that have been sent, grouped by the the dataset of the subscription. The output of this endpoint is a subset of the output of the <code>v1/subscriptions/statistics</code> endpoint.</p>
<h4 id='filters-3'>Filters</h4>
<p>This endpoint supports the following query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td style="text-align: center">The start of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">01-01-2020</td>
</tr>
<tr>
<td>end</td>
<td style="text-align: center">The end of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">02-20-2020</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application for which the statistics will be fetched. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&#39;</td>
<td style="text-align: right">&#39;rw&#39;</td>
</tr>
</tbody></table>
<h2 id='subscription-reference'>Subscription reference</h2>
<p>This section gives you a complete view at the properties that are maintained as part of a subscription. When interacting with a subscription (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/gfw-api/gfw-subscription-api/blob/develop/app/src/models/subscription.js">source code</a>.</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes</td>
<td>(auto-generated)</td>
<td>Unique Id of the subscription. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The name of the subscription.</td>
</tr>
<tr>
<td>confirmed</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the subscription is confirmed or not. Cannot be modified by users, only through the usage of the confirm and unsubscribe endpoints. (TODO: missing refs!)</td>
</tr>
<tr>
<td>resource</td>
<td>Object</td>
<td>Yes</td>
<td></td>
<td>An object containing the data for who (or what) should be notified on dataset data changes.</td>
</tr>
<tr>
<td>resource.type</td>
<td>Enum</td>
<td>Yes</td>
<td></td>
<td>The type of resource to be notified. Can take the values of <code>EMAIL</code> (for an email notification) or <code>URL</code> for a webhook notification.</td>
</tr>
<tr>
<td>resource.content</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>The object to be notified: should be a valid email case <code>resource.type</code> is <code>EMAIL</code>, and a valid URL case <code>resource.type</code> is <code>URL</code>.</td>
</tr>
<tr>
<td>datasets</td>
<td>Array</td>
<td>No</td>
<td><code>[]</code></td>
<td>An array of dataset ids that this subscription is tracking.</td>
</tr>
<tr>
<td>datasetsQuery</td>
<td>Array</td>
<td>No</td>
<td><code>[]</code></td>
<td>An alternative way of stating the datasets that this subscription is tracking. This field is an array of objects, check the rows below to see which properties each object should have.</td>
</tr>
<tr>
<td>datasetsQuery[0].id</td>
<td>String</td>
<td>No</td>
<td></td>
<td>An identifier for the dataset being subscribed.</td>
</tr>
<tr>
<td>datasetsQuery[0].type</td>
<td>String</td>
<td>No</td>
<td></td>
<td>A type for the dataset being subscribed.</td>
</tr>
<tr>
<td>datasetsQuery[0].threshold</td>
<td>Number</td>
<td>No</td>
<td>0</td>
<td>The threshold to be considered when checking for updates in the dataset&#39;s data. By default, it takes the value the value 0, but you can customize it to only get notified if there are at least (for instance) 5 updates to the dataset&#39;s data.</td>
</tr>
<tr>
<td>datasetsQuery[0].lastSentDate</td>
<td>Date</td>
<td>No</td>
<td>(auto-generated)</td>
<td>Value automatically updated to have set the last date when updates were detected in this dataset.</td>
</tr>
<tr>
<td>datasetsQuery[0].lastSentDate</td>
<td>Date</td>
<td>No</td>
<td>(auto-generated)</td>
<td>This value is automatically updated with the historical data of all the updates detected in the dataset&#39;s data.</td>
</tr>
<tr>
<td>params</td>
<td>Object</td>
<td>No</td>
<td><code>{}</code></td>
<td>Determines the area of interest that this subscription should track. Can contain information to narrow the updates being tracked (especially in the case of geo-referenced data).</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes</td>
<td>(auto-populated)</td>
<td>Id of the user who owns the subscription. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>No</td>
<td><code>&#39;en&#39;</code></td>
<td>The language for this subscription. Useful for customizing email notifications according to the language of the subscription. Possible values include <code>&#39;en&#39;</code>, <code>&#39;es&#39;</code>, <code>&#39;fr&#39;</code>, <code>&#39;pt&#39;</code> or <code>&#39;zh&#39;</code>.</td>
</tr>
<tr>
<td>application</td>
<td>String</td>
<td>Yes</td>
<td><code>&#39;gfw&#39;</code></td>
<td>Applications associated with this subscription. Read more about this field <a href="concepts.html#applications">here</a>.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td><code>&#39;production&#39;</code></td>
<td>Environment to which the subscription belongs. Read more about this field in the <a href="concepts.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No</td>
<td>(auto-populated)</td>
<td>Automatically maintained date of when the subscription was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No</td>
<td>(auto-populated)</td>
<td>Automatically maintained date of when the subscription was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h1 id='favorites'>Favorites</h1>
<p>The users can save their own favorites resources of the API.</p>

<aside class="notice">
Remember  All favorite endpoints need to be authenticated.
</aside>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td style="text-align: center">Name</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resourceId</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resourceType</td>
<td style="text-align: center">Type of resource</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
<tr>
<td>userId</td>
<td style="text-align: center">Id of the owner user</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Creation date</td>
<td style="text-align: right">Date</td>
</tr>
</tbody></table>
<h2 id='create-favorite'>Create Favorite</h2>
<p>To create a favorite, you need to define all next fields in the request body. The required fields that compose a favorite are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>resourceId</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resourceType</td>
<td style="text-align: center">Type of resource</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a favorite, you have to do a POST with the following body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/favourite <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "resourceType":"&lt;resourceType&gt;",
   "resourceId": "&lt;resourceId&gt;"
  }'</span>
</code></pre></div><h2 id='get-favorites'>Get favorites</h2>
<p>This endpoint returns the favorites of the logged user.</p>

<blockquote>
<p>To get all favorite of the logged user, you have to do a GET request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/favourite <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<p>You can also retrieve all data about the resources by including the query parameter &quot;include=true&quot; in the request.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/favourite?include<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div><h2 id='get-favorite-by-id'>Get favorite by id</h2>
<p>This endpoint returns the favorite with id of the param. If the favorite belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To get the favorite by id, you have to do a GET request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/favourite/:id <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div><h2 id='delete-favorite'>Delete favorite</h2>
<p>This endpoint deletes the favorite with id of the param. If the favorite belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To delete the favorite by id, you have to do a DELETE request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/favourite/:id <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div><h1 id='graph'>Graph</h1>
<p>The following section details the endpoints you can use to interact with graph information about the RW API. If you are new to the RW API or want to learn more about what the RW API graph can do for you, we strongly encourage you to read the <a href="concepts.html#graph">graph concept documentation</a> first.</p>

<p>Before proceeding, let&#39;s look at some concepts that will be used across the graph endpoint documentation.</p>
<h2 id='what-is-a-resource'>What is a resource</h2>
<p>Throughout this section, we&#39;ll refer multiple times to <code>resources</code>. Simply put, a <code>resource</code> is either a dataset, a widget, a layer, or a metadata entry. Graph nodes represent in a similar fashion these 4 types of RW API entity, so often we&#39;ll refer to resources instead, for convenience.</p>

<p>We assume that, at this point, you are already familiar with the concepts of <a href="concepts.html#dataset">dataset</a>, <a href="concepts.html#layer">layer</a>, <a href="concepts.html#widget">widget</a> or <a href="concepts.html#metadata">metadata</a> (ideally you are familiar with the 4). If that&#39;s not the case, we strongly encourage you to learn about those concepts first, and we also recommend you take some time to explore and experiment using actual <a href="reference.html#dataset">dataset</a>, <a href="reference.html#layer">layer</a>, <a href="reference.html#widget">widget</a>, or <a href="reference.html#metadata10">metadata</a> endpoints before proceeding. The RW API Graph service builds on top of these concepts and empowers your use cases of those resources, so it should only be used by applications and users that are already comfortable with the basics, and want to take their knowledge of the RW API to the next level.</p>

<p>In the context of the RW API Graph service, resources are represented as graph nodes. They can be associated (using graph edges) with concepts to create relationships of relevance between the two entities.</p>
<h2 id='what-is-a-concept'>What is a concept</h2>
<p>Similarly, we&#39;ll refer multiple times to <code>concepts</code>. A <code>concept</code> is a keyword used to describe a resource (e.g. <code>health</code>, <code>society</code>, <code>solar_power</code>, etc.). It shares some similarities with <a href="reference.html#vocabularies-and-tags">tags</a>, in the sense it can be associated with resources of different types (datasets, layers, or widgets).</p>

<p>As with resources, in the context of the RW API Graph service, concepts are represented as graph nodes. They can be associated (using graph edges) with resources to create relationships of relevance between the two entities.</p>
<h2 id='bird-39-s-eye-view-of-the-graph-service'>Bird&#39;s-eye view of the graph service</h2>
<p>As an API user, you will surely be glad to hear that most of the management of graph entities is performed automatically. As you will discover by reading the sections on <a href="reference.html#creating-resources">creating</a> or <a href="reference.html#deleting-resources">deleting</a> graph resources, graph nodes for resources are automatically created and deleted when you create or delete your resources, respectively. This means that, as an API user, you are abstracted from these processes and the only thing you need to worry about is actually managing relationships between graph resources and concepts.</p>

<p>To do so, you will need to interact with <a href="reference.html#vocabularies-and-tags">vocabulary endpoints</a>, using a specific vocabulary called <code>knowledge_graph</code>. You can tag your resources using said vocabulary, and the tags you add will be added as graph concepts and associated with your resources. You can read more about this process in the section on <a href="reference.html#relationships-between-graph-nodes-and-concepts">relationships between graph nodes and concepts</a>. Some concepts have been pre-loaded into the graph service, and you can use them to associate your resources with widely-used concepts. However, you are also encouraged to create your own concepts - which, once again, is performed automatically when managing your associations using the vocabulary endpoints.</p>

<p>You may come across some hierarchical concepts in the following sections, such as &quot;ancestors&quot;, &quot;parent concepts&quot; or &quot;descendants&quot;. These were initially added with the intention of supporting hierarchy between graph concepts, but such features were not completed. As such, it is recommended that, for now, you ignore and do not rely on any type of hierarchy between graph concepts. This may, however, change in the future.</p>

<p>Lastly, a note: <strong>none of the endpoints below are paginated.</strong> Most of the endpoints interact with a single resource (dataset, layer, widget, or metadata), which contributes to a healthy size for most of the Graph service endpoint responses, as long as you keep your associations between graph resources and concepts to a reasonable amount. However, some of the endpoints aim at retrieving full lists of, for instance, graph concepts - <em>please ensure that you take into consideration the impact of using such endpoints in the performance of your applications</em>.</p>
<h2 id='list-concepts'>List concepts</h2>
<blockquote>
<p>Request to list concepts:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/list-concepts
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"society"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Society"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"People"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TOPIC"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"numberOfDatasetsTagged"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"4458eb12-8572-45d1-bf07-d5a3ee097021"</span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>This endpoint does not return a paginated list - you will receive a full list of all the concepts available in the graph. Additionally, the returned response can only be filtered by application, not searched - which means that it&#39;s very unlikely that you will receive a reduced payload by using this endpoint. As such, you should avoid using this specific endpoint since it might harm the performance of your application, should the graph increase significantly in size. You can find alternative endpoints in the sections below that allow you to navigate the graph by similarity of concepts, which is the recommended approach to navigating the graph.</strong></p>

<p>This endpoint returns the list of concepts available in the graph. If successful, the response will have status 200 OK, containing a list of elements in the <code>data</code> index, each containing the information about one concept. Check out the <a href="reference.html#graph-concept-reference">Graph concept reference</a> for details on each of the fields of the returned response.</p>
<h3 id='filters'>Filters</h3>
<blockquote>
<p>Filtering concepts by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/list-concepts?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h2 id='list-concepts-for-a-dataset'>List concepts for a dataset</h2>
<blockquote>
<p>Request to list concepts for a dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/list-concepts/:dataset
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4458eb12-8572-45d1-bf07-d5a3ee097021"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graph"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Habitat"</span><span class="p">],</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"habitat"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitats"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default_parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ecosystem"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4458eb12-8572-45d1-bf07-d5a3ee097021"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graph"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"species"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Species"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default_parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"biodiversity"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns the list of relationships between the dataset with id provided in the URL path and concepts. If successful, the response will have status 200 OK, containing a list of elements in the <code>data</code> index, each containing the information about one graph relationship. Check out the <a href="reference.html#graph-relationship-reference">Graph relationship reference</a> for details on each of the fields of the returned response.</p>

<p>If the dataset id provided is not valid or not found, the response returned will contain an empty list in the <code>data</code> index.</p>
<h3 id='filters-2'>Filters</h3>
<blockquote>
<p>Filtering concepts for a dataset by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/list-concepts/:dataset?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h2 id='list-concepts-for-multiple-datasets'>List concepts for multiple datasets</h2>
<blockquote>
<p>Request to list concepts for multiple datasets:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/graph/find-by-ids <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{
    "ids": [
        "37d04efc-0ab2-4499-a891-54dca1013c74",
        "0448c79d-0ee0-42ff-9331-aeee70cef301"
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"concept"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37d04efc-0ab2-4499-a891-54dca1013c74"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sanitation"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sanitation"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default_parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"health"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"concept"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37d04efc-0ab2-4499-a891-54dca1013c74"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"city"</span><span class="p">,</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">],</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default_parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"settlements"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns the list of relationships between the datasets with ids provided in the body of the POST request. If successful, the response will have status 200 OK, containing a list of elements in the <code>data</code> index, each containing the information about one graph relationship. Check out the <a href="reference.html#graph-relationship-reference">Graph relationship reference</a> for details on each of the fields of the returned response.</p>
<h3 id='filters-3'>Filters</h3>
<blockquote>
<p>Filtering concepts for multiple datasets by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/find-by-ids?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h3 id='errors-for-listing-concepts-for-multiple-datasets'>Errors for listing concepts for multiple datasets</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>The <code>ids</code> provided in the body of the request are not correctly formatted.</td>
</tr>
</tbody></table>
<h2 id='infer-concepts-from-other-concepts'>Infer concepts from other concepts</h2>
<blockquote>
<p>GET request to infer concepts related to the concepts passed as query parameters:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/concepts-inferred?concepts<span class="o">=</span>society,urban <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>POST request to infer concepts related with the concepts passed in the request body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/graph/query/concepts-inferred <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="se">\</span>
<span class="s1">'{ "concepts": ["society", "urban"] }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"society"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Society"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"People"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TOPIC"</span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"city"</span><span class="p">,</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TOPIC"</span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint lets API users discover concepts that have relationships in common with the list of concepts provided. You can use the GET version of the endpoint, providing the list of concepts as a comma-separated string query string parameter. Alternatively, you can use the POST version and provide the list of concepts in the <code>concepts</code> index of the POST request body.</p>

<p>If successful, the response will have status 200 OK, containing a list of elements in the <code>data</code> index, each containing the information about one concept. Check out the <a href="reference.html#graph-concept-reference">Graph concept reference</a> for details on each of the fields of the returned response.</p>
<h3 id='filters-4'>Filters</h3>
<blockquote>
<p>Filtering inferred concepts by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/concepts-inferred?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h3 id='errors-for-listing-concepts-for-multiple-datasets-2'>Errors for listing concepts for multiple datasets</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Concepts are required.</td>
<td>A list of concepts was not provided.</td>
</tr>
</tbody></table>
<h2 id='query-similar-datasets'>Query similar datasets</h2>
<blockquote>
<p>GET request to find out similar datasets to a dataset with id provided:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset/:dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Alternative syntax, providing the dataset id as query string parameter:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset?dataset<span class="o">=</span>:dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b97e47e-ca18-4e50-9aae-a2853acca3f0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"health"</span><span class="p">,</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51159bdb-4904-4101-a88e-ca7bd4f67cb0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"infrastructure"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint lets API users discover datasets that share concepts with the dataset with id provided in the URL path. If successful, the response will have status 200 OK, containing a list of elements in the <code>data</code> index, each containing the id of the dataset that is related and a list of concepts that are shared.</p>

<p>The results returned are sorted by their degree of similarity, meaning the datasets with the higher number of shared concepts are higher on the list.</p>
<h3 id='filters-5'>Filters</h3>
<blockquote>
<p>Filtering similar datasets by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset/:dataset?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h3 id='errors-for-querying-similar-datasets'>Errors for querying similar datasets</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Dataset query param required</td>
<td>You must provide a valid dataset id.</td>
</tr>
</tbody></table>
<h2 id='query-similar-datasets-including-descendants'>Query similar datasets including descendants</h2>
<blockquote>
<p>GET request to find out similar datasets including descendants to a dataset with id provided:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset-including-descendant/:dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Alternative syntax, providing the dataset id as query string parameter:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset-including-descendant?dataset<span class="o">=</span>:dataset <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37d04efc-0ab2-4499-a891-54dca1013c74"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"urban"</span><span class="p">,</span><span class="w"> </span><span class="s2">"health"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sanitation"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"223b936e-06b8-4970-abd9-4f123904d95d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"hunger"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"famine"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"health"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint lets API users discover datasets that share concepts with the dataset with id provided in the URL path. The difference from the endpoint above is that this endpoint also looks at the ancestor concepts from the dataset with id provided - datasets returned might have ancestor concepts in common, but not necessarily the same exact concepts in common.</p>

<p>If successful, the response will have status 200 OK, containing a list of elements in the <code>data</code> index, each containing the id of the dataset that is related and a list of concepts that are shared. Each list item also contains a <code>numberOfOcurrences</code> field, containing the count of common concepts. The results returned are sorted by their degree of similarity, meaning the datasets with the higher number of shared concepts (<code>numberOfOcurrences</code>) are higher on the list.</p>
<h3 id='filters-6'>Filters</h3>
<blockquote>
<p>Filtering similar datasets including descendants by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset-including-descendant/:dataset?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h3 id='errors-for-querying-similar-datasets-2'>Errors for querying similar datasets</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Dataset query param required</td>
<td>You must provide a valid dataset id.</td>
</tr>
</tbody></table>
<h2 id='search-datasets-by-concepts'>Search datasets by concepts</h2>
<blockquote>
<p>GET request to search datasets by concepts:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/search-datasets?concepts[0][0]<span class="o">=</span>:concept <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>POST request to search datasets by concepts provided in the request body:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/graph/query/search-datasets <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "concepts": [[":concept"]] }'</span>
</code></pre></div>
<blockquote>
<p>Providing multiple sets of concepts as GET request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/search-datasets?concepts[0][0]<span class="o">=</span>spain,concepts[0][1]<span class="o">=</span>europe,concepts[1][0]<span class="o">=</span>water,concepts[2][0]<span class="o">=</span>raster,concepts[2][1]<span class="o">=</span>geospatial <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Providing multiple sets of concepts as POST request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/search-datasets <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ 
  "concepts": [
    ["spain", "europe"],
    ["water"],
    ["raster", "geospatial"]
  ] 
}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"11f43558-d703-4b9d-aff0-f2354a11b359"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"12510410-1eb3-4af0-844f-8a05be50b1c1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1b8f1592-2a92-4dd5-bd85-6d231c7d3229"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1b97e47e-ca18-4e50-9aae-a2853acca3f0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"371e700e-bc9a-4526-af92-335d888de309"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"4b000ded-5f4d-4dbd-83c9-03f2dfcd36db"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"5be16fea-5b1a-4daf-a9e9-9dc1f6ea6d4e"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"60be01b0-99fb-459c-8a08-b934270f8c4b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"63a7a997-695d-4629-b6e9-9b169f5c69bf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"795a7ceb-ebc1-4479-95ad-76ea4d045ad3"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint lets API users discover datasets related to the lists of concepts provided. Note that, either in the GET or POST forms for this endpoint, <strong>concepts must be provided as a list of sets</strong>. <em>AND</em> logical operators (<code>&amp;&amp;</code>) are applied among the list of sets, while <em>OR</em> (<code>||</code>) is used for set elements. You can provide up to three sets of concepts to search for - the example on the side exemplifies a request to this endpoint given the following sets of concepts:</p>

<ul>
<li>Set 1: <code>[&#39;spain&#39;, &#39;europe&#39;]</code></li>
<li>Set 2: <code>[&#39;water&#39;]</code></li>
<li>Set 3: <code>[&#39;raster&#39;, &#39;geospatial&#39;]</code></li>
</ul>

<p>In this specific case, the datasets returned would be related with <code>&quot;spain&quot;</code> OR <code>&quot;europe&quot;</code>, <code>&quot;water&quot;</code>, and <code>&quot;raster&quot;</code> or <code>&quot;geospatial&quot;</code>. Or, expressed as a logical condition: <code>(&quot;spain&quot; || &quot;europe&quot;) &amp;&amp; &quot;water&quot; &amp;&amp; (&quot;raster&quot; || &quot;geospatial&quot;)</code>.</p>

<p>If successful, the response will have status 200 OK, containing a list of dataset ids that are related to the concepts provided in the <code>data</code> index. Also, note that ancestor concepts are also taken into account in the search.</p>
<h3 id='filters-7'>Filters</h3>
<blockquote>
<p>Filtering searched datasets by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/similar-dataset-including-descendant/:dataset?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated with this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
<tr>
<td>depth</td>
<td>Limits the depth of the graph search.</td>
<td>Number</td>
<td>15</td>
</tr>
</tbody></table>
<h3 id='errors-for-searching-datasets-by-concepts'>Errors for searching datasets by concepts</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Concepts query params are required</td>
<td>You must provide the list of sets of concepts.</td>
</tr>
</tbody></table>
<h2 id='search-datasets-by-concepts-and-their-synonyms'>Search datasets by concepts and their synonyms</h2>
<blockquote>
<p>GET request to search datasets by concepts and their synonyms:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/search-by-label-synonyms?search<span class="o">=</span>:search <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example providing multiple concepts in one request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/search-by-label-synonyms?search<span class="o">=</span>health society <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"11f43558-d703-4b9d-aff0-f2354a11b359"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"12510410-1eb3-4af0-844f-8a05be50b1c1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1b8f1592-2a92-4dd5-bd85-6d231c7d3229"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1b97e47e-ca18-4e50-9aae-a2853acca3f0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"371e700e-bc9a-4526-af92-335d888de309"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"4b000ded-5f4d-4dbd-83c9-03f2dfcd36db"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"5be16fea-5b1a-4daf-a9e9-9dc1f6ea6d4e"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"60be01b0-99fb-459c-8a08-b934270f8c4b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"63a7a997-695d-4629-b6e9-9b169f5c69bf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"795a7ceb-ebc1-4479-95ad-76ea4d045ad3"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint finds datasets in the graph that are related to the concepts provided or any of its synonyms. If successful, the response will have status 200 OK, containing a list of dataset ids in the <code>data</code> index. You can provide multiple concepts by splitting them with blank spaces.</p>
<h3 id='filters-8'>Filters</h3>
<blockquote>
<p>Filtering searched datasets by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/search-by-label-synonyms?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h3 id='errors-for-searching-datasets-by-concepts-and-their-synonyms'>Errors for searching datasets by concepts and their synonyms</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Search query param required</td>
<td>You must provide the search query parameter.</td>
</tr>
</tbody></table>
<h2 id='most-liked-datasets'>Most liked datasets</h2>
<blockquote>
<p>GET request to find out which are the most liked datasets:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-liked-datasets <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c36c3108-2581-4b68-852a-c929fc758001"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns a list of dataset sorted by the number of times these datasets were marked as favorite by users. The returned list is sorted descending, from the datasets with higher favorite count to the ones with a lower count.</p>

<p>If successful, this endpoint will return 200 OK, containing the list of sorted datasets in the <code>data</code> index of the response body. Each element of the list contains the dataset id in the <code>id</code> property and the number of times the dataset was marked as favorite by a user in the <code>count.low</code> property.</p>
<h3 id='filters-9'>Filters</h3>
<blockquote>
<p>Filtering most liked datasets by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-liked-datasets?application<span class="o">=</span>gfw
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated to this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
</tbody></table>
<h2 id='most-viewed-datasets'>Most viewed datasets</h2>
<blockquote>
<p>GET request to find out which are the most viewed datasets:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-viewed <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0087944f-871c-44bc-b4d9-cd5acfc27023"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">76</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00abb46f-34e2-4bf7-be30-1fb0b1de022f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns a list of dataset sorted by the number of times these datasets were viewed by users. The returned list is sorted descending, from the datasets with higher view count to the ones with a lower count.</p>

<p>If successful, this endpoint will return 200 OK, containing the list of sorted datasets in the <code>data</code> index of the response body. Each element of the list contains the dataset id in the <code>dataset</code> property and the number of times the dataset was viewed in the <code>views</code> property.</p>

<p>Note that the concept of view might differ from one application to another. In order to increase the view count of a dataset, an application has to explicitly increment the count for that dataset by calling the <a href="reference.html#increment-dataset-view-count">increment view endpoint</a>.</p>
<h3 id='filters-10'>Filters</h3>
<blockquote>
<p>Filtering most viewed datasets by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-viewed?application<span class="o">=</span>gfw
</code></pre></div>
<blockquote>
<p>Limiting the number of returned results:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-viewed?limit<span class="o">=</span>3
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated with this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
<tr>
<td>limit</td>
<td>Limits the number of results returned in the response.</td>
<td>Number</td>
<td>No limit applied - all results are returned.</td>
</tr>
</tbody></table>
<h2 id='most-viewed-datasets-by-user'>Most viewed datasets by user</h2>
<blockquote>
<p>GET request to find out which are the most viewed datasets for the token user:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-viewed <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0087944f-871c-44bc-b4d9-cd5acfc27023"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">76</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00abb46f-34e2-4bf7-be30-1fb0b1de022f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns a list of dataset sorted by the number of times these datasets were viewed by the user of the token provided in the request headers. The returned list is sorted descending, from the datasets with higher view count to the ones with a lower count.</p>

<p>If successful, this endpoint will return 200 OK, containing the list of sorted datasets in the <code>data</code> index of the response body. Each element of the list contains the dataset id in the <code>dataset</code> property and the number of times the dataset was viewed in the <code>views</code> property.</p>

<p>As in the case of the <code>most-viewed</code> endpoint, please keep in mind that the concept of view might differ from one application to another. In order to increase the view count of a dataset, an application has to explicitly increment the count for that dataset by calling the <a href="reference.html#increment-dataset-view-count">increment view endpoint</a>.</p>
<h3 id='filters-11'>Filters</h3>
<blockquote>
<p>Filtering most viewed datasets by the token user by application:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-viewed-by-user?application<span class="o">=</span>gfw
</code></pre></div>
<blockquote>
<p>Limiting the number of returned results:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/most-viewed-by-user?limit<span class="o">=</span>3
</code></pre></div>
<p>This endpoint supports the following filters as query string parameters:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Applications associated with this concept - read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>String</td>
<td><code>&quot;rw&quot;</code></td>
</tr>
<tr>
<td>limit</td>
<td>Limits the number of results returned in the response.</td>
<td>Number</td>
<td>No limit applied - all results are returned.</td>
</tr>
</tbody></table>
<h3 id='errors-for-getting-most-viewed-datasets-by-user'>Errors for getting most viewed datasets by user</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You must provide your API user&#39;s token in the response headers.</td>
</tr>
</tbody></table>
<h2 id='increment-dataset-view-count'>Increment dataset view count</h2>
<blockquote>
<p>POST request to find out which are the most viewed datasets for the token user:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/graph/dataset/:id/visited <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<p>Use this endpoint if you want to increment the view count of the dataset with id provided in the URL path. If successful, this endpoint will return 200 OK containing an empty object in the response body. </p>

<p>You can optionally provide the authentication token for your API user in the request headers. If no token is provided, a dataset view is registered without being associated with any user. If a token is provided, the dataset view count for your API user will be incremented.</p>
<h2 id='creating-resources'>Creating resources</h2>
<p><strong>The creation of resources on the graph is performed automatically after the creation of each resource, so you don&#39;t need to explicitly do it yourself.</strong> Because of this, creating resources on the graph is restricted to other RW API services, and requires authentication from a RW API service. Normal API users won&#39;t be able to call these endpoints successfully - if you try to do it with a &quot;normal&quot; API user token, you will receive a response with HTTP status code <code>403 Forbidden</code>.</p>

<p>For details on how these specific endpoints work, you should check out the developer docs for each of the resources supported. The following resources are currently supported as graph nodes:</p>

<ul>
<li><a href="developer.html#creating-dataset-graph-nodes">dataset</a></li>
<li><a href="developer.html#creating-layer-graph-nodes">layer</a></li>
<li><a href="developer.html#creating-widget-graph-nodes">widget</a></li>
<li><a href="developer.html#creating-metadata-graph-nodes">metadata</a></li>
</ul>
<h2 id='deleting-resources'>Deleting resources</h2>
<p><strong>The deletion of resources on the graph is performed automatically after the deletion of each resource, so you don&#39;t need to explicitly do it yourself.</strong> Because of this, deleting resources on the graph is restricted to other RW API services, and requires authentication from a RW API service. Normal API users won&#39;t be able to call these endpoints successfully - if you try to do it with a &quot;normal&quot; API user token, you will receive a response with HTTP status code <code>403 Forbidden</code>.</p>

<p>For details on how these specific endpoints work, you should check out the developer docs for each of the resources supported. The following resources are currently supported as graph nodes:</p>

<ul>
<li><a href="developer.html#deleting-dataset-graph-nodes">dataset</a></li>
<li><a href="developer.html#deleting-layer-graph-nodes">layer</a></li>
<li><a href="developer.html#deleting-widget-graph-nodes">widget</a></li>
<li><a href="developer.html#deleting-metadata-graph-nodes">metadata</a></li>
</ul>
<h2 id='relationships-between-graph-nodes-and-concepts'>Relationships between graph nodes and concepts</h2>
<blockquote>
<p>Getting the list of concepts for a dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/graph/query/list-concepts/:id
</code></pre></div>
<blockquote>
<p>Example response, containing the &quot;urban&quot; concept:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37d04efc-0ab2-4499-a891-54dca1013c74"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graph"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"city"</span><span class="p">,</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urban"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"default_parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"settlements"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Getting vocabulary for the same dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dataset/:id/vocabulary
</code></pre></div>
<blockquote>
<p>Example response, containing the &quot;knowledge_graph&quot; vocabulary with the &quot;urban&quot; tag associated:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"knowledge_graph"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"urban"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"knowledge_graph"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Creating (if it doesn&#39;t exist yet) the association between the vocabulary &quot;knowledge_graph&quot; and a dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dataset/:id/vocabulary/knowledge_graph <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "application": "rw",
  "tags": ["urban", "society"]
}'</span>
</code></pre></div>
<blockquote>
<p>Editing the association between the vocabulary &quot;knowledge_graph&quot; and a dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dataset/:id/vocabulary/knowledge_graph
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "application": "rw",
  "tags": ["urban"]
}'</span>
</code></pre></div>
<blockquote>
<p>Deleting the association between the vocabulary &quot;knowledge_graph&quot; and a dataset:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dataset/:id/vocabulary/knowledge_graph
</code></pre></div>
<p><strong>The management of connections between resources and concepts is handled by vocabulary endpoints, using the vocabulary <code>&quot;knowledge_graph&quot;</code>.</strong> Using this vocabulary, you can add tags to your dataset. These tags will be added as concepts, and one (or more, accordingly) graph edges will be created, establishing a connection between your resource and the provided tags.</p>

<p>This section provides some examples of how you can use vocabulary endpoints to manage your resources&#39; concepts. Keep in mind that you can always refer to the <a href="reference.html#vocabularies-and-tags">vocabulary endpoint documentation</a> for more details on how to use these endpoints.</p>

<p>On the examples on the side, you&#39;ll be able to understand that you can map the tags associated with a given resource with the tags associated with the <code>&quot;knowledge_graph&quot;</code> vocabulary for the same resource. You can use vocabulary&#39;s endpoints to create (if it doesn&#39;t exist yet), edit, or delete the tags associated with that resource. Those changes will be reflected in the concepts that are associated with that same resource.</p>

<p>Lastly, keep in mind that, despite the examples on the side refer to datasets, you can use vocabulary&#39;s endpoints to update the tags associated with the <code>&quot;knowledge_graph&quot;</code> vocabulary for all supported resource types: datasets, layers, widgets, and metadata.</p>
<h2 id='favorite-relationships-between-graph-nodes-and-users'>Favorite relationships between graph nodes and users</h2>
<p>As in the case of managing relationships between graph nodes and concepts, <strong>the management of favorite relationships between resources and users is handled by vocabulary endpoints.</strong> Please refer to the <a href="reference.html#favorites">favorite endpoint documentation</a> for more details on how to use these endpoints.</p>
<h2 id='graph-concept-reference'>Graph concept reference</h2>
<blockquote>
<p>Example concept entity structure:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"society"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Society"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"People"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TOPIC"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"numberOfDatasetsTagged"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"4458eb12-8572-45d1-bf07-d5a3ee097021"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This section describes the attributes that are present on a graph concept entity:</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td>The concept unique identifier.</td>
</tr>
<tr>
<td><code>label</code></td>
<td>String</td>
<td>A readable version of the concept identifier.</td>
</tr>
<tr>
<td><code>synonyms</code></td>
<td>String &#124; Array</td>
<td>The list of synonyms for this concept (or an empty string, if no synonyms exist).</td>
</tr>
<tr>
<td><code>labels</code></td>
<td>Array</td>
<td>The list of identifiers for the type of this graph node.</td>
</tr>
<tr>
<td><code>numberOfDatasetsTagged</code></td>
<td>Number</td>
<td>The number of datasets that are currently tagged with this concept.</td>
</tr>
<tr>
<td><code>datasets</code></td>
<td>Array</td>
<td>The list of dataset ids that are currently tagged with this concept.</td>
</tr>
</tbody></table>
<h2 id='graph-relationship-reference'>Graph relationship reference</h2>
<blockquote>
<p>Example relationship entity structure:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4458eb12-8572-45d1-bf07-d5a3ee097021"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graph"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Habitat"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"habitat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitats"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default_parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ecosystem"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This section describes the attributes that are present on a graph relationship entity:</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td>The id of the relationship (usually the dataset id, if finding concepts related to a dataset).</td>
</tr>
<tr>
<td><code>type</code></td>
<td>String</td>
<td>Always set to &quot;graph&quot;.</td>
</tr>
<tr>
<td><code>attributes.iso</code></td>
<td>String</td>
<td><em>Deprecated attribute - you should not rely on this attribute.</em></td>
</tr>
<tr>
<td><code>attributes.synonyms</code></td>
<td>Array</td>
<td>A list of synonyms for this concept.</td>
</tr>
<tr>
<td><code>attributes.id</code></td>
<td>String</td>
<td>The concept unique identifier.</td>
</tr>
<tr>
<td><code>attributes.label</code></td>
<td>String</td>
<td>A readable version of the concept identifier.</td>
</tr>
<tr>
<td><code>attributes.default_parent</code></td>
<td>String</td>
<td>The id of the parent concept, if existing.</td>
</tr>
</tbody></table>
<h1 id='areas'>Areas</h1>
<p><strong>Note: the documentation for these endpoints is not maintained and might not be up to date.</strong></p>

<p>The following sections describe endpoints API users can use to interact with version 1 of Areas of Interest.</p>
<h2 id='get-user-areas'>Get user areas</h2>
<blockquote>
<p>Getting a list of areas for the current user</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59ca3213d08a7d001054522b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test area France"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:55:15.990Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:55:15.990Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59ca32ea3209db0014e9a7b7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test custom area"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b12640deba9d3c5012c5359dd5572e2d"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:58:50.226Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:58:50.226Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns the list of areas created by the user provided.</p>
<h3 id='filters'>Filters</h3>
<blockquote>
<p>Getting a list of areas for the current user and a given application</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area?application<span class="o">=</span>rw
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text, values separated by commas</td>
</tr>
</tbody></table>
<h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre></div>
<p>The Areas service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your areas list.</p>

<p>In the specific case of the Areas service, the default value for the <code>page[size]</code> query parameter is 1000 for backwards compatibility reasons, instead of 10. However (as recommended in the pagination guidelines), you should not rely on the default page size and always provide a value tailored to your needs.</p>
<h3 id='sorting'>Sorting</h3>
<blockquote>
<p>Sorting areas</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area?sort<span class="o">=</span>name
</code></pre></div>
<blockquote>
<p>Sorting areas by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area?sort<span class="o">=</span>name,createdAt
</code></pre></div>
<blockquote>
<p>Sort by name descending, createdAt ascending</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area?sort<span class="o">=</span><span class="nt">-name</span>,+createdAt
</code></pre></div>
<p>The Areas service currently supports sorting using the <code>sort</code> query parameter. Sorting areas adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding.</p>
<h2 id='create-area'>Create area</h2>
<p>Creates a new area</p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text, values separated by commas</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>name</td>
<td style="text-align: center">Name of the new area</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>geostore</td>
<td style="text-align: center">Geostore ID</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/area <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "name": &lt;name&gt;,
   "application": &lt;application&gt;,
   "geostore": &lt;geostore id&gt;
 }'</span>
</code></pre></div><h3 id='example'>Example</h3>
<p>Create an area with name &#39;Portugal area&#39; and Geostore ID &#39;713899292fc118a915741728ef84a2a7&#39; for the Resource Watch application</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/area?application<span class="o">=</span>rw <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
   "name": "Portugal area",
   "application": "rw",
   "geostore": "713899292fc118a915741728ef84a2a7"
 }'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a0da028e6d876001080c259"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Portugal area"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"713899292fc118a915741728ef84a2a7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-16T14:26:48.396Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-16T14:26:48.396Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='delete-area'>Delete area</h2>
<p>Deletes an area</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/area/&lt;area-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div><h3 id='example-2'>Example</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/area/59ca3213d08a7d001054522b <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div><h2 id='get-area'>Get area</h2>
<p>Gets all the information from an area</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area/&lt;area-id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div><h3 id='example-3'>Example</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/area/59ca32ea3209db0014e9a7b7 <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59ca32ea3209db0014e9a7b7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test custom area"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b12640deba9d3c5012c5359dd5572e2d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:58:50.226Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:58:50.226Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='areas-v2'>Areas v2</h1>
<p>Before reading any further, please ensure you have read the <a href="concepts.html#area-of-interest">Areas of Interest concept documentation</a> first. It gives you a brief and clear description of what an Area of Interest is and what it can do for you. </p>

<p>Once you&#39;ve read that section, you can come back here to learn more details about using the RW API&#39;s Areas service. Areas of Interest are used by the <a href="https://www.globalforestwatch.org/">Global Forest Watch website</a> to subscribe to notifications on deforestation and fire alerts inside a particular areas you might be interest in. The sections below describe in detail how you can use the endpoints provided by RW API&#39;s <a href="https://github.com/gfw-api/gfw-area">Areas service</a> to define your own geographic areas of interest.</p>
<h2 id='what-is-the-difference-between-v1-and-v2'>What is the difference between v1 and v2?</h2>
<p>v2 areas are an upgrade in the functionality of the Areas service, and provide you with an easier-to-use interface for creating Areas of Interest. Features such as the notification of alerts inside your Area of Interest <strong>are only available in v2 endpoints</strong>.</p>

<p>Up until v2 areas endpoints were available, you could create Areas of Interest, but you could not define deforestation or fire alerts for your areas. In order to do that, you would need to manually <a href="reference.html#subscribing-to-an-area-of-interest">create a subscription that referenced your Area of Interest</a>. Not only that, but you also needed to manage this interaction between Areas of Interest and Subscriptions by yourself. </p>

<p>v2 areas endpoints were built with the intention of automating this interaction between areas and subscriptions, thus merging together <a href="reference.html#areas"><strong>v1 areas of interest</strong></a> and <a href="reference.html#subscriptions"><strong>subscriptions</strong></a>. In practice, this means that, if your users already had v1 areas or subscriptions previously created, they will show up as v2 areas when requesting data from the v2 endpoints. This also means that, if your application was already using either subscriptions or v1 areas, you can safely transition into v2 areas while keeping the legacy v1 areas and subscriptions that your users have created.</p>

<p>Throughout the sections below, you&#39;ll be able to find <strong>Implementation details</strong> sections that dive deeper into how this synchronization between Areas and Subscriptions is performed on each particular case.</p>
<h2 id='interaction-between-areas-and-subscriptions'>Interaction between Areas and Subscriptions</h2>
<p>As it was stated in the paragraphs above, you can use v2 endpoint to create Areas of Interest and subscribe to deforestation of fire alerts. These subscriptions (and the associated emails or webhook notifications) are handled by the <a href="reference.html#subscriptions">Subscriptions service</a>. This means in practice that each Area might have a Subscription associated. If this is the case, the Area&#39;s <code>subscriptionId</code> property will contain the id of the associated Subscription from the Subscriptions service.</p>

<p>This interaction between Areas and Subscriptions is transparent for the API users, meaning that you don&#39;t need to worry about creating, updating or deleting the subscriptions associated to your areas - this happens automatically, taken into account the Area properties.</p>
<h2 id='getting-all-user-areas'>Getting all user areas</h2>
<blockquote>
<p>Example request to get all areas for the logged user:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d74c3ef240412c2d56a71"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your.email@resourcewatch.org"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The <code>/v2/areas</code> endpoint returns all the areas of interest associated with the user who made the request. For a detailed description of each field, check out the <a href="reference.html/#area-reference">Area reference</a> section.</p>
<h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre></div>
<p>The Areas v2 service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your areas list.</p>

<p>In the specific case of the Areas v2 service, the default value for the <code>page[size]</code> query parameter is 100, instead of 10. However, this default value will be reduced to 10 in future releases, so (as recommended in the pagination guidelines), you should not rely on the default page size and always provide a value tailored to your needs.</p>
<h3 id='filters'>Filters</h3>
<blockquote>
<p>Filtering areas</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area?application<span class="o">=</span>rw&amp;public<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>The <code>/v2/areas</code> endpoint provides the following parameters to tailor the returned listing:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: left">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: left">Filter results by the application associated with the areas.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&#39;</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: left">Filter results by the status of the area.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;saved&#39;</td>
</tr>
<tr>
<td>public</td>
<td style="text-align: left">Filter results by the privacy status of the area.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
<tr>
<td>all</td>
<td style="text-align: left">Return all the areas instead of just the areas associated with user of the request. This filter will only be taken into account for ADMIN users.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
</tbody></table>
<h3 id='sorting'>Sorting</h3>
<blockquote>
<p>Sorting areas</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v2/area?sort=name"</span>
</code></pre></div>
<blockquote>
<p>Sorting layers by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v2/area?sort=name,status"</span>
</code></pre></div>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/v2/area?sort=-name,+status"</span>
</code></pre></div>
<p>The Areas v2 service currently supports sorting using the <code>sort</code> query parameter. Sorting v2 areas adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="reference.html#area-reference">Area reference</a> section for a detailed description of the fields you can use when sorting.</p>
<h3 id='errors-for-getting-user-areas'>Errors for getting user areas</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td><code>Unauthorized</code></td>
<td>No authorization token was provided.</td>
</tr>
</tbody></table>
<h3 id='implementation-details'>Implementation details</h3>
<p>Finds all areas for the user who requested the list of areas. For each area, if it has an associated subscription (i.e. the <code>subscriptionId</code> field of the area is not empty), it merges the subscription data over the area data, returning it as a single object. After that, the remaining user subscriptions are converted to area objects and returned.</p>
<h2 id='getting-all-areas'>Getting all areas</h2>
<blockquote>
<p>Example request to get ALL areas (only available for ADMIN users):</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area?all<span class="o">=</span><span class="nb">true</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d74c3ef240412c2d56a71"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your.email@resourcewatch.org"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The same <code>/v2/areas</code> endpoint, used to retrieve all of the logged user&#39;s areas, can be used to retrieve ALL areas (for all users). To trigger this behavior, all you need to do is provide the <code>all=true</code> flag as a query parameter - <strong>keep in mind this option will only be taken into account for ADMIN users</strong> (i.e. if the logged user is not an ADMIN, the <code>all=true</code> flag is ignored and the logged user&#39;s areas are returned).</p>

<p>For a detailed description of each field, check out the <a href="reference.html#area-reference">Area reference</a> section.</p>
<h3 id='pagination-2'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25&amp;all<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>The Areas v2 service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your areas list.</p>
<h3 id='filters-2'>Filters</h3>
<blockquote>
<p>Filtering areas</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area?application<span class="o">=</span>rw&amp;public<span class="o">=</span><span class="nb">true</span>&amp;all<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>The filters for this endpoint are the same as the <code>/v2/areas</code> endpoint described above:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: left">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: left">Filter results by the application associated with the areas. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&#39;</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: left">Filter results by the status of the area.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;saved&#39;</td>
</tr>
<tr>
<td>public</td>
<td style="text-align: left">Filter results by the privacy status of the area.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
<tr>
<td>all</td>
<td style="text-align: left">Return all the areas instead of just the areas associated with user of the request. This filter will only be taken into account for ADMIN users.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
</tbody></table>
<h3 id='errors-for-getting-all-areas'>Errors for getting all areas</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td><code>Unauthorized</code></td>
<td>No authorization token was provided.</td>
</tr>
</tbody></table>
<h3 id='implementation-details-2'>Implementation details</h3>
<p>If the <code>all=true</code> query filter is provided, the <code>/find-all</code> endpoint of the Subscriptions service is used to find all existing subscriptions (for all users).</p>

<p>Then, for each area in the Areas service database, if it has an associated subscription (i.e. the <code>subscriptionId</code> field of the area is not empty), it merges the subscription data over the area data, returning it as a single object. After that, the remaining subscriptions are converted to area objects and returned.</p>
<h2 id='getting-an-area-by-its-id'>Getting an area by its id</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v2/area/:id
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d787bef240412c2d56a74"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tiago.garcia@vizzuality.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If you know the id or the slug of a area, then you can access it directly - keep in mind the id search is case-sensitive. If the area has the <code>public</code> attribute set to <code>false</code>, you will only be able to fetch its information if you are the owner of the area. If the area has the <code>public</code> attribute set to <code>true</code> and the user who requests it is not the owner, some information will be hidden for privacy reasons.</p>
<h3 id='errors-for-getting-an-area-by-its-id'>Errors for getting an area by its id</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td><code>Unauthorized</code></td>
<td>No authorization token was provided.</td>
</tr>
<tr>
<td>401</td>
<td><code>Area private</code></td>
<td>You are trying to get the information of a private area without being the owner of the area.</td>
</tr>
</tbody></table>
<h3 id='implementation-details-3'>Implementation details</h3>
<p>Try to find an area with the id provided:</p>

<ol>
<li>If the area exists:

<ol>
<li>If the area has an associated subscription, the subscription is fetched, its data is merged over the area and the result is returned.</li>
<li>If the area has no subscription associated, the area data is returned.</li>
</ol></li>
<li>If the area does not exist:

<ol>
<li>Try to find a subscription with the id provided. If it exists, it is returned as an area object, if not, a <code>404 Not Found</code> error is returned.</li>
</ol></li>
</ol>
<h2 id='creating-an-area'>Creating an area</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/area
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name": "Example area",
    "application": "gfw",
    "image": "",
    "tags": [],
    "public": false,
    "fireAlerts": true,
    "deforestationAlerts": true,
    "webhookUrl": "http://example.com",
    "monthlySummary": true,
    "email": "youremail@resourcewatch.org",
    "language": "en"
}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47ef240412c2d56a78"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example area"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"wdpaid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T18:19:51.485Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T18:19:51.485Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47dd8fa31290d548ae"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@resourcewatch.org"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use this endpoint to create new areas. For a detailed description of each field that can be provided in the body of the request, check out the <a href="reference.html/#area-reference">Area reference</a> section.</p>

<p>Keep in mind that you should provide one of the following when creating an area:</p>

<ul>
<li><code>geostore</code> with the id of a geostore object obtained from <a href="reference.html#geostore">RW API&#39;s Geostore service</a>, if you are creating an area that references a geostore;</li>
<li><code>geostoreDataApi</code> with the id of a geostore object obtained from the GFW Data API, as an alternative way to create an area that references a geostore;</li>
<li><code>wdpaid</code> with the id of a protected area if you are creating an area that references a protected area;</li>
<li><code>iso</code> object with a valid country/region/subregion if you are creating an area that references an admin country/region/subregion;</li>
<li><code>use</code> object with valid id and name of a land use concessioned area, if you are creating an area that references a land use area.</li>
</ul>

<p>Please check the <a href="reference.html#area-reference">Area model reference</a> for details on what values each field is expected to provide.</p>

<p>According to multiple factors (including the <code>geostore</code> that is associated with the area, if the area subscribes to <code>fireAlerts</code>, <code>deforestationAlerts</code>, etc.), there might be a period of time in which the data for the area is being generated. While that is the case, the area will have <code>status</code> set to <code>&#39;pending&#39;</code>. Once the area data is ready, the <code>status</code> of the area will be updated to <code>&#39;saved&#39;</code>.</p>
<h3 id='errors-for-creating-an-area'>Errors for creating an area</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt; can not be empty.</code></td>
<td>You are missing a required field while creating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code>&lt;field&gt; is not valid.</code></td>
<td>You provided an invalid field while creating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code>geostore and geostoreDataApi are mutually exclusive, cannot provide both at the same time</code></td>
<td>You are trying to provide <code>geostore</code> and <code>geostoreDataApi</code> at the same time, and only one of the fields can be provided.</td>
</tr>
<tr>
<td>401</td>
<td><code>Unauthorized</code></td>
<td>No token was provided.</td>
</tr>
</tbody></table>
<h3 id='email-notifications'>Email notifications</h3>
<p>After creating an area, if the <code>email</code> field of the area contains a valid email address, an email is sent to the user. The email content varies according to the status of the area:</p>

<ul>
<li>If the area has status <code>saved</code>, an email is sent to let the user know the area of interest is ready to be viewed.</li>
<li>If the area has status <code>pending</code>, an email is sent to let the user know the area of interest is being generated and will be available later.</li>
</ul>

<p>If you want to understand more about how these emails are sent or how you can update its content, please check the developer docs section on <a href="developer.html#areas-v2-notification-emails">Areas v2 Email Notifications</a>.</p>
<h3 id='implementation-details-4'>Implementation details</h3>
<p>POST of a new area always starts by creating the area. Then, taking into account the area attributes, it might also create a subscription which will then be associated with the area. The area&#39;s <code>subscriptionId</code> attribute will then be updated with the id of the created subscription if that&#39;s the case. The created area is then returned.</p>

<p>The subscription is created only if the area has selected set to <code>true</code> at least one of the following attributes:</p>

<ul>
<li><code>deforestationAlerts</code></li>
<li><code>fireAlerts</code></li>
<li><code>monthlySummary</code></li>
</ul>
<h2 id='updating-an-area'>Updating an area</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v2/area/:id
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "name": "Example area",
    "application": "gfw",
    "image": "",
    "tags": [],
    "public": false,
    "fireAlerts": true,
    "deforestationAlerts": true,
    "webhookUrl": "http://example.com",
    "monthlySummary": true,
    "email": "youremail@resourcewatch.org",
    "language": "en"
}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47ef240412c2d56a78"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example area"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"wdpaid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T18:19:51.485Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-29T22:17:12.176Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47dd8fa31290d548ae"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@resourcewatch.org"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use this endpoint to update an existing area. For a detailed description of each field that can be provided in the body of the request, check out the <a href="reference.html/#area-reference">Area reference</a> section. Keep in mind that you must provide one of the following when updating an area:</p>

<ul>
<li><code>geostore</code> with the id of a geostore object obtained from <a href="reference.html#geostore">RW API&#39;s Geostore service</a>, if you are updating an area that references a geostore;</li>
<li><code>geostoreDataApi</code> with the id of a geostore object obtained from the GFW Data API, as an alternative way to update an area that references a geostore;</li>
<li><code>wdpaid</code> with the id of a protected area if you are updating an area that references a protected area;</li>
<li><code>iso</code> object with a valid country/region/subregion if you are updating an area that references an admin country/region/subregion;</li>
<li><code>use</code> object with valid id and name of a land use concessioned area, if you are updating an area that references a land use area.</li>
</ul>

<p>Please check the <a href="reference.html#area-reference">Area model reference</a> for details on what values each field is expected to provide.</p>
<h3 id='errors-for-updating-an-area'>Errors for updating an area</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>&lt;field&gt; can not be empty.</code></td>
<td>You are missing a required field while updating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code>&lt;field&gt; is invalid.</code></td>
<td>You provided an invalid field while updating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code>Id required</code></td>
<td>No id was provided in the URL.</td>
</tr>
<tr>
<td>400</td>
<td><code>geostore and geostoreDataApi are mutually exclusive, cannot provide both at the same time</code></td>
<td>You are trying to provide <code>geostore</code> and <code>geostoreDataApi</code> at the same time, and only one of the fields can be provided.</td>
</tr>
<tr>
<td>401</td>
<td><code>Unauthorized</code></td>
<td>No token was provided.</td>
</tr>
<tr>
<td>403</td>
<td><code>Not authorized</code></td>
<td>You are trying to update an area that is not owned by you and you are not an ADMIN user.</td>
</tr>
<tr>
<td>404</td>
<td><code>Area not found</code></td>
<td>The area with id provided does not exist.</td>
</tr>
</tbody></table>
<h3 id='email-notifications-2'>Email notifications</h3>
<p>After updating an area, if the <code>email</code> field of the area contains a valid email address and the area&#39;s status is <code>saved</code>, an email is sent to let the user know the area of interest is ready to be viewed.</p>

<p>If you want to understand more about how these emails are sent or how you can update its content, please check the developer docs section on <a href="developer.html#areas-v2-notification-emails">Areas v2 Email Notifications</a>.</p>
<h3 id='implementation-details-5'>Implementation details</h3>
<p>PATCHing an area is a bit more complex, and it comes down to 3 major cases:</p>

<ol>
<li>The area already exists and has subscriptions preference (<code>deforestationAlerts</code>, <code>fireAlerts</code> or <code>monthlySummary</code> set to true) in the request data:

<ol>
<li>If the area doesn&#39;t have a subscription associated, a new one is created and associated.</li>
<li>If the area already had a subscription, then the subscription is PATCHed according to the data provided in the request body.</li>
</ol></li>
<li>The area already exists and doesnt has subscription preferences (<code>deforestationAlerts</code>, <code>fireAlerts</code> or <code>monthlySummary</code> set to true) in the request data:

<ol>
<li>If the area had a subscription associated, then the subscription associated is deleted.</li>
<li>Otherwise, just save the area.</li>
</ol></li>
<li>The area doesnt exist because on the fetch it returned a mapped subscription (meaning we are PATCHing an area using the id of a subscription):

<ol>
<li>First, create a new area, and then:

<ol>
<li>If the request data has subscriptions preference (<code>deforestationAlerts</code>, <code>fireAlerts</code> or <code>monthlySummary</code> set to true), also PATCH the subscription.</li>
<li>If the request data doesn&#39;t have subscriptions preference (<code>deforestationAlerts</code>, <code>fireAlerts</code> or <code>monthlySummary</code> set to true), delete the associated subscription.</li>
</ol></li>
</ol></li>
</ol>
<h2 id='deleting-an-area'>Deleting an area</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v2/area/:id
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Returns 204 No Content in case of success.</p>
</blockquote>

<p>Use this endpoint to delete an existing area. This endpoint requires authentication and, in order to DELETE an area, you need to be either the owner of the area or an ADMIN user.</p>

<p>DELETing an area deletes the area with id provided and any associated subscription with the area being deleted (identified by the id stored in the <code>subscriptionId</code> field). This is done transparently from the perspective of an API user, so no action is needed to trigger this behavior.</p>
<h3 id='errors-for-deleting-an-area'>Errors for deleting an area</h3>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code>Id required</code></td>
<td>No id was provided in the URL.</td>
</tr>
<tr>
<td>401</td>
<td><code>Unauthorized</code></td>
<td>No token was provided.</td>
</tr>
<tr>
<td>403</td>
<td><code>Not authorized</code></td>
<td>You are trying to delete an area that is not owned by you and you are not an ADMIN user.</td>
</tr>
<tr>
<td>404</td>
<td><code>Area not found</code></td>
<td>The area with id provided does not exist.</td>
</tr>
</tbody></table>
<h2 id='update-areas-by-geostore'>Update areas by geostore</h2>
<blockquote>
<p>Example request to update all areas that reference geostores with ids &quot;123&quot; and &quot;234&quot;:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/area/update
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "geostores": ["123", "234"],
    "update_params": {
        "status": "saved",
        "name": "Updated Area"
    }
}'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d74c3ef240412c2d56a71"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-29T22:17:12.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tiago.garcia@vizzuality.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Use this endpoint to batch update multiple areas that are associated with one of the geostore ids provided in the request body. In order to use this endpoint, you need to be authenticated as an ADMIN user.</p>

<p>You can use the <code>update_params</code> field of the request body to specify multiple fields to update on the areas that belong to the geostore ids provided in the body. Keep in mind that the same validations as when updating an area are applied. If a validation fails, the request will fail with <code>400 Bad Request</code> and no area will be updated.</p>

<p>In case of success a 200 OK response is returned, and all the areas that match the update criteria (belonging to one of the geostores provided in the request body) will be returned.</p>
<h3 id='email-notifications-3'>Email notifications</h3>
<p>After updating areas by geostore, for each area that was updated which has a valid email address associated and its status updated to <code>saved</code>, an email will be sent to the user to let them know that the area is ready to be viewed.</p>

<p>If you want to understand more about how these emails are sent or how you can update its content, please check the developer docs section on <a href="developer.html#areas-v2-notification-emails">Areas v2 Email Notifications</a>.</p>
<h2 id='sync-areas'>Sync areas</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v2/area/sync
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"syncedAreas"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAreas"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example snippet that synchronizes the areas before fetching the information of ALL areas:</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// First call the sync endpoint</span>
<span class="k">await</span> <span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">v2/area/sync</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Then call the get endpoint while there are more pages to find</span>
<span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">hasNextPage</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pageNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">hasNextPage</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">v2/area?all=true&amp;page[number]=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pageNumber</span><span class="p">);</span>
   <span class="nx">results</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
   <span class="nx">pageNumber</span><span class="o">++</span><span class="p">;</span>
   <span class="nx">hasNextPage</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">links</span><span class="p">.</span><span class="nb">self</span> <span class="o">===</span> <span class="nx">res</span><span class="p">.</span><span class="nx">links</span><span class="p">.</span><span class="nx">last</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Use this endpoint to synchronize each area information with the associated subscription. The usage of this endpoint is recommended if you are performing update processes that rely on updated subscription information for the areas.</p>

<p>This endpoint supports the following query parameters to control the execution of the sync:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>startDate</td>
<td style="text-align: center">The date from which the sync will be executed. All subscriptions that have been updated since this date will be synced with the existing areas.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">2020-03-18T09:45:56.476Z</td>
</tr>
<tr>
<td>endDate</td>
<td style="text-align: center">The date until which the sync will be executed. All subscriptions that have been updated until this date will be synced with the existing areas.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">2020-03-25T09:45:56.476Z</td>
</tr>
</tbody></table>

<p><em>Note: By default, the sync is done for the last week changes (i.e. the default value for the <code>startDate</code> parameter is one week ago and the default value for the <code>endDate</code> parameter is now).</em></p>
<h2 id='area-reference'>Area reference</h2>
<p>This section gives you a complete view at the properties that are maintained as part of an area. When interacting with an area (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code>id</code> is nested inside an <code>attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/gfw-api/gfw-area/blob/develop/app/src/models/area.modelV2.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the area. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Name of the area.</td>
</tr>
<tr>
<td>application</td>
<td>String</td>
<td>Yes</td>
<td>&#39;gfw&#39;</td>
<td>The application this area belongs to.</td>
</tr>
<tr>
<td>geostore</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If this area references a geostore obtained from <a href="reference.html#geostore">RW API&#39;s Geostore service</a>, the id of that geostore will be saved in this field.</td>
</tr>
<tr>
<td>geostoreDataApi</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If this area references a geostore obtained from the GFW Data API, the id of that geostore will be saved in this field.</td>
</tr>
<tr>
<td>wdpaId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If this area references a WDPA, the id of the WDPA will be saved in this field.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who owns the area. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>use</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>If this area references a land use concession, this field will contain an object that identifies the concrete area referred.</td>
</tr>
<tr>
<td>use.id</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The id of the land use concession to track.</td>
</tr>
<tr>
<td>use.name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The name of the land use concession to track. The supported values for this field include <code>mining</code> for <a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">mining areas</a>, <code>logging</code> for <a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">Congo Basin logging roads</a>, <code>oilpalm</code> for <a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">palm oil plantations</a> and <code>fiber</code> for <a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">wood fiber plantations</a>.</td>
</tr>
<tr>
<td>iso</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>If this area references an admin country or region, this field will contain an object that identifies the concrete area referred.</td>
</tr>
<tr>
<td>iso.country</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> of the country being referred by this area.</td>
</tr>
<tr>
<td>iso.region</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The <a href="https://gadm.org/data.html">GADM id</a> of the region inside the country to reference (optional, you can reference the whole country, or just on specific region of the country).</td>
</tr>
<tr>
<td>iso.subregion</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The <a href="https://gadm.org/data.html">GADM id</a> of the subregion inside the region to reference (optional, you can reference the whole region, or just on specific subregion of the region).</td>
</tr>
<tr>
<td>admin</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code>iso</code> field above.</td>
</tr>
<tr>
<td>admin.adm0</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code>iso.country</code> field above.</td>
</tr>
<tr>
<td>admin.adm1</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code>iso.region</code> field above.</td>
</tr>
<tr>
<td>admin.adm2</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code>iso.subregion</code> field above.</td>
</tr>
<tr>
<td>image</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL for an image representative of the area of interest.</td>
</tr>
<tr>
<td>templateId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>?</td>
</tr>
<tr>
<td>tags</td>
<td>Array</td>
<td>Yes</td>
<td>[]</td>
<td>Array of string tags that can be used to categorize areas.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>Yes</td>
<td>&#39;pending&#39;</td>
<td>The status of the area - can be one of <code>pending</code>, <code>saved</code> or <code>failed</code>. Cannot be modified by users. Initially, it is set as <code>pending</code>. Once all the data for the area is crunched and ready to be read, the status is updated to <code>saved</code> and an email is sent to the user. If errors occur, the status is set to <code>failed</code>.</td>
</tr>
<tr>
<td>public</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area is public or private. Public area information can be accessed by other users.</td>
</tr>
<tr>
<td>fireAlerts</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area subscribes to notifications on fire alerts - set this field to true if you wish to be notified about fire alerts in your area of interest.</td>
</tr>
<tr>
<td>deforestationAlerts</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area subscribes to notifications on deforestation alerts - set this field to true if you wish to be notified about deforestation alerts in your area of interest.</td>
</tr>
<tr>
<td>monthlySummary</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area subscribes to monthly summary notifications - set this field to true if you wish to be notified monthly about deforestation and fire alerts in your area of interest.</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The email that will be used as receiver of the notification emails.</td>
</tr>
<tr>
<td>webhookUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Instead of receiving an email as notification, you can choose to receive a hit in the webhook URL you set in this field.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>No</td>
<td>&#39;en&#39;</td>
<td>The language in which you wish to receive the email notifications. <code>en</code>, <code>fr</code>, <code>zh</code>, <code>id</code>, <code>pt_BR</code> or <code>es_MX</code> are the supported values for this field. If any other value is provided, <code>en</code> is automatically set.</td>
</tr>
<tr>
<td>subscriptionId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If an area is returned as the reflection of an existing subscription in the Subscriptions service, this field will contain the id of the corresponding subscription.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td>now</td>
<td>Automatically maintained date of when the area was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td>now</td>
<td>Automatically maintained date of when the area was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>
<h1 id='webshot'>Webshot</h1>
<p>The webshot set of endpoints allows you to capture a given page as a document file, that can then be used, for example, as a preview thumbnail.</p>

<aside class="notice">
This process is computational demanding and may be slow at times, depeding on server load and complexity of the page being rendered. Avoid making consecutive or batch requests to these endpoint, and allow enough time for them to process. 
</aside>

<p>This service has two endpoints:</p>
<h3 id='pdf'>PDF</h3>
<p>This endpoint expects a URL as a query parameter and generates a pdf containing a rendered version of that page: </p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="s1">'http://api.resourcewatch.org/v1/webshot/pdf?url=http://google.com&amp;filename=my-google-screenshoz.pdf'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
</code></pre></div>
<p>The endpoint accepts the following optional parameters:</p>

<ul>
<li><code>height</code> - Configure the height of the generated screenshot.</li>
<li><code>width</code> - Configure the width of the generated screenshot.</li>
<li><code>format</code> - Configure the format of the generated screenshot, admiting two values: <code>png</code> and <code>pdf</code>. <code>pdf</code> is the default value.</li>
</ul>

<p>It is important to take into account that this endpoint works by rendering the <code>https://resourcewatch.org/embed/widget/&lt;widget id&gt;</code> URL with those dimensions applied to the viewport. So the resulting screenshot will have the proportional size of the corresponding DOM element within that viewport, and not the exact <code>height</code> and <code>width</code> specified.</p>
<h3 id='widget'>Widget</h3>
<p>This endpoint generates a thumbnail image for the provided widget and stores it on AWS S3.</p>

<aside class="notice">
This endpoint does not validate the existence of the widget - you will not get a 404 HTTP error if you provided a non-existent widget id. 
</aside>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
  http://api.resourcewatch.org/v1/webshot/widget/7b540186-9a9f-4e13-a6e8-f38e64fab2e1/thumbnail <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"widgetThumbnail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws.com/resourcewatch/thumbnails/&lt;filename&gt;.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint accepts two optional query parameters, <code>height</code> and <code>width</code>, that configure the size of the generated screenshot. Keep in mind that this endpoint works by rendering the <code>https://resourcewatch.org/embed/widget/&lt;widget id&gt;</code> URL with those dimensions applied to the viewport, and then captures the content of the <code>.widget-content</code> DOM element into an image file. As such, the resulting screenshot will have the proportional size of the corresponding DOM element within that viewport, and not the exact <code>height</code> and <code>width</code> specified.</p>
<h1 id='topic'>Topic</h1>
<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>
<h2 id='what-is-a-topic'>What is a Topic?</h2>
<p>A topic contains the information to display a web page belonging to a user.</p>
<h2 id='getting-all-topics'>Getting all topics</h2>
<p>This endpoint will allow to get all topics belonging to a user:</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/topic <span class="nt">-H</span> <span class="s1">'Authorization: Bearer exampleToken'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities topic"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-topic"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/5ebeddda-8f3d-4e63-8a52-08e15c3e148c</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/73c574b9-f9ab-4f77-87be-651ff8dac5fe</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;test1&lt;/p&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='filters'>Filters</h3>
<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>published</td>
<td style="text-align: center">Filter topics by publishing status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>private</td>
<td style="text-align: center">Filter topics by private status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>user</td>
<td style="text-align: center">Filter topics by author user id</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application to which the topic belongs. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">Text (single value)</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/topic?user<span class="o">=</span>57bc2608f098ce98007985e4&amp;private<span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      The format <b><i>filter[filterName]=value</i></b> which was previously supported for some filters, is now deprecated, in favor of <b><i>filterName=value</i></b>.
    </p>
</aside>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Deprecated syntax</span>
curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/topic?filter[user]<span class="o">=</span>57bc2608f098ce98007985e4&amp;filter[private]<span class="o">=</span><span class="nb">false</span>
</code></pre></div><h3 id='sorting'>Sorting</h3>
<p>There&#39;s currently no support for custom sorting of topics. The topics are listed on a pseudo-random order.</p>
<h3 id='include-related-entities'>Include related entities</h3>
<p>When loading topics, you can optionally pass an <code>includes</code> query argument to load additional data.</p>
<h4 id='user'>User</h4>
<p>Loads the name and email address of the author of the topic. If you request this issue as an authenticated user with ADMIN role, you will additionally get the author&#39;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code>user</code> property will be added to the layer object.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/topic?includes<span class="o">=</span>user
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test topic three"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-topic-three-cd4305e9-e3c8-456b-85a0-32eccb6100e6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three summary"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three description"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three description"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ac9f9e29309063404573a2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='creating-a-topic'>Creating a topic</h2>
<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<p>When creating a topic, the <code>application</code> field should be present and cannot contain any values that are not associated with the creating user&#39;s account. If an <code>application</code> value is not provided, <code>[&quot;rw&quot;]</code> is used by default, and the process will fail if the user account does not belong to it. Any role can create a topic.</p>

<p>Supported fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Short name for the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>slug</td>
<td>Unique identifier for the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>summary</td>
<td>Summary of the content of the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>description</td>
<td>Description of the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>content</td>
<td>Content of the topic, typically encoded as a JSON string</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the topic is in a publishable state</td>
<td>boolean</td>
</tr>
<tr>
<td>photo</td>
<td>Object containing a set of image urls associated with the topic</td>
<td>object</td>
</tr>
<tr>
<td>user_id</td>
<td>Id of the user who created the topic</td>
<td>string with valid user id (not validated)</td>
</tr>
<tr>
<td>private</td>
<td></td>
<td>boolean</td>
</tr>
<tr>
<td>application</td>
<td>Application(s) to which the topic belongs. Defaults to <code>[&quot;rw&quot;]</code>. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>array of strings</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/topics <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "type": "topics",
          "attributes": {
              "name": "Cities",
              "summary": "Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ...",
              "description": "",
              "content": "[{...}]",
              "published": false,
              "photo": {
                  "cover": "...",
                  "thumb": "...",
                  "original": "..."
              },
              "user-id": "eb63867922e16e34ef3ce862",
              "private": true,
              "application":  ["rw"]
          }
      }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='editing-a-topic'>Editing a topic</h2>
<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the topic</li>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<p>When updating the <code>application</code> field of a topic, a user cannot add values not associated with their user account.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/topics/&lt;<span class="nb">id </span>of the topic&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "attributes": {
              "description": "Topic related with cities."
          }
      }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Topic related with cities."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='clone-a-topic'>Clone a topic</h2>
<p>Clones an existing topic using its ID.
If the original topic contains functioning widgets, they will be duplicated and the new ids will be used by the new topic.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/topics/10/clone <span class="nt">-H</span> <span class="s1">'Authorization: Bearer exampleToken'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-a9cb2c87-f6b6-48cf-9b52-9e0de4fd8d6f"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1511952250652,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">widget</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">widgetId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">b9186ce9-78ae-418b-a6d3-d521283ce485</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">categories</span><span class="se">\"</span><span class="s2">:[]}},...}]"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='dashboard'>Dashboard</h1>
<p><strong>Note: the documentation for these endpoints is not maintained and might not be up to date.</strong></p>
<h2 id='what-is-a-dashboard'>What is a dashboard</h2>
<p>A dashboard contains the information to display a web page belonging to a user.</p>
<h2 id='getting-all-dashboards'>Getting all dashboards</h2>
<blockquote>
<p>This endpoint will allow to get all dashboards belonging to a user:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard <span class="nt">-H</span> <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities Dashboard"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-dashboard"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/5ebeddda-8f3d-4e63-8a52-08e15c3e148c</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/73c574b9-f9ab-4f77-87be-651ff8dac5fe</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;test1&lt;/p&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="nl">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
                </span><span class="nl">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=14&amp;page%5Bsize%5D=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='filters'>Filters</h3>
<blockquote>
<p>Example request using query string filters:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?name<span class="o">=</span>text&amp;private<span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<blockquote>
<p>Deprecated filter syntax:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?filter[name]<span class="o">=</span>text&amp;filter[private]<span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Filter dashboards by name (partial matches and case-insensitive supported).</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">Filter dashboards by publishing status (true, false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>private</td>
<td style="text-align: center">Filter dashboards by private status (true, false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>user</td>
<td style="text-align: center">Filter dashboards by author user id.</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>user.role</td>
<td style="text-align: center">The role of the user who created the dashboard. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td style="text-align: right"><code>ADMIN</code>, <code>MANAGER</code> or <code>USER</code></td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application to which the dashboard belongs. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td style="text-align: right">Text (single value)</td>
</tr>
<tr>
<td>is-highlighted</td>
<td style="text-align: center">Filter dashboards by highlighted ones (true,false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>is-featured</td>
<td style="text-align: center">Filter dashboards by featured ones (true,false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>author-title</td>
<td style="text-align: center">Filter dashboards by the title of the author of the dashboard.</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<p><strong>Deprecation notice:</strong> The format <em>filter[filterName]=value</em> which was previously supported for some filters, is now deprecated, in favor of <em>filterName=value</em>.</p>
<h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre></div>
<p>The Dashboards service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your dashboards list.</p>
<h3 id='sorting'>Sorting</h3>
<blockquote>
<p>Sorting dashboards</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>name
</code></pre></div>
<blockquote>
<p>Sorting dashboards by multiple criteria</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>name,slug
</code></pre></div>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span><span class="nt">-name</span>,+slug
</code></pre></div>
<blockquote>
<p>Sorting dashboards by the role of the user who owns the dashboard</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>user.role
</code></pre></div>
<p>The Dashboards service currently supports sorting using the <code>sort</code> query parameter. Sorting dashboards adheres to the conventions defined in the <a href="concepts.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to all dashboard model fields, you can sort the returned results by the name (using <code>user.name</code>) or role (using <code>user.role</code>) of the user owner of the dashboard. Keep in mind that sorting by user data is restricted to ADMIN users.</p>
<h3 id='include-related-entities'>Include related entities</h3>
<p>When loading dashboards, you can optionally pass an <code>includes</code> query argument to load additional data.</p>
<h4 id='user'>User</h4>
<blockquote>
<p>Example request including the information for the user who owns the dashboard:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/dashboard?includes<span class="o">=</span>user
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test dashboard three"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-dashboard-three-cd4305e9-e3c8-456b-85a0-32eccb6100e6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three summary"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three description"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three description"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ac9f9e29309063404573a2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="nl">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Loads the name and email address of the owner of the dashboard. If you request this issue as an authenticated user with ADMIN role, you will additionally get the owner&#39;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code>user</code> property will be added to the layer object.</p>
<h2 id='getting-a-dashboard-by-its-id'>Getting a dashboard by its ID</h2>
<blockquote>
<p>How to get a dashboard by its ID:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET http://api.resourcewatch.org/dashboard/24
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, connected, and efficient growth can help ensure more competitive cities, and provide a better quality of life for citizens.  The decisions that national leaders, local officials, developers, and planners make today will determine how billions of urban cities will live over the next century. Already, half the global population resides in cities. That figure is set to increase to 70 percent by 2050."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/cover/data?1523301918"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/thumb/data?1523301918"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/original/data?1523301918"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f63c81bd32c60206ed6b12"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='creating-a-dashboard'>Creating a dashboard</h2>
<blockquote>
<p>Example request for creating a dashboard:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dashboard <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "type": "dashboards",
          "attributes": {
              "name": "Cities",
              "summary": "Traditional models of city development can lock us into ...",
              "description": "",
              "content": "[{...}]",
              "published": false,
              "photo": {
                  "cover": "...",
                  "thumb": "...",
                  "original": "..."
              },
              "private": true,
              "production": true,
              "preproduction": false,
              "staging": false,
              "application":  ["rw"],
              "is-highlighted": false,
              "is-featured": false,
              "author-title": "",
              "author-image": @file
          }
      }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into ..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When creating a dashboard, the <code>application</code> field should be present and cannot contain any values that are not associated with the creating user&#39;s account. If an <code>application</code> value is not provided, <code>[&quot;rw&quot;]</code> is used by default, and the process will fail if the user account does not belong to it. Additionally, keep in mind that this endpoint implements role-based access control in accordance with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</p>

<p>Supported fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Short name for the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>summary</td>
<td>Summary of the content of the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>description</td>
<td>Description of the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>content</td>
<td>Content of the dashboard, typically encoded as a JSON string</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the dashboard is in a publishable state</td>
<td>boolean</td>
</tr>
<tr>
<td>photo</td>
<td>Object containing a set of image urls associated with the dashboard</td>
<td>object</td>
</tr>
<tr>
<td>private</td>
<td>If the dashboard is private or publicly available.</td>
<td>boolean</td>
</tr>
<tr>
<td>production</td>
<td>If the dashboard is available in the production environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>preproduction</td>
<td>If the dashboard is available in the preproduction environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>staging</td>
<td>If the dashboard is available in the staging environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>application</td>
<td>Application(s) to which the dashboard belongs. Defaults to <code>[&quot;rw&quot;]</code>. Read more about this field <a href="concepts.html#applications">here</a>.</td>
<td>array of strings</td>
</tr>
<tr>
<td>is-highlighted</td>
<td>If this dashboard is highlighted (<code>true</code>/<code>false</code>). Defaults to <code>false</code>. Only accessible to users with <code>ADMIN</code> role.</td>
<td>boolean</td>
</tr>
<tr>
<td>is-featured</td>
<td>If this dashboard is featured (<code>true</code>/<code>false</code>). Defaults to <code>false</code>. Can only be set by user with <code>ADMIN</code> role.</td>
<td>boolean</td>
</tr>
<tr>
<td>author-title</td>
<td>The title of the author of the dashboard.</td>
<td>any valid text</td>
</tr>
<tr>
<td>author-image</td>
<td>File for the image of the author of the dashboard.</td>
<td>valid image file (jpg, jpeg, png)</td>
</tr>
</tbody></table>
<h2 id='editing-a-dashboard'>Editing a dashboard</h2>
<blockquote>
<p>Example request for updating a dashboard:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH https://api.resourcewatch.org/v1/dashboard/&lt;<span class="nb">id </span>of the dashboard&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "attributes": {
              "description": "Dashboard that uses cities"
          }
      }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us ..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dashboard that uses cities"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must be logged in and belong to the same application as the dashboard</li>
</ul>

<p>When updating the <code>application</code> field of a dashboard, a user cannot add values not associated with their user account.</p>
<h2 id='delete-dashboard'>Delete dashboard</h2>
<blockquote>
<p>Example request for deleting a dashboard:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/dashboard/&lt;<span class="nb">id </span>of the dashboard&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must comply with <a href="concepts.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must be logged in and belong to the same application as the dashboard</li>
</ul>
<h2 id='clone-dashboard'>Clone dashboard</h2>
<blockquote>
<p>Example request for cloning a dashboard:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/dashboard/&lt;<span class="nb">id</span><span class="o">&gt;</span>/clone <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "data": {
        "attributes": {
            "name": "Copy of Cities dashboard",
        }
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Copy of Cities dashboard"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-a9cb2c87-f6b6-48cf-9b52-9e0de4fd8d6f"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1511952250652,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">widget</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">widgetId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">b9186ce9-78ae-418b-a6d3-d521283ce485</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">categories</span><span class="se">\"</span><span class="s2">:[]}},...}]"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111167922e16e34ef3ce872"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Clones an existing dashboard using its ID. If the original dashboard contains widgets, they will be duplicated and the new ids will be used by the new dashboard. Data can be provided in the body of the request in order to overwrite the data of the original dashboard. In the example on the side, the <code>name</code> of the dashboard will be overwritten.</p>

<p>The following attributes can be overwritten by providing new values in the request body:</p>

<ul>
<li><code>name</code></li>
<li><code>description</code></li>
<li><code>content</code></li>
<li><code>published</code></li>
<li><code>summary</code></li>
<li><code>photo</code></li>
<li><code>private</code></li>
<li><code>production</code></li>
<li><code>preproduction</code></li>
<li><code>staging</code></li>
<li><code>author-title</code></li>
</ul>
<h1 id='static-pages'>Static pages</h1>
<p><strong>Note: the documentation for these endpoints is not maintained and might not be up to date.</strong></p>
<h1 id='tasks'>Tasks</h1><h2 id='what-is-a-task'>What is a task?</h2>
<p>In the context of this API, a task is a process in charge of performing certain actions on datasets of the document type.
These actions can be creating a dataset or overwriting its content.</p>

<p>A task may contains the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td style="text-align: center">Id of the task</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>type</td>
<td style="text-align: center">Task type - see full list <a href="https://github.com/resource-watch/doc-importer-messages/blob/master/task.messages.js#L4">here</a></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>message</td>
<td style="text-align: center">Task message, which parametrizes the task</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Status of the task - see full list <a href="https://github.com/resource-watch/doc-orchestrator/blob/master/app/src/app.constants.js#L3">here</a></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>reads</td>
<td style="text-align: center">Number of data reads performed by the task</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>writes</td>
<td style="text-align: center">Number of data writes performed by the task</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>index</td>
<td style="text-align: center">Name of the Elasticsearch index used in this task</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>datasetId</td>
<td style="text-align: center">Id of the dataset to which this task relates</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>logs</td>
<td style="text-align: center">List of the individual operations carried out by this task</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>error</td>
<td style="text-align: center">Error message generated should the task fail</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Date and time in which the task was created</td>
<td style="text-align: right">DateTime</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Date and time in which the task was last updated</td>
<td style="text-align: right">DateTime</td>
</tr>
</tbody></table>

<p>A task is fundamentally an internal element to the API, and it&#39;s visibility and interaction is limited to maintenance and debug actions.
At its core, a task represents a single package that contains:</p>

<ul>
<li>An action to be carried out.</li>
<li>A message that parametrises that action.</li>
<li>A status that identifies the progress stage of the task.</li>
<li>A dataset to which that action should relate.</li>
<li>An Elasticsearch index identifier where the resulting data will be saved.</li>
<li>Counters for read and write operations.</li>
<li>Logs for those operations.</li>
<li>An optional error field that identifies what happened in case of failure.</li>
</ul>
<h2 id='get-all-tasks'>Get all tasks</h2>
<p>To obtain all tasks:</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="nl">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:31.295Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:07.147Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a67f2557-9237-4435-82fd-3a0ad64b0292"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53ac8e83-167b-4c77-9b61-6642b1764b32"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">

            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"638cce8c-3e97-4bdd-b4de-41cd28254370"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="nl">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:36.421Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:09.175Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_638cce8c3e974bddb4de41cd28254370_1550652900017"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"638cce8c-3e97-4bdd-b4de-41cd28254370"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f5b6b0c-9132-4b5c-b7c4-b58582b3cb0b"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_638cce8c3e974bddb4de41cd28254370_1550652900017"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63c69b2b-31cd-4bdb-9794-f6d4ec155e7b"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=23&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">227</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='pagination'>Pagination</h3>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre></div>
<p>The Tasks service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your tasks list.</p>
<h3 id='filter-params'>Filter params</h3>
<p>Available filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">Task type</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Task status</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>datasetID</td>
<td style="text-align: center">Id of the dataset to which the task refers</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Tasks created on the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Tasks last updated on the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>createdBefore</td>
<td style="text-align: center">Tasks created before the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>createdAfter</td>
<td style="text-align: center">Tasks created after the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedBefore</td>
<td style="text-align: center">Tasks last updated before the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAfter</td>
<td style="text-align: center">Tasks last updated after the given date</td>
<td style="text-align: right">Date</td>
</tr>
</tbody></table>

<blockquote>
<p>Return tasks with type TASK_OVERWRITE</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task?type<span class="o">=</span>TASK_OVERWRITE
</code></pre></div>
<blockquote>
<p>Return the tasks with status SAVED</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task?status<span class="o">=</span>SAVED
</code></pre></div>
<blockquote>
<p>Return the tasks created on Feb 1st 2019</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task?createdAt<span class="o">=</span>2019-02-01
</code></pre></div>
<blockquote>
<p>Return the tasks last updated between Jan 2nd and Feb 2nd 2019</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task?updatedAfter<span class="o">=</span>2019-01-02&amp;updatedBefore<span class="o">=</span>2019-02-02
</code></pre></div>
<blockquote>
<p>Return the tasks last updated before and Feb 2nd 2019 and with status ERROR</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task?updatedBefore<span class="o">=</span>2019-02-02&amp;status<span class="o">=</span>ERROR
</code></pre></div><h2 id='get-a-single-task'>Get a single task</h2>
<p>To obtain the task:</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET https://api.resourcewatch.org/v1/doc-importer/task/55b02cfd-dabf-4ad0-a04d-5501cf248a0c
</code></pre></div>
<blockquote>
<p>Example response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="nl">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
            </span><span class="nl">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:31.295Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:07.147Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a67f2557-9237-4435-82fd-3a0ad64b0292"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53ac8e83-167b-4c77-9b61-6642b1764b32"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='delete-a-task'>Delete a task</h2>
<p>You can delete a task if, for example, it is stuck on a running state, but it&#39;s not actually running. This should
be considered a &quot;only do it if you know what you are doing&quot; operation, and requires ADMIN permission.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE https://api.resourcewatch.org/v1/doc-importer/task/&lt;task_id&gt; <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><h1 id='user-management'>User management</h1>
<p>The following endpoints expose the RW API&#39;s functionality regarding user management. These endpoints will allow you to login, recover a forgotten password, create, edit or delete a user account. We&#39;ve already covered the basics of getting a user account in the <a href="quickstart.html">quickstart guide</a> section, and here we&#39;ll dive deeper into all the functionality exposed by these endpoints.</p>

<p>These endpoints have a key difference from most of the endpoint covered so far. The great majority of the RW API endpoints are meant to be used by your applications, and as such produce JSON responses, which are easily interpreted by computers. However, some of the functionality we&#39;ll cover in this section is meant to be used only or also by humans, making JSON a less than ideal response format. </p>

<p>Some (but not all) of the endpoints documented here will produce a response in either JSON or HTML format, depending on the value you provide on the <code>Content-type</code> HTTP request header. 
Use <code>Content-Type: application/json</code> if you are calling the endpoint from an application, and would like to get a JSON formatted response. 
If you are accessing these endpoints from a browser, it will typically generate a request with the <code>Content-Type: text/html</code> header, in which case the reply will be in HTML format.</p>

<p>Keep in mind that not all endpoints support both formats, and will output either HTML or JSON, no matter which <code>Content-Type</code> value you provide.</p>
<h2 id='general-notes-on-rw-api-users'>General notes on RW API users</h2>
<p>User accounts in the RW API work pretty much like you would expect: you create a user account, login with it, and use it on your day-to-day interactions to access certain actions and associate certain RW API resources with it.</p>

<p>Besides authentication, user accounts are also used for authorization. Authorization is implemented on a per-service basis, but is commonly built on top of 3 elements associated with your a user account:</p>

<ul>
<li><code>id</code></li>
<li><code>role</code></li>
<li><code>application</code></li>
</ul>

<p><code>id</code> is a unique identifier of your account. Certain actions may be limited to specific users, typically in the context of a given resource being associated directly with a specific user <code>id</code>.</p>

<p><code>role</code> can be one of 3 values: <code>USER</code>, <code>MANAGER</code> and <code>ADMIN</code> and it is usually used for role-based access control - read more about this field in the <a href="concepts.html#user-roles">User roles concept documentation</a>.</p>

<p><code>application</code> is a list of keys meant to identify the different client applications that are built using the RW API. It&#39;s present not only on user accounts, but also on many of the resources found on the RW API, either as a single value or as a list of values. Typically, in order to manipulate a given resource, that resource and the user account must have at least one overlapping <code>application</code> value. You can find out more about how the <code>application</code> field works <a href="concepts.html#applications">here</a>.</p>

<p>Keep in mind that it&#39;s up to each individual RW API service (dataset, widget, layer, etc) to define how they restrict or allow actions based on these or other factors, so the examples above may not be true for all cases. Refer to the documentation of each resource and endpoint for more details on restrictions they may have regarding user accounts and their properties.</p>

<p><strong>Deprecation notice:</strong> Throughout these endpoints, you&#39;ll notice that many API responses contain both <code>id</code> and <code>_id</code> (with and without an underscore prefix). Whenever both are present, they will always have the same value, and you should rely on <code>id</code> (no prefix) - <code>_id</code> is present for BC reasons, but should be considered deprecated, and will be removed in the near future. </p>
<h2 id='user-management-and-applications'>User management and applications</h2>
<p>As we&#39;ve covered in previous sections, several RW API resources, like users, datasets or widgets, are associated with one or more applications. Applications are a way to identify the different tools that rely on the RW API, and are used to make resource management easier.</p>

<p>The user management service can also models its behavior based on the application that&#39;s making use of it - this can be controlled by the <code>origin</code> query parameter. This parameter can be passed on every request, or on the first request only, if you are relying on cookie-based sessions. In it, you can identify the application using the RW API. If it&#39;s a known application, certain elements will be adjusted:</p>

<ul>
<li>Logo and color scheme on HTML pages and emails.</li>
<li>Fallback redirects on login.</li>
<li>Available 3rd party authentication mechanisms and associated accounts on those platforms.</li>
</ul>

<p>If you use an <code>origin</code> application that&#39;s not known to the RW API, you will see a fallback configuration of these elements, and 3rd party login will be disabled. If you&#39;d like your application to be supported, please <a href="https://resourcewatch.org/about/contact-us">contact us</a> - we&#39;d love to hear about how the RW API can help your projects.</p>
<h2 id='login-email-password'>Login (email + password)</h2>
<p>Login endpoints support both HTML and JSON output formats, depending on the <code>Content-type</code> provided in the request. Keep in mind that HTML-based requests will result in redirects - for example, after successfully logging in, you will be taken to <code>/auth/success</code> - while JSON based requests will simply return the matching HTTP code - 200 in case of a successful login.</p>
<h3 id='get-lt-base-api-url-gt-auth'>GET <code>&lt;BASE API URL&gt;/auth/</code></h3>
<p>Convenience URL that redirects to <code>&lt;BASE API URL&gt;/auth/login</code> - the HTML login page.</p>
<h3 id='get-lt-base-api-url-gt-auth-login'>GET <code>&lt;BASE API URL&gt;/auth/login</code></h3>
<p>HTML page that displays the login, registration and password reset links. This is the most common entry point when using the HTML UI provided by the RW API for user management.</p>
<h3 id='post-lt-base-api-url-gt-auth-login'>POST <code>&lt;BASE API URL&gt;/auth/login</code></h3>
<blockquote>
<p>Email + password based login - JSON format</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/auth/login"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com",
    "password":"potato"
}'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email@provider.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-15T04:46:35.313Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-15T04:46:35.313Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"rw"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViZWNmYTJiNjdkYTBkM2VjMDdhMjdmNiIsInJvbGUiOiJVU0VSIiwicHJvdmlkZXIiOiJsb2NhbCIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsImV4dHJhVXNlckRhdGEiOnsiYXBwcyI6WyJydyJdfSwiY3JlYXRlZEF0IjoxNTQzMzE1NzMxNzcwLCJpYXQiOjE1NDMzMTU3MzF9.kIdkSOb7mCMOxE2ipqVOBrK7IefAjLDhaPG9DT1qvCw"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Endpoint for email + password based login.</p>

<p>For HTML requests, it will redirect to either <code>&lt;BASE API URL&gt;/auth/success</code> or <code>&lt;BASE API URL&gt;/auth/fail</code> depending on whether the login was successful or not. If successful, the HTTP reply will have a session cookie that may be used in subsequent requests. An optional <code>callbackUrl</code> query parameter can be provided, in which case the user will be redirected to that URL in case of login success. </p>

<p>For JSON requests, in case of successful logins, the user details will be returned as a JSON object.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Invalid email or password.</td>
<td>Login credentials are missing or incorrect.</td>
</tr>
</tbody></table>
<h3 id='get-lt-base-api-url-gt-auth-fail'>GET <code>&lt;BASE API URL&gt;/auth/fail</code></h3>
<p>Displays login errors for HTML requests. Not supported on JSON requests.</p>
<h3 id='get-lt-base-api-url-gt-auth-check-logged'>GET <code>&lt;BASE API URL&gt;/auth/check-logged</code></h3>
<blockquote>
<p>Check if the user is logged</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/check-logged"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s1">'Cookie: &lt;your cookie values&gt;'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email@provider.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T10:59:03.531Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T10:59:03.531Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Checks if you are logged in. This is typically used to determine if a session has been established between the the user&#39;s browser and the RW API. </p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You are not logged in.</td>
</tr>
</tbody></table>
<h3 id='get-lt-base-api-url-gt-auth-success'>GET <code>&lt;BASE API URL&gt;/auth/success</code></h3>
<p>Successful login page for HTML requests. Not supported on JSON requests.</p>
<h3 id='get-lt-base-api-url-gt-auth-logout'>GET <code>&lt;BASE API URL&gt;/auth/logout</code></h3>
<p>Login invalidation endpoint. Only invalidates the session cookie set on login. If using JSON Web Token based authentication, this endpoint will NOT invalidate the token.</p>
<h3 id='get-lt-base-api-url-gt-auth-generate-token'>GET <code>&lt;BASE API URL&gt;/auth/generate-token</code></h3>
<blockquote>
<p>Generate the user&#39;s JSON Web Token</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/generate-token"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s1">'Cookie: &lt;your cookie values&gt;'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViZWNmYTJiNjdkYTBkM2VjMDdhMjdmNiIsInJvbGUiOiJVU0VSIiwicHJvdmlkZXIiOiJsb2NhbCIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsImV4dHJhVXNlckRhdGEiOnsiYXBwcyI6WyJydyJdfSwiY3JlYXRlZEF0IjoxNTQzMzE1NzMxNzcwLCJpYXQiOjE1NDMzMTU3MzF9.kIdkSOb7mCMOxE2ipqVOBrK7IefAjLDhaPG9DT1qvCw"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Generates a JSON Web Token for the current user session. This is useful when using the HTML UI through a browser, where a session is established using a cookie returned on login. This cookie authenticates the user, and allows retrieving the token.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You are not logged in.</td>
</tr>
</tbody></table>
<h2 id='login-3rd-party-oauth'>Login (3rd party oauth)</h2>
<p>Besides its own email + password login mechanism, that you can interact with and build your own UI on top of, the RW API also provides authentication using 3rd party accounts, like Facebook, Twitter, Apple or Google. These 4 authentication mechanisms use <a href="https://en.wikipedia.org/wiki/OAuth">OAuth</a> access delegation, meaning users can use their accounts on these platforms to access the RW API. For each mechanism, users will be informed, when logging in, which data the RW API requires to provide this access.</p>

<p>For each provider, there&#39;s a corresponding endpoint that starts the authentication flow. These endpoints simply redirect the user to the respective provider page, along with some data that allows the provider to contact the RW API when the login process is finished. You can forward users to these endpoints if, for example, you want to have your own login links on your UI.</p>

<p>Keep in mind that, depending on the <code>origin</code> application you specify, different Twitter, Facebook or Google applications will be used. Also, not all <code>origin</code> applications support all 3 providers.</p>
<h3 id='3rd-party-authentication-using-twitter'>3rd party authentication using Twitter</h3>
<ul>
<li>GET <code>&lt;BASE API URL&gt;/auth/twitter</code> - Starts authentication using the configured Twitter settings</li>
<li>GET <code>&lt;BASE API URL&gt;/auth/twitter/callback</code> - Callback used once Twitter auth is done</li>
</ul>
<h3 id='3rd-party-authentication-using-google'>3rd party authentication using Google</h3>
<ul>
<li>GET <code>&lt;BASE API URL&gt;/auth/google</code> - Starts authentication using the configured Google settings</li>
<li>GET <code>&lt;BASE API URL&gt;/auth/google/callback</code> - Callback used once Google auth is done</li>
<li>GET <code>&lt;BASE API URL&gt;/auth/google/token?access_token=&lt;Google token&gt;</code> - Endpoint that expects the Google token used by the API to validate the user session. It</li>
</ul>
<h3 id='3rd-party-authentication-using-facebook'>3rd party authentication using Facebook</h3>
<ul>
<li>GET <code>&lt;BASE API URL&gt;/auth/facebook</code> - Starts authentication using the configured Facebook settings</li>
<li>GET <code>&lt;BASE API URL&gt;/auth/facebook/callback</code> - Callback used once Facebook auth is done</li>
<li>GET <code>&lt;BASE API URL&gt;/auth/facebook/token?access_token=&lt;Facebook token&gt;</code> - Endpoint that expects the Facebook token used by the API to validate the user session.</li>
</ul>
<h3 id='3rd-party-authentication-using-apple'>3rd party authentication using Apple</h3>
<ul>
<li>GET <code>&lt;BASE API URL&gt;/auth/apple</code> - Starts authentication using the configured Apple settings</li>
<li>POST <code>&lt;BASE API URL&gt;/auth/apple/callback</code> - Callback used once Apple auth is done</li>
<li>GET <code>&lt;BASE API URL&gt;/auth/apple/token?access_token=&lt;Apple JSON Web Token&gt;</code> - Endpoint that expects the Apple JSON Web Token obtained by the user while authenticating using another application. It validates that token using Apple&#39;s services, and if valid, creates/updates the user&#39;s RW API account. It returns a RW API JSON Web Token.</li>
</ul>
<h2 id='registration'>Registration</h2>
<p>Registration endpoints support both HTML and JSON output formats, depending on the <code>Content-type</code> provided in the request.</p>
<h3 id='view-the-registration-page'>View the registration page</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/sign-up"</span>
</code></pre></div>
<p>Account creation page, for accounts using email + password based login for HTML requests. Not supported on JSON requests.</p>
<h3 id='register-a-new-user-account'>Register a new user account</h3>
<blockquote>
<p>Account creation using email + password</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/auth/sign-up"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com",
    "password":"potato",
    "repeatPassword":"potato",
    "apps": ["rw"]
}'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email@provider.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T10:59:03.531Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Account creation using email + password with a user defined origin app</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/auth/sign-up?origin=rw"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com",
    "password":"potato",
    "repeatPassword":"potato",
    "apps": ["rw"]
}'</span>
</code></pre></div>
<p>Account creation endpoint, for accounts using email + password based login for both HTML and JSON requests.</p>

<p>The combination of both <code>user email</code> and <code>provider</code> must be unique - a given email address may be associated with multiple, non-related user accounts by using different authentication providers (email+password, facebook, twitter, apple, etc).</p>

<p>For HTML requests, it will display a message informing about any validation error, or informing the user in case of success.</p>

<p>For JSON requests, successful logins will return a JSON object containing the details of the user.</p>

<p>Keep in mind that this endpoint creates a <strong>deactivated</strong> user account. A successful call to this endpoint send an email to the user, with a link that the user must click in order to confirm their account. Once confirmed using this process, the user account becomes activated and fully functional, and the user will be able to log in.</p>

<p>The email sent to the user will have the identity of the <code>origin</code> app provided on the request, with a system-wide fallback (GFW) being used in case none is provided.</p>

<p>While optional, it&#39;s highly recommended that you specify which apps the user will be granted access to, as most API operation validate the user&#39;s apps match datasets, widgets, etc. All accounts created this way will have the <code>USER</code> role.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Email exists.</td>
<td>An account already exists for the provided email address.</td>
</tr>
<tr>
<td>422</td>
<td>Email, Password and Repeat password are required.</td>
<td>You are missing one of the required fields.</td>
</tr>
</tbody></table>
<h3 id='confirm-user-account'>Confirm user account</h3>
<blockquote>
<p>JSON Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/confirm/:token"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div>
<blockquote>
<p>JSON Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadc495eae7358322dd64b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadc495eae7358322dd64b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"info@vizzuality.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:06:17.676Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:06:17.676Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Request with callback:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/confirm/:token?callbackUrl=https://your-app.com"</span>
</code></pre></div>
<p>Endpoint used in the user validation email to confirm the address upon registration.</p>

<p>It accepts an optional <code>callbackUrl</code> query parameter with an URL to which the user will be redirect if the confirmation succeeds.</p>

<p>Should no <code>callbackUrl</code> be provided, the user is redirected to an URL based on the first application associated to their user account - see <code>ct-oauth-plugin</code> configuration for more info.</p>

<p>Should that application have no configured redirect URL, or the user have no configured app, they are redirect to a platform-wide default URL - see <code>ct-oauth-plugin</code> configuration for more info.</p>
<h2 id='password-recovery'>Password recovery</h2>
<p>Password recovery endpoints support both HTML and JSON output formats, depending on the <code>Content-type</code> provided in the request. These can be used either as part of your application (for example, if you want your UI to have these features built in) or as a standalone, end user facing interface (for applications that prefer to rely on the existing UI elements provided by the RW API).</p>
<h3 id='get-lt-base-api-url-gt-auth-reset-password'>GET <code>&lt;BASE API URL&gt;/auth/reset-password</code></h3>
<p>Displays the password reset form HTML page.</p>
<h3 id='post-lt-base-api-url-gt-auth-reset-password'>POST <code>&lt;BASE API URL&gt;/auth/reset-password</code></h3>
<blockquote>
<p>Request a password reset</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/auth/reset-password"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com"
}'</span>
</code></pre></div>
<blockquote>
<p>Response (JSON)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email sent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Endpoint where the password reset request is sent. If an account associated with the provided email address exists, a message will be sent to it with a link that will allow the user to reset their account&#39;s password. That link will be valid for 24 hours.</p>

<p>Note that, for security reasons, if no account associated with the provided email address exists, the output will be the same.  </p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Mail required.</td>
<td>You need to specify the email address in the request body.</td>
</tr>
</tbody></table>
<h3 id='get-lt-base-api-url-gt-auth-reset-password-token'>GET <code>&lt;BASE API URL&gt;/auth/reset-password/:token</code></h3>
<p>Endpoint used when the user clicks the link sent in the reset password email. This endpoint is meant to be used only by the end user.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Token expired.</td>
<td>The reset password link is more than 24 hours old and is no longer valid.</td>
</tr>
</tbody></table>
<h3 id='post-lt-base-api-url-gt-auth-reset-password-token'>POST <code>&lt;BASE API URL&gt;/auth/reset-password/:token</code></h3>
<blockquote>
<p>New password submission</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://api.resourcewatch.org/auth/reset-password/&lt;email token&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
 <span class="s1">'{
    "password":"potato",
    "repeatPassword":"potato"
}'</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"gfw"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Endpoint used to submit the new password.</p>

<p>For HTML requests, it will redirect the user to the configured redirect URL on success, or return to the &quot;Reset your password&quot; form on error.</p>

<p>For JSON requests, it will return the user object on success, or a JSON object containing details in case of error.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Token expired.</td>
<td>The reset password link is more than 24 hours old and is no longer valid.</td>
</tr>
<tr>
<td>422</td>
<td>Password and Repeat password are required.</td>
<td>You need to specify both the <code>password</code> and the <code>repeatPassword</code> values.</td>
</tr>
<tr>
<td>422</td>
<td>Password and Repeat password not equal.</td>
<td>You need to specify equal <code>password</code> and <code>repeatPassword</code> values.</td>
</tr>
</tbody></table>
<h2 id='user-details-management'>User details management</h2>
<p>This section covers endpoints that focus on retrieving, modifying or deleting user accounts. Unlike previous endpoints, these are meant to be consumed by applications, and will always produce a JSON response.</p>
<h3 id='getting-all-users'>Getting all users</h3>
<blockquote>
<p>Lists all currently active users belonging to the same apps as the requester</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/user"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d2fadb3adf1dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d2fadb3adf1dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
     </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
         </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
     </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows users with <code>ADMIN</code> role to list and filter existing user accounts. Through this endpoint, only 3rd party-based and confirmed email-based user accounts are listed - user accounts that have not been confirmed will not be listed. It&#39;s also important to keep in mind that, by default, only users belonging to the same apps as the requesting user will be shown - you can use <a href="#filters449">filters</a> to modify this behavior.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
</tbody></table>
<h4 id='pagination'>Pagination</h4>
<blockquote>
<p>Example request to load page 2 using 25 results per page</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=2&amp;page[size]=25"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<p>The Users service adheres to the conventions defined in the <a href="concepts.html#pagination">Pagination guidelines for the RW API</a>, so we recommend reading that section for more details on how paginate your users list.</p>
<h4 id='filters'>Filters</h4>
<blockquote>
<p>List users with the ADMIN role (and associated with the current user&#39;s app)</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/user?role=ADMIN"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>List users with the ADMIN role and associated with either <code>gfw</code> or <code>rw</code> apps</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/user?role=ADMIN&amp;app=gfw,rw"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d2fadb3adf1dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d2fadb3adf1dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
     </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="nl">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
         </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
     </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The users list provides a set of parameters that you can use to tailor your users listing. Please note that filtering users adheres to the conventions defined in the <a href="concepts.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. in addition to these conventions, you can use the following fields as filters supported by the users list endpoint:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Expected values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Filter returned users by their name.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>email</td>
<td>Filter returned users by their email address. Keep in mind that user accounts that rely on 3rd party authentication mechanisms may not have an email address.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>provider</td>
<td>Filter returned users by their provider.</td>
<td>String</td>
<td><code>local</code>, <code>google</code>, <code>twitter</code>, <code>facebook</code> or <code>apple</code></td>
</tr>
<tr>
<td>role</td>
<td>Filter returned users by their role.</td>
<td>String</td>
<td><code>USER</code>, <code>MANAGER</code> or <code>ADMIN</code></td>
</tr>
<tr>
<td>app</td>
<td>Filter returned users by their app. Multiple values can be passed, separated by commas, in which case any user associated with at least one of the applications will be returned. Pass <code>all</code> to show users for all apps.</td>
<td>String</td>
<td>any valid text</td>
</tr>
</tbody></table>
<h3 id='get-the-current-user'>Get the current user</h3>
<blockquote>
<p>Shows info for user currently logged in</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/user/me"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"gfw"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to get the details of the user account associated with the current token. It&#39;s available to all authenticated users.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
</tbody></table>
<h3 id='get-a-user-by-id'>Get a user by id</h3>
<blockquote>
<p>Shows info for user with the given id</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://api.resourcewatch.org/auth/user/&lt;user_id&gt;"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"gfw"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint allows you to get the details of the user account associated with the current token. It&#39;s available to users with role <code>ADMIN</code>.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
<tr>
<td>403</td>
<td>Not authorized.</td>
<td>You need to have the <code>ADMIN</code> role to use this endpoint.</td>
</tr>
</tbody></table>
<h3 id='update-your-user-account-details'>Update your user account details</h3>
<blockquote>
<p>Updates current user details</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/auth/user/me"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
 <span class="s1">'{
    "name":"new-name",
    "photo": "https://photo-url.com",
    "extraUserData" : {
        apps: ["rw", "gfw"]
    },
    "role": "MANAGER"
}'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://photo-url.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANAGER"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoints allows updating your user account details. It&#39;s available to any logged in user, allowing them to modify the following fields:</p>

<ul>
<li><code>name</code></li>
<li><code>photo</code></li>
<li><code>extraUserData.apps</code> (only allowed for users with <code>ADMIN</code> role)</li>
<li><code>role</code> (only allowed for users with <code>ADMIN</code> role)</li>
</ul>

<p>The response will contain the user details, reflecting the applied changes.</p>

<aside class="notice">
Updating your account details may invalidate your token and cause your apps to stop working.
</aside>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
</tbody></table>
<h3 id='update-another-user-39-s-account-details'>Update another user&#39;s account details</h3>
<blockquote>
<p>Updates details of user given its id</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://api.resourcewatch.org/auth/user/57bc2611f098ce9800798688"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
 <span class="s1">'{
    "name":"new-name",
    "photo": "https://photo-url.com",
    "extraUserData" : {
        apps: ["rw", "gfw"]
    },
    "role": "MANAGER"
}'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://photo-url.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANAGER"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoints allows updating the user account details of another user. It&#39;s available to users with the <code>ADMIN</code> role, allowing them to modify the following fields:</p>

<ul>
<li><code>name</code></li>
<li><code>photo</code></li>
<li><code>extraUserData.apps</code></li>
<li><code>role</code></li>
</ul>

<p>The response will contain the user details, reflecting the applied changes.</p>

<aside class="notice">
Updating a user's account details may invalidate their token and cause their apps to stop working.
</aside>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
<tr>
<td>403</td>
<td>Not authorized.</td>
<td>You need to have the <code>ADMIN</code> role to use this endpoint.</td>
</tr>
</tbody></table>
<h3 id='deleting-a-user'>Deleting a user</h3>
<blockquote>
<p>Deletes a user by its id</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://api.resourcewatch.org/auth/user/&lt;user_id&gt;"</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>  <span class="nt">-d</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://photo-url.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANAGER"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoints deletes the user account with the given id. It&#39;s available to users with the <code>ADMIN</code> role. The response will contain the details of the user account that was deleted.</p>

<aside class="notice">
This action only deletes the user account. Any resources (datasets, subscriptions, etc) that may be associated with this given user account are not modified or deleted.
</aside>
<h1 id='microservices'>Microservices</h1>
<aside class="notice">
    These endpoints are only available to ADMIN users.
</aside>

<p>Details on endpoints to manage microservices can be found in the <a href="developer.html#microservices">internal developer docs</a>.</p>
<h1 id='troubleshooting'>Troubleshooting</h1>
<p>This section is meant to help you deal with common pitfalls of everyday usage of the API.</p>
<h2 id='authentication-and-authorization'>Authentication and authorization</h2><h3 id='401-unauthorized'>401 Unauthorized</h3>
<p><code>401 Unauthorized</code> errors mean that the API did not receive the necessary data to identify who you are. You may not be logged in, there may be an issue with your usage of the user token, or the token you are using may be in the wrong header.</p>

<p>Make sure you have followed the <a href="quickstart.html">quickstart guide</a>, which shows you how to create a JSON Web Token for authorization and how to pass it correctly in the <code>Authorization</code> header.</p>
<h3 id='403-forbidden'>403 Forbidden</h3>
<p>A <code>403 Forbidden</code> error means that you are identified as a valid user, but you do not have the required permissions for the action you are trying to perform. Common scenarios where this happens are:
- You do not have the required user <code>ROLE</code> to carry out that operation.
- You may be trying to operate on a resource that belongs to a different <code>application</code> than the ones you are associated with. Read more about how the <code>application</code> field works <a href="concepts.html#applications">here</a>.
- Certain resources have a concept of <code>owner</code> with certain actions being exclusively available to that particular user.</p>

<p>Check the specific documentation for the endpoint you are trying to use for more details on its behavior. Conditions that trigger a <code>403 Forbidden</code> error will often vary beyond the ones listed above.</p>
<h1 id='contact'>Contact</h1>
<p>The following contact endpoints are available</p>
<h2 id='contact-us'>Contact us</h2>
<p>Sends a contact form including a topic, email address, and a message. </p>
<h3 id='example'>Example</h3>
<p>Contact form sent using the type <code>General question or feedback</code>, the email address <code>example@example.com</code> and the message <code>This is a text</code>:</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST https://api.resourcewatch.org/v1/contact-us <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-d</span> <span class="se">\</span>
    <span class="s1">'{
        "topic": "General question or feedback",
        "email": "example.example@vizzuality.com",
        "text": "This is a test"
    }'</span>
</code></pre></div>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
